(function(){var e={9755:function(e,t,i){"use strict";var s=i(9963),a=i(6252);const r={translate:"no"};function o(e,t,i,s,o,n){const l=(0,a.up)("NavBar"),c=(0,a.up)("router-view"),d=(0,a.up)("SocialsFooter"),u=(0,a.up)("NoAccessOverlay");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(l),(0,a.Wm)(c),null==e.$route.meta.footer?((0,a.wg)(),(0,a.j4)(d,{key:0})):(0,a.kq)("",!0),null!=e.$route.meta.noAccess?((0,a.wg)(),(0,a.j4)(u,{key:1})):(0,a.kq)("",!0)])}var n=i(5833);const l=e=>((0,a.dD)("data-v-7993195e"),e=e(),(0,a.Cn)(),e),c=l((()=>(0,a._)("hr",null,null,-1))),d=l((()=>(0,a._)("img",{class:"logo",src:n},null,-1))),u=l((()=>(0,a._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarToggler","aria-controls":"navbarToggler"},[(0,a._)("span",{class:"navbar-toggler-icon"})],-1))),h={class:"collapse navbar-collapse",id:"navbarToggler"},p={class:"navbar-nav ms-auto"},m={class:"nav-item"},v={class:"nav-item"},g={class:"nav-item"},y={class:"nav-item"},f={class:"nav-item"},_={class:"nav-item"},w={class:"nav-item"},b={class:"nav-item"},k=["href"],E=l((()=>(0,a._)("i",{class:"fa-solid fa-shuffle mx-1"},null,-1))),x=[E];function C(e,t,i,s,r,o){const n=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[c,(0,a._)("header",{onClick:t[0]||(t[0]=(...e)=>o.changeLinkColors&&o.changeLinkColors(...e)),class:"navbar navbar-expand-lg navbar-light sticky-top"},[(0,a.Wm)(n,{to:"/",class:"brand navbar-brand"},{default:(0,a.w5)((()=>[d,(0,a.Uk)(" Intern ")])),_:1}),u,(0,a._)("div",h,[(0,a._)("ul",p,[(0,a._)("li",m,[(0,a.Wm)(n,{class:"nav-link",to:"/stats"},{default:(0,a.w5)((()=>[(0,a.Uk)("Statistiken")])),_:1})]),(0,a._)("li",v,[(0,a.Wm)(n,{class:"nav-link",to:"/orders"},{default:(0,a.w5)((()=>[(0,a.Uk)("Bestellungen")])),_:1})]),(0,a._)("li",g,[(0,a.Wm)(n,{class:"nav-link",to:"/services"},{default:(0,a.w5)((()=>[(0,a.Uk)("Services")])),_:1})]),(0,a._)("li",y,[(0,a.Wm)(n,{class:"nav-link",to:"/reviews"},{default:(0,a.w5)((()=>[(0,a.Uk)("Rezensionen")])),_:1})]),(0,a._)("li",f,[(0,a.Wm)(n,{class:"nav-link",to:"/companies"},{default:(0,a.w5)((()=>[(0,a.Uk)("Unternehmen")])),_:1})]),(0,a._)("li",_,[(0,a.Wm)(n,{class:"nav-link",to:"/users"},{default:(0,a.w5)((()=>[(0,a.Uk)("Nutzer")])),_:1})]),(0,a._)("li",w,[(0,a.Wm)(n,{class:"nav-link",to:"/settings"},{default:(0,a.w5)((()=>[(0,a.Uk)("Einstellungen")])),_:1})]),(0,a._)("li",b,[(0,a._)("a",{class:"nav-link",href:r.mainUrl},x,8,k)])])])])],64)}var D={name:"NavBar",props:{info:String},data(){return{mainUrl:"https://schillerando.de"}},mounted(){this.changeLinkColors()},methods:{changeLinkColors(){const e=window.location.href.split("/"),t=e[e.length-1],i=document.getElementsByClassName("nav-link");for(var s=0;s<i.length;s++)i[s].style.color="#000";switch(t){case"stats":i[0].style.color="#00a100";break;case"orders":i[1].style.color="#00a100";break;case"services":i[2].style.color="#00a100";break;case"reviews":i[3].style.color="#00a100";break;case"companies":i[4].style.color="#00a100";break;case"users":i[5].style.color="#00a100";break;case"settings":i[6].style.color="#00a100";break;default:break}}}},I=i(3744);const S=(0,I.Z)(D,[["render",C],["__scopeId","data-v-7993195e"]]);var A=S;const B=e=>((0,a.dD)("data-v-3a9b519e"),e=e(),(0,a.Cn)(),e),L={id:"footer",class:"container-fluid"},P=B((()=>(0,a._)("div",{class:"container-fluid"},[(0,a._)("a",{href:"mailto:info@schillerando.de"},[(0,a._)("i",{class:"social-icon fa-solid fa-lg fa-envelope"})]),(0,a._)("a",{tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"focus","data-bs-placement":"top","data-bs-content":'\n        <div>\n          <p>\n            Hierbei handelt es sich um ein Unternehmen für das Schulprojekt Schule als Staat 2023 des FSG Marbach und um kein echtes Unternehmen \n          </p>\n          <p>\n            <strong>Impressum:</strong>\n            <br>Felix Haag\n            <br>Schulstraße 34\n            <br>71672 Marbach am Neckar\n            <br>Telefon: <a href="tel:+4915759664764">0157 / 59 66 47 64</a>\n            <br>E-Mail: <a href="mailto:info@schillerando.de">info@schillerando.de</a>\n          </p>\n        </div>'},[(0,a._)("i",{class:"social-icon fa-solid fa-lg fa-circle-info"})]),(0,a._)("a",{href:"https://www.instagram.com/schillerando/"},[(0,a._)("i",{class:"social-icon fab fa-lg fa-instagram"})]),(0,a._)("p",null,"© Schillerando")],-1))),q=[P];function R(e,t,i,s,r,o){return(0,a.wg)(),(0,a.iD)("footer",L,q)}var T=i(5577),z={name:"ProductView",mounted(){Array.from(document.querySelectorAll('a[data-bs-toggle="popover"]')).forEach((e=>new T.Popover(e,{html:!0})))}};const F=(0,I.Z)(z,[["render",R],["__scopeId","data-v-3a9b519e"]]);var U=F,V=i(1029);const M=e=>((0,a.dD)("data-v-8f87938e"),e=e(),(0,a.Cn)(),e),O={key:0},Z={key:0,class:"overlay"},N=M((()=>(0,a._)("div",{class:"centered"},[(0,a._)("img",{class:"lock",src:V,alt:""}),(0,a._)("h4",{class:"mt-3"},"Auf diese Seite haben nur Admins Zugriff!")],-1))),K=[N];function Q(e,t,i,s,r,o){return null!=s.userData?((0,a.wg)(),(0,a.iD)("div",O,["admin"!=s.userData.role?((0,a.wg)(),(0,a.iD)("div",Z,K)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)}var H=i(3907),W=i(2201),G={name:"NoAccessOverlay",setup(){const e=(0,H.oR)(),t=(0,W.tv)(),i=(0,a.Fl)((()=>e.state.user));return{store:e,router:t,userData:i}}};const Y=(0,I.Z)(G,[["render",Q],["__scopeId","data-v-8f87938e"]]);var j=Y,X={name:"App",components:{NavBar:A,SocialsFooter:U,NoAccessOverlay:j},setup(){const e=(0,H.oR)();return e.dispatch("reload"),{store:e}}};const J=(0,I.Z)(X,[["render",o]]);var $=J,ee=i(3577);const te=e=>((0,a.dD)("data-v-3e256851"),e=e(),(0,a.Cn)(),e),ie={key:0,style:{"margin-bottom":"100px"}},se={class:"nav","aria-label":"Page navigation example"},ae={class:"pagination"},re={class:"page-item"},oe={class:"page-item"},ne={class:"page-item"},le={key:0,class:"container"},ce={class:"row"},de={class:"col-12"},ue={key:0,class:"alert alert-warning",role:"alert"},he={class:"col-lg-8"},pe={class:"card m-1"},me=te((()=>(0,a._)("div",{class:"card-header"},"Informationen",-1))),ve={class:"card-body"},ge={class:"image"},ye={key:0,class:"no-image"},fe=te((()=>(0,a._)("i",{class:"fa-solid fa-image fa-2xl"},null,-1))),_e=[fe],we=["src"],be=["disabled"],ke={class:"needs-validation",novalidate:""},Ee={class:"input-group mb-3"},xe=te((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-shop"})],-1))),Ce=["value","disabled"],De={class:"input-group mb-3"},Ie=te((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-location-dot"})],-1))),Se=["value","disabled"],Ae={class:"input-group mb-3"},Be=te((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-list"})],-1))),Le=["value","disabled"],Pe=(0,a.uE)('<option selected data-v-3e256851>Kategorie</option><option value="Gastronomie" data-v-3e256851>Gastronomie</option><option value="Kultur" data-v-3e256851>Kultur</option><option value="Dienstleistung" data-v-3e256851> Dienstleistung </option><option style="color:red;" value="Gastronomie &amp; Dienstleistung" data-v-3e256851> Gastronomie &amp; Dienstleistung </option>',5),qe=[Pe],Re={class:"input-group mb-3"},Te=te((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),ze=["value","disabled"],Fe={class:"status"},Ue={class:"abo"},Ve={key:0,class:"leader"},Me={style:{"font-weight":"bold"}},Oe=["href"],Ze={class:"form-check form-switch"},Ne=["disabled","checked"],Ke=te((()=>(0,a._)("label",{class:"form-check-label",for:"flexSwitchCheckChecked"},"Verifiziert",-1))),Qe={class:"form-check form-switch"},He=["disabled","checked"],We={class:"form-check-label",for:"flexSwitchCheckChecked"},Ge={key:0,class:"py-2",style:{width:"fit-content"}},Ye={key:1,style:{display:"flex"}},je={class:"py-2 mx-0 edit-buttons"},Xe=te((()=>(0,a._)("div",{class:"loading-button"},"Speichern",-1))),Je=te((()=>(0,a._)("div",{class:"spinner"},[(0,a._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),(0,a._)("span",{class:"sr-only"},"Loading...")],-1))),$e=[Xe,Je],et={class:"py-2 mx-0 edit-buttons"},tt={class:"col-lg-4"},it={class:"card m-1"},st=te((()=>(0,a._)("div",{class:"card-header"},"Mitarbeiter",-1))),at={class:"card-body"},rt={class:"input-group mb-3"},ot=te((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa fa-envelope"})],-1))),nt=["value","disabled","onInput"],lt=["onClick"],ct=te((()=>(0,a._)("i",{class:"fa fa-trash"},null,-1))),dt=[ct],ut={key:0,class:"py-2",style:{width:"fit-content"}},ht={key:1},pt={style:{display:"flex"}},mt={class:"py-2 mx-0 edit-buttons"},vt=te((()=>(0,a._)("div",{class:"loading-button"},"Speichern",-1))),gt=te((()=>(0,a._)("div",{class:"spinner"},[(0,a._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),(0,a._)("span",{class:"sr-only"},"Loading...")],-1))),yt=[vt,gt],ft={class:"py-2 mx-0 edit-buttons"},_t={class:"col-lg-8"},wt={class:"card m-1"},bt=te((()=>(0,a._)("div",{class:"card-header"},"Extras",-1))),kt={class:"card-body"},Et={class:"needs-validation",novalidate:""},xt=te((()=>(0,a._)("h5",null,"Instagram",-1))),Ct={class:"input-group mb-3"},Dt=te((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-brands fa-instagram fa-lg"})],-1))),It=["value","disabled"],St=te((()=>(0,a._)("h5",{class:"mt-4"},"Standort",-1))),At={key:0,style:{"text-align":"left","font-size":"1rem","font-weight":"300"}},Bt={key:1,class:"sizing"},Lt={class:"mapWrapper"},Pt={key:2,class:"py-2",style:{width:"fit-content"}},qt={key:3,style:{display:"flex"}},Rt={class:"py-2 mx-0 edit-buttons"},Tt=te((()=>(0,a._)("div",{class:"loading-button"},"Speichern",-1))),zt=te((()=>(0,a._)("div",{class:"spinner"},[(0,a._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),(0,a._)("span",{class:"sr-only"},"Loading...")],-1))),Ft=[Tt,zt],Ut={class:"py-2 mx-0 edit-buttons"};function Vt(e,t,i,s,r,o){const n=(0,a.up)("AlertPopup"),l=(0,a.up)("CompanyBadge"),c=(0,a.up)("MapPicker"),d=(0,a.up)("ProductView"),u=(0,a.up)("AccountingView");return void 0!=r.company?((0,a.wg)(),(0,a.iD)("div",ie,[(0,a.Wm)(n,{title:this.alertTitle,info:this.alertInfo},null,8,["title","info"]),(0,a._)("div",se,[(0,a._)("ul",ae,[(0,a._)("li",re,[(0,a._)("a",{class:"page-link",onClick:t[0]||(t[0]=e=>this.page=0)},"Einstellungen")]),(0,a._)("li",oe,[(0,a._)("a",{class:"page-link",onClick:t[1]||(t[1]=e=>this.page=1)},"Angebote")]),(0,a._)("li",ne,[(0,a._)("a",{class:"page-link",onClick:t[2]||(t[2]=e=>this.page=2)},"Buchhaltung")])])]),0==this.page?((0,a.wg)(),(0,a.iD)("div",le,[(0,a._)("div",ce,[(0,a._)("div",de,[0==r.company.verified?((0,a.wg)(),(0,a.iD)("div",ue," Das Unternehmen muss noch überprüft werden. ")):(0,a.kq)("",!0)]),(0,a._)("div",he,[(0,a._)("div",pe,[me,(0,a._)("div",ve,[(0,a._)("div",ge,[null==s.form.image?((0,a.wg)(),(0,a.iD)("div",ye,_e)):((0,a.wg)(),(0,a.iD)("img",{key:1,src:this.form.image,alt:"Unternehmen Bild",id:"companyImage"},null,8,we))]),(0,a._)("input",{class:"form-control form-control-sm mb-4",type:"file",id:"formFile",accept:"image/*",onChange:t[3]||(t[3]=e=>o.imageInput()),disabled:!r.isCompanyEditing},null,40,be),(0,a._)("form",ke,[(0,a._)("div",Ee,[xe,(0,a._)("input",{type:"text",id:"company-name",class:"form-control",placeholder:"Name",onInput:t[4]||(t[4]=e=>o.validateCompanyChange(!1)),value:r.company.name,disabled:!r.isCompanyEditing,required:""},null,40,Ce)]),(0,a._)("div",De,[Ie,(0,a._)("input",{type:"text",id:"company-location",class:"form-control",placeholder:"Raum, Pausenhof, ...",onInput:t[5]||(t[5]=e=>o.validateCompanyChange(!1)),value:r.company.location,disabled:!r.isCompanyEditing,required:""},null,40,Se)]),(0,a._)("div",Ae,[Be,(0,a._)("select",{class:"form-select",id:"company-category","aria-label":"Default select example",value:r.company.categories[0],onChange:t[6]||(t[6]=e=>o.validateCompanyChange(!1)),disabled:!r.isCompanyEditing,required:"",color:{isCompanyEditing:"red"}},qe,40,Le)]),(0,a._)("div",Re,[Te,(0,a._)("textarea",{type:"text",id:"company-info",class:"form-control",placeholder:"Beschreibung",required:"",maxlength:"400",style:{resize:"none"},rows:"5",cols:"50",onInput:t[7]||(t[7]=e=>o.validateCompanyChange(!1)),value:r.company.info,disabled:!r.isCompanyEditing},null,40,ze)]),(0,a._)("div",Fe,[(0,a.Wm)(l,{verified:null!=r.company.abo&&""!=r.company.abo,premium:"Business"==r.company.abo,self:"schillerando"==r.company.alias,class:"company-badge"},null,8,["verified","premium","self"]),(0,a._)("p",Ue,(0,ee.zw)(r.company.abo),1)]),null!=r.company.users?((0,a.wg)(),(0,a.iD)("div",Ve,[(0,a.Uk)(" Geschäftsführer: "),(0,a._)("span",Me,(0,ee.zw)(r.company.users.name),1),(0,a.Uk)(" | "),(0,a._)("a",{href:"mailto:"+r.company.users.email},(0,ee.zw)(r.company.users.email),9,Oe)])):(0,a.kq)("",!0),(0,a._)("div",Ze,[(0,a._)("input",{disabled:!r.isCompanyEditing,onClick:t[8]||(t[8]=e=>o.validateCompanyChange(!1)),checked:r.company.verified,class:"form-check-input",type:"checkbox",role:"switch",id:"company-verified"},null,8,Ne),Ke]),(0,a._)("div",Qe,[(0,a._)("input",{disabled:!r.isCompanyEditing,onClick:t[9]||(t[9]=e=>o.validateCompanyChange(!1)),checked:r.company.payed,class:"form-check-input",type:"checkbox",role:"switch",id:"company-payed"},null,8,He),(0,a._)("label",We,"Bezahlt ("+(0,ee.zw)(r.toPay)+" $)",1)])]),r.isCompanyEditing?((0,a.wg)(),(0,a.iD)("div",Ye,[(0,a._)("div",je,[(0,a._)("button",{type:"button",class:"btn btn-primary px-2 mx-2",onClick:t[11]||(t[11]=e=>o.validateCompanyChange(!0))},$e)]),(0,a._)("div",et,[(0,a._)("button",{type:"button",class:"btn btn-warning px-2 mx-2",onClick:t[12]||(t[12]=e=>o.cancelCompanyChange())}," Abbrechen ")])])):((0,a.wg)(),(0,a.iD)("div",Ge,[(0,a._)("button",{type:"button",class:"btn btn-primary px-2 mx-2",onClick:t[10]||(t[10]=e=>o.editCompany())}," Bearbeiten ")]))])])]),(0,a._)("div",tt,[(0,a._)("div",it,[st,(0,a._)("div",at,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.employees,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:e},[(0,a._)("div",rt,[ot,(0,a._)("input",{type:"email",class:"form-control employees-mail",placeholder:"Email","data-regex":"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",value:r.employees[t],disabled:!r.isEmployeesEditing,required:"",onInput:e=>o.validateEmployeesChange(!1,t)},null,40,nt),r.isEmployeesEditing?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"input-group-text",onClick:e=>r.employees.splice(t,1)},dt,8,lt)):(0,a.kq)("",!0)])])))),128)),(0,a._)("div",null,[r.isEmployeesEditing?((0,a.wg)(),(0,a.iD)("div",ht,[this.employees.length<6?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",onClick:t[14]||(t[14]=e=>o.addEmployee()),class:"btn btn-primary my-4",style:{width:"max-content",display:"block"}}," Mitarbeiter hinzufügen ")):(0,a.kq)("",!0),(0,a._)("div",pt,[(0,a._)("div",mt,[(0,a._)("button",{type:"button",class:"btn btn-primary px-2 mx-2",onClick:t[15]||(t[15]=e=>o.validateEmployeesChange(!0,0))},yt)]),(0,a._)("div",ft,[(0,a._)("button",{type:"button",class:"btn btn-warning px-2 mx-2",onClick:t[16]||(t[16]=e=>o.cancelEmployeesChange())}," Abbrechen ")])])])):((0,a.wg)(),(0,a.iD)("div",ut,[(0,a._)("button",{type:"button",class:"btn btn-primary px-2 mx-2",onClick:t[13]||(t[13]=e=>o.editEmployees())}," Bearbeiten ")]))])])])]),(0,a._)("div",_t,[(0,a._)("div",wt,[bt,(0,a._)("div",kt,[(0,a._)("form",Et,[xt,(0,a._)("div",Ct,[Dt,(0,a._)("input",{type:"text",id:"company-instagram",class:"form-control",placeholder:"Instagram Name",onInput:t[17]||(t[17]=e=>o.validateExtrasChange(!1)),value:r.company.socials["instagram"],disabled:!r.isExtrasEditing,required:""},null,40,It)])]),St,r.isExtrasEditing?((0,a.wg)(),(0,a.iD)("p",At,"Wähle möglichst genau den Standort deines Unternehmens per Click auf die Karte aus.")):(0,a.kq)("",!0),null!=r.company?((0,a.wg)(),(0,a.iD)("div",Bt,[(0,a._)("div",Lt,[((0,a.wg)(),(0,a.j4)(c,{onPickCoordinates:t[18]||(t[18]=e=>o.pickCoordinates(e)),data:r.company.coordinates,isExtrasEditing:r.isExtrasEditing,key:r.key,class:"map"},null,8,["data","isExtrasEditing"]))])])):(0,a.kq)("",!0),r.isExtrasEditing?((0,a.wg)(),(0,a.iD)("div",qt,[(0,a._)("div",Rt,[(0,a._)("button",{type:"button",class:"btn btn-primary px-2 mx-2",onClick:t[20]||(t[20]=e=>o.validateExtrasChange(!0))},Ft)]),(0,a._)("div",Ut,[(0,a._)("button",{type:"button",class:"btn btn-warning px-2 mx-2",onClick:t[21]||(t[21]=e=>o.cancelExtrasChange())}," Abbrechen ")])])):((0,a.wg)(),(0,a.iD)("div",Pt,[(0,a._)("button",{type:"button",class:"btn btn-primary px-2 mx-2",onClick:t[19]||(t[19]=e=>o.editExtras())}," Bearbeiten ")]))])])])])])):1==this.page?((0,a.wg)(),(0,a.j4)(d,{key:1,companyData:r.company},null,8,["companyData"])):2==this.page?((0,a.wg)(),(0,a.j4)(u,{key:2,companyData:r.company},null,8,["companyData"])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)}i(7658);var Mt=i(9802);const Ot="https://jwfyrkfpqfkzovzdpkqt.supabase.co",Zt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp3Znlya2ZwcWZrem92emRwa3F0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2NzkyNDg4MjcsImV4cCI6MTk5NDgyNDgyN30.ECsAuWRN08LWBqJZqa4v3Qmnx03N8wkGrTRgVMotCS8",Nt=(0,Mt.eI)(Ot,Zt);var Kt=i(2262);const Qt=e=>((0,a.dD)("data-v-3308bef8"),e=e(),(0,a.Cn)(),e),Ht={class:"modal fade",id:"alertModal",tabindex:"-1","aria-labelledby":"alertPopupLabel","aria-hidden":"true"},Wt={class:"modal-dialog"},Gt={class:"modal-content"},Yt={class:"modal-header"},jt={class:"modal-title fs-5",id:"alertPopupLabel"},Xt={class:"modal-body"},Jt=Qt((()=>(0,a._)("div",{class:"modal-footer"},[(0,a._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Schließen ")],-1)));function $t(e,t,i,s,r,o){return(0,a.wg)(),(0,a.iD)("div",Ht,[(0,a._)("div",Wt,[(0,a._)("div",Gt,[(0,a._)("div",Yt,[(0,a._)("h1",jt,(0,ee.zw)(i.title),1)]),(0,a._)("div",Xt,[(0,a._)("p",null,(0,ee.zw)(i.info),1)]),Jt])])])}var ei={name:"AlertPopup",data(){return{show:!1}},props:{title:String,info:String}};const ti=(0,I.Z)(ei,[["render",$t],["__scopeId","data-v-3308bef8"]]);var ii=ti;const si=["data-bs-content"],ai={class:"container_row"},ri={key:0,class:"layer2 fa-solid fa-house fa-xs"},oi={key:1,class:"layer2 fa-solid fa-crown fa-xs"},ni={key:2,class:"layer2 fa-solid fa-check fa-sm"};function li(e,t,i,s,r,o){return i.verified||i.premium?((0,a.wg)(),(0,a.iD)("a",{key:0,tabindex:"0",role:"button","data-bs-toggle":"popover","data-bs-trigger":"focus","data-bs-placement":"left","data-bs-content":[i.self?"Das sind wir!":i.premium?"Schillerando Premium-Partner":"Verifizierter Schillerando-Partner"]},[(0,a._)("div",ai,[(0,a._)("i",{class:"layer1 fa-solid fa-certificate fa-xl",style:(0,ee.j5)({color:[i.self?"#00a100":i.premium?"#f6b600":"#3798f0"]})},null,4),i.self?((0,a.wg)(),(0,a.iD)("i",ri)):i.premium?((0,a.wg)(),(0,a.iD)("i",oi)):((0,a.wg)(),(0,a.iD)("i",ni))])],8,si)):(0,a.kq)("",!0)}var ci={name:"CompanyBadge",props:{verified:Boolean,premium:Boolean,self:Boolean},mounted(){Array.from(document.querySelectorAll('a[data-bs-toggle="popover"]')).forEach((e=>new T.Popover(e,{html:!0})))}};const di=(0,I.Z)(ci,[["render",li],["__scopeId","data-v-00898568"]]);var ui=di;const hi=e=>((0,a.dD)("data-v-213490b2"),e=e(),(0,a.Cn)(),e),pi={style:{width:"100vw"}},mi={class:"download"},vi=hi((()=>(0,a._)("p",{class:"download-title"},"Herunterladen",-1))),gi=hi((()=>(0,a._)("p",{style:{"margin-bottom":"20px"}},[(0,a.Uk)(" $ "),(0,a._)("span",{style:{"font-size":"1.3rem"}},"≙"),(0,a.Uk)(" Schilli ")],-1))),yi={class:"row"},fi={class:"col-12 total-numbers"},_i={class:"row table"},wi={class:"col-lg-4 equal"},bi={class:"card"},ki={class:"card-body"},Ei=hi((()=>(0,a._)("h3",null,"Gewinn / Verlust",-1))),xi={class:"euroProfit"},Ci=hi((()=>(0,a._)("a",{id:"tooltip",tabindex:"0","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"mit Einberechnung von Umtauschsteuer"},[(0,a._)("i",{class:"fa-regular fa-circle-question fa-lg"})],-1))),Di={class:"col-lg-4 equal"},Ii={class:"card"},Si={class:"card-body"},Ai=hi((()=>(0,a._)("h3",null,"Einnahmen",-1))),Bi={key:0,class:"euroProfit"},Li={key:1,class:"euroProfit"},Pi={class:"col-lg-4 equal"},qi={class:"card"},Ri={class:"card-body"},Ti=hi((()=>(0,a._)("h3",null,"Ausgaben",-1))),zi={key:0,class:"euroProfit"},Fi={key:1,class:"euroProfit"},Ui=(0,a.uE)('<div class="canvas" data-v-213490b2><div id="total-charts" data-v-213490b2><canvas class="total-chart" data-v-213490b2></canvas></div><div id="type-charts" data-v-213490b2><canvas class="type-chart" data-v-213490b2></canvas></div></div>',1),Vi=[Ui],Mi={class:"col-lg-6"},Oi={key:0,class:"entries"};function Zi(e,t,i,s,r,o){const n=(0,a.up)("EditAccountingEntryOverlay"),l=(0,a.up)("TitleDiv"),c=(0,a.up)("SortableList");return(0,a.wg)(),(0,a.iD)(a.HY,null,[r.newEntry?((0,a.wg)(),(0,a.j4)(n,{key:0,products:r.products,onStopEditingEntry:t[0]||(t[0]=e=>o.stopEditingEntry(e)),onDeleteEntry:t[1]||(t[1]=e=>o.deleteEntry())},null,8,["products"])):(0,a.kq)("",!0),(0,a._)("div",pi,[(0,a.Wm)(l,{title:"Buchhaltung"}),(0,a._)("div",mi,[vi,(0,a._)("button",{class:"btn btn-primary mb-4 download-button",onClick:t[2]||(t[2]=e=>o.downloadCSV())}," CSV (EXCEL) "),(0,a._)("button",{disabled:"",class:"btn btn-primary mb-4 download-button",onClick:t[3]||(t[3]=e=>o.downloadCSV())}," PDF ")]),gi,(0,a._)("button",{class:"btn btn-primary mb-4 add-product",onClick:t[4]||(t[4]=e=>o.addEntry())}," Eintrag hinzufügen "),(0,a._)("div",yi,[(0,a._)("div",fi,[(0,a._)("div",_i,[(0,a._)("div",wi,[(0,a._)("div",bi,[(0,a._)("div",ki,[((0,a.wg)(),(0,a.iD)("div",{key:r.key,class:(0,ee.C_)(["profit",{revenue:r.profit>0,expenses:r.profit<0}])},[Ei,(0,a._)("h1",null,(0,ee.zw)(r.profit)+" $",1),(0,a._)("div",xi,(0,ee.zw)(r.euroProfit)+" €",1),Ci],2))])])]),(0,a._)("div",Di,[(0,a._)("div",Ii,[(0,a._)("div",Si,[((0,a.wg)(),(0,a.iD)("div",{key:r.key,class:"revenue"},[Ai,(0,a._)("h1",null,(0,ee.zw)(r.revenue)+" $",1),0!=r.euroRevenue&&0!=r.schilliRevenue?((0,a.wg)(),(0,a.iD)("div",Bi,(0,ee.zw)(r.euroRevenue)+" € + "+(0,ee.zw)(r.schilliRevenue)+" $",1)):0!=r.euroRevenue?((0,a.wg)(),(0,a.iD)("div",Li,(0,ee.zw)(r.euroRevenue)+" €",1)):(0,a.kq)("",!0)]))])])]),(0,a._)("div",Pi,[(0,a._)("div",qi,[(0,a._)("div",Ri,[((0,a.wg)(),(0,a.iD)("div",{key:r.key,class:"expenses"},[Ti,(0,a._)("h1",null,(0,ee.zw)(r.expenses)+" $",1),0!=r.euroExpenses&&0!=r.schilliExpenses?((0,a.wg)(),(0,a.iD)("div",zi,(0,ee.zw)(r.euroExpenses)+" € + "+(0,ee.zw)(r.schilliExpenses)+" $",1)):0!=r.euroExpenses?((0,a.wg)(),(0,a.iD)("div",Fi,(0,ee.zw)(r.euroExpenses)+" €",1)):(0,a.kq)("",!0)]))])])])])]),(0,a._)("div",{class:(0,ee.C_)([{invisible:0==this.entries.length},"col-lg-6"])},Vi,2),(0,a._)("div",Mi,[r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Oi,[((0,a.wg)(),(0,a.j4)(c,{items:r.entries,products:r.products,key:r.key,element:"AccountingEntryTile",onDeleteEntry:t[5]||(t[5]=e=>o.deleteEntry(e)),onStopEditingEntry:t[6]||(t[6]=e=>o.stopEditingEntry(e))},null,8,["items","products"]))]))])])])],64)}const Ni={id:"title"},Ki={class:"container-fluid"},Qi={class:"title"};function Hi(e,t,i,s,r,o){return(0,a.wg)(),(0,a.iD)("section",Ni,[(0,a._)("div",Ki,[(0,a._)("h1",Qi,(0,ee.zw)(i.title),1)])])}var Wi={name:"TitleDiv",props:{title:String}};const Gi=(0,I.Z)(Wi,[["render",Hi],["__scopeId","data-v-6fed646f"]]);var Yi=Gi;const ji=e=>((0,a.dD)("data-v-8cd172da"),e=e(),(0,a.Cn)(),e),Xi={class:"overlay"},Ji={class:"card"},$i={class:"card-header"},es=ji((()=>(0,a._)("h4",{class:"card-title"},"Eintrag",-1))),ts={class:"card-body scroll mt-4"},is={key:0,class:"details"},ss={class:"day"},as={class:"time"},rs={class:"userName"},os={class:"needs-validation",novalidate:""},ns={class:"input-group mb-3"},ls=ji((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-list"})],-1))),cs=["value"],ds=(0,a.uE)('<option value="" selected data-v-8cd172da>Typ</option><option value="Verkauf+" data-v-8cd172da> Verkauf </option><option value="Einkauf-" data-v-8cd172da>Einkauf</option><option value="Gehalt-" data-v-8cd172da>Gehalt</option><option value="Miete-" data-v-8cd172da>Miete</option><option value="Steuern-" data-v-8cd172da>Steuern</option><option value="Sonstige Einnahme+" data-v-8cd172da> Sonstige Einnahme </option><option value="Sonstige Ausgabe-" data-v-8cd172da>Sonstige Ausgabe</option>',8),us=[ds],hs={key:0,class:"input-group mb-3"},ps=ji((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-box-open"})],-1))),ms=["value"],vs=ji((()=>(0,a._)("option",{value:"",selected:""},"Angebot",-1))),gs=["value"],ys={key:0},fs={key:1,class:"input-group mb-3"},_s=ji((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-bars"})],-1))),ws=["value"],bs=ji((()=>(0,a._)("option",{value:"",selected:""},"Variation",-1))),ks=["value"],Es={key:2,class:"extras"},xs=ji((()=>(0,a._)("p",{class:"extras-header"},"Extras",-1))),Cs={class:"form-check"},Ds=["checked","onInput","value"],Is={class:"form-check-label",for:"flexCheckDefault"},Ss={class:"input-group mb-3"},As=ji((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-bookmark"})],-1))),Bs=["value"],Ls={key:3,class:"input-group mb-3"},Ps=ji((()=>(0,a._)("span",{class:"input-group-text currency-input"},"Währung",-1))),qs={class:"input-group mb-3"},Rs={class:"input-group-text"},Ts=["value"],zs={class:"input-group mb-3"},Fs=ji((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),Us=["value"],Vs={key:1,style:{"font-weight":"300","font-size":"0.9rem"}},Ms=["src"],Os={class:"card-footer"},Zs={key:1,class:"confirm"},Ns=ji((()=>(0,a._)("i",{class:"fa-solid fa-check fa-lg"},null,-1))),Ks=[Ns],Qs=ji((()=>(0,a._)("i",{class:"fa-solid fa-xmark fa-lg"},null,-1))),Hs=[Qs];function Ws(e,t,i,r,o,n){const l=(0,a.up)("AlertPopup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{title:this.alertTitle,info:this.alertInfo},null,8,["title","info"]),(0,a._)("div",Xi,[(0,a._)("div",Ji,[(0,a._)("div",$i,[(0,a._)("div",null,[es,(0,a._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=e=>n.stopEditingEntry())})])]),(0,a._)("div",ts,[""!=o.userName?((0,a.wg)(),(0,a.iD)("div",is,[(0,a._)("span",ss,(0,ee.zw)(o.day),1),(0,a._)("span",as,(0,ee.zw)(o.time),1),(0,a._)("span",rs,(0,ee.zw)(o.userName),1)])):(0,a.kq)("",!0),(0,a._)("form",os,[(0,a._)("div",ns,[ls,(0,a._)("select",{class:"form-select",id:"entry-type","aria-label":"Default select example",value:r.entry.type,onChange:t[1]||(t[1]=e=>n.validateEntry(!1)),required:""},us,40,cs)]),"Verkauf+"==r.entry.type?((0,a.wg)(),(0,a.iD)("div",hs,[ps,(0,a._)("select",{class:"form-select",id:"entry-product","aria-label":"Default select example",value:r.entry.product.id,onChange:t[2]||(t[2]=e=>n.validateEntry(!1,!0))},[vs,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.products,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},[(0,a.Uk)((0,ee.zw)(e.name)+" | ",1),e.has_variations?((0,a.wg)(),(0,a.iD)("span",ys,"ab")):(0,a.kq)("",!0),(0,a.Uk)(" "+(0,ee.zw)(e.price)+" $",1)],8,gs)))),128))],40,ms)])):(0,a.kq)("",!0),"Verkauf+"==r.entry.type&&null!=r.entry.product&&r.entry.product.has_variations?((0,a.wg)(),(0,a.iD)("div",fs,[_s,(0,a._)("select",{class:"form-select",id:"entry-product-variation","aria-label":"Default select example",value:r.entry.variation,onChange:t[3]||(t[3]=e=>n.validateEntry(!1,!1,!0))},[bs,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.entry.product.variations,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,ee.zw)(e.name)+" | "+(0,ee.zw)(e.price)+" $",9,ks)))),128))],40,ws)])):(0,a.kq)("",!0),"Verkauf+"==r.entry.type&&null!=r.entry.product&&r.entry.product.has_extras?((0,a.wg)(),(0,a.iD)("div",Es,[xs,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.entry.product.extras,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"check",key:e.id},[(0,a._)("div",Cs,[(0,a._)("input",{checked:r.entry.extras.includes(e.id),onInput:t=>n.switchExtra(e.id),class:"form-check-input",type:"checkbox",value:r.entry.extras.includes(e.id),id:"flexCheckDefault"},null,40,Ds),(0,a._)("label",Is,(0,ee.zw)(e.name)+" | +"+(0,ee.zw)(e.extra_price)+" $ ",1)])])))),128))])):(0,a.kq)("",!0),(0,a._)("div",Ss,[As,(0,a._)("input",{type:"text",id:"entry-name",class:"form-control",onInput:t[4]||(t[4]=e=>n.validateEntry(!1)),placeholder:"Name",value:r.entry.name,required:""},null,40,Bs)]),"Verkauf+"!=r.entry.type&&"Miete-"!=r.entry.type?((0,a.wg)(),(0,a.iD)("div",Ls,[Ps,(0,a._)("a",{class:(0,ee.C_)([{"btn-primary":!r.entry.currencyIsEuro},"form-control"]),onClick:t[5]||(t[5]=(0,s.iM)((e=>n.changeCurrency(!1)),["prevent"]))}," Schillis ",2),(0,a._)("a",{class:(0,ee.C_)([{"btn-primary":r.entry.currencyIsEuro},"form-control"]),onClick:t[6]||(t[6]=(0,s.iM)((e=>n.changeCurrency(!0)),["prevent"]))}," Euro ",2)])):(0,a.kq)("",!0),(0,a._)("div",qs,[(0,a._)("span",Rs,[r.entry.currencyIsEuro?((0,a.wg)(),(0,a.iD)("i",{key:0,class:(0,ee.C_)(["fa-solid fa-euro-sign",{income:r.entry.type.includes("+"),expense:r.entry.type.includes("-")}])},null,2)):((0,a.wg)(),(0,a.iD)("i",{key:1,class:(0,ee.C_)(["fa-solid fa-dollar-sign",{income:r.entry.type.includes("+"),expense:r.entry.type.includes("-")}])},null,2))]),(0,a._)("input",{type:"number",id:"entry-amount",class:(0,ee.C_)(["form-control",{income:r.entry.type.includes("+"),expense:r.entry.type.includes("-")}]),onInput:t[7]||(t[7]=e=>n.validateEntry(!1)),placeholder:"Betrag",value:0==Math.abs(r.entry.amount)?"":Math.abs(r.entry.amount),required:""},null,42,Ts)]),(0,a._)("div",zs,[Fs,(0,a._)("textarea",{type:"text",id:"entry-info",class:"form-control",onInput:t[8]||(t[8]=e=>n.validateEntry(!1)),placeholder:"Beschreibung",maxlength:"100",style:{resize:"none"},rows:"5",cols:"50",value:r.entry.info},null,40,Us)])]),null==r.entry.image?((0,a.wg)(),(0,a.iD)("p",Vs,"Füge einen Kassenzettel, eine Rechnung oder ähnliches hinzu.")):(0,a.kq)("",!0),null!=r.entry.image?((0,a.wg)(),(0,a.iD)("img",{key:2,src:this.entry.image,alt:"Unternehmen Bild",id:"productImage"},null,8,Ms)):(0,a.kq)("",!0),(0,a._)("input",{class:"form-control form-control-sm col-7",type:"file",id:"formFile",accept:"image/*",onChange:t[9]||(t[9]=e=>n.imageInput())},null,32)]),(0,a._)("div",Os,[(0,a._)("button",{class:"btn btn-primary save-button",onClick:t[10]||(t[10]=e=>n.validateEntry(!0))},"Speichern"),this.delete||""==r.initialEntry.name?this.delete&&""!=r.initialEntry.name?((0,a.wg)(),(0,a.iD)("div",Zs,[(0,a._)("button",{class:"btn btn-primary confirm-button",onClick:t[12]||(t[12]=e=>n.deleteEntry())},Ks),(0,a._)("button",{class:"btn btn-danger confirm-button",onClick:t[13]||(t[13]=e=>this.delete=!1)},Hs)])):(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-danger delete-button",onClick:t[11]||(t[11]=e=>this.delete=!0)},"Löschen"))])])])],64)}var Gs=i(7632);function Ys(e){if(null==e)return null;const t=e.split("-");return 3!=t.length?"":`${t[2]}.${t[1]}.${t[0]}`}function js(e){if(null==e)return e;const t=e.split(":");return t.length<3?"":`${t[0]}:${t[1]}`}function Xs(e,t){if(null==e||null==t)return 1e5;var i=60*parseInt(e.split(":")[0])+parseInt(e.split(":")[1]),s=60*parseInt(t.split(":")[0])+parseInt(t.split(":")[1]);return s-i}var Js={name:"EditEntryOverlay",props:["data","edit","products"],components:{AlertPopup:ii},emits:["stopEditingEntry","deleteEntry"],data(){return{continuePressed:!1,alertTitle:"",alertInfo:"",successAlertTitle:"Erfolgreich",successAlertInfo:"Aktion wurde erfolgreich durchgeführt",failureAlertTitle:"Fehler",failureAlertInfo:"Es ist ein Fehler aufgetreten!",delete:!1,day:"",time:"",userName:""}},setup(){var e=(0,Kt.qj)({id:null,name:"",type:"",info:"",amount:"",product:null,created_at:"",imageBefore:null,image:null,bill_picture:"",currencyIsEuro:!1,variation:"",extras:[]}),t=(0,Kt.qj)({id:null,name:"",type:"",info:"",amount:"",product:null,created_at:"",imageBefore:null,image:null,bill_picture:"",currencyIsEuro:!1,variation:"",extras:[]}),i=(0,Kt.qj)({id:null,name:"",info:"",categories:[],price:"",delivery:!0,public:!0,product_picture:"",has_variations:!1,has_extras:!1,variations:[],extras:[]});const s=(0,H.oR)();return{store:s,entry:e,initialEntry:t,product:i}},mounted(){if(null!=this.data){this.entry.id=this.data.id,this.entry.name=this.data.name,this.entry.type=this.data.type,this.entry.info=this.data.info,this.entry.amount=this.data.amount,this.entry.currencyIsEuro=this.data.currencyIsEuro,this.entry.variation=this.data.variation,this.entry.extras=this.data.extras,console.log(this.data.extras),this.day=Ys(this.data.created_at.split("T")[0]),this.time=js(this.data.created_at.split("T")[1]);var e=this.products.findIndex((e=>e.id==this.data.product));this.entry.product=-1!=e?this.products[e]:this.product,this.entry.imageBefore=this.data.image,this.entry.image=this.data.image,this.entry.bill_picture=this.data.bill_picture,this.initialEntry.id=this.data.id,this.initialEntry.name=this.data.name,this.initialEntry.type=this.data.type,this.initialEntry.info=this.data.info,this.initialEntry.amount=this.data.amount,this.initialEntry.currencyIsEuro=this.data.currencyIsEuro,this.initialEntry.variation=this.data.variation,this.initialEntry.extras=this.data.extras,this.initialEntry.product=-1!=e?this.products[e]:this.product,this.initialEntry.imageBefore=this.data.image,this.initialEntry.image=this.data.image,this.initialEntry.bill_picture=this.data.bill_picture}else this.entry.id=(0,Gs.Z)(),this.initialEntry.id=this.entry.id,this.entry.product=this.product,this.initialEntry.product=this.product;console.log(this.entry)},computed:{...(0,H.Se)(["getState"])},watch:{getState(e){var t=document.getElementsByClassName("spinner"),i=document.getElementsByClassName("loading-button");if("loading"==e)Array.from(t).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),Array.from(i).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"}));else if("success"==e)Array.from(t).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"})),Array.from(i).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),this.alertTitle=this.successAlertTitle,this.alertInfo=this.successAlertInfo,""!=this.alertTitle&&(s=new T.Modal(document.getElementById("alertModal"),{}),s.show()),this.stopEditingEntry();else if(Array.from(t).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"})),Array.from(i).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),this.alertTitle=this.failureAlertTitle,this.alertInfo=this.failureAlertInfo,""!=this.alertTitle){var s=new T.Modal(document.getElementById("alertModal"),{});s.show()}}},methods:{async stopEditingEntry(){const e=this.store.getters.getCurrentEntry;if(this.store.commit("setCurrentEntry",null),null!=e){if(this.entry.id=e.id,this.entry.name=e.name,this.entry.type=e.type,this.entry.info=e.info,this.entry.amount=e.amount,this.entry.product=e.product,this.entry.bill_picture=e.bill_picture,this.entry.currencyIsEuro=e.currencyIsEuro,this.entry.created_at=e.created_at,this.entry.userName=e.userName,null!=e.bill_picture){const t=await Nt.storage.from("bill-pictures/"+this.store.getters.getUserCompany.id).download(e.bill_picture);null!=t.data&&(this.entry.image=await t.data.text(),this.entry.initialImage=this.entry.image),t.error&&console.warn(t.error)}}else this.entry=null;this.$emit("stopEditingEntry",this.entry)},deleteEntry(){this.$emit("deleteEntry",this.entry)},imageInput(){var e=document.getElementById("formFile");if(e.files&&e.files[0]){var t=new FileReader;t.onload=e=>{this.entry.image=e.target.result},t.readAsDataURL(e.files[0])}},changeCurrency(e){this.entry.currencyIsEuro=e,this.entry.amount=0},switchExtra(e){var t=this.entry.product.extras.findIndex((t=>t.id==e));this.entry.extras.includes(e)?(this.entry.extras=this.entry.extras.filter((t=>t!=e)),this.entry.amount-=this.entry.product.extras[t].extra_price):(this.entry.extras.push(e),this.entry.amount+=this.entry.product.extras[t].extra_price)},async validateEntry(e,t,i){var s=document.getElementById("entry-name"),a=document.getElementById("entry-type"),r=document.getElementById("entry-amount"),o=document.getElementById("entry-info"),n=document.getElementById("entry-product-variation");if("Verkauf+"==this.entry.type){var l=document.getElementById("entry-product"),c=this.products.find((e=>e.id==l.value));if(this.entry.product=null!=c?c:this.product,t&&null!=this.entry.product.id&&""!=l.value&&null!=l.value?(this.entry.name=this.entry.product.name,this.entry.amount=this.entry.product.price,this.entry.variation="",this.entry.extras=[]):(this.entry.name=s.value,this.entry.amount=r.value),i&&(this.entry.variation=n.value,""!=n.value)){var d=this.entry.product.variations.find((e=>e.id==n.value));this.entry.name=this.entry.product.name+" "+d.name,this.entry.amount=d.price,this.entry.extras.forEach((e=>{var t=this.entry.product.extras.findIndex((t=>t.id==e));this.entry.amount+=this.entry.product.extras[t].extra_price}))}}else this.entry.name=s.value,this.entry.amount=r.value;if(this.entry.type=a.value,this.entry.info=o.value,e||this.continuePressed){e&&(s.value=s.value.trim()),e&&(o.value=o.value.trim());var u=!0;e&&0!=this.entry.amount&&(this.entry.currencyIsEuro?(this.entry.amount=parseFloat(this.entry.amount).toFixed(2).toString(),r.value=this.entry.amount):(this.entry.amount=parseFloat(this.entry.amount).toFixed(0).toString(),r.value=this.entry.amount)),s.value.trim().length<3?(s.classList.remove("is-valid"),s.classList.add("is-invalid"),u=!1):(s.classList.remove("is-invalid"),s.classList.add("is-valid")),r.value<-9999||r.value>9999?(r.classList.remove("is-valid"),r.classList.add("is-invalid"),u=!1):(r.classList.remove("is-invalid"),r.classList.add("is-valid")),""==a.value?(a.classList.remove("is-valid"),a.classList.add("is-invalid"),u=!1):(a.classList.remove("is-invalid"),a.classList.add("is-valid")),"Verkauf+"==this.entry.type&&null!=this.entry.product&&this.entry.product.has_variations&&(""==this.entry.variation?(n.classList.remove("is-valid"),n.classList.add("is-invalid"),u=!1):(n.classList.remove("is-invalid"),n.classList.add("is-valid"))),this.continuePressed=!0,u&&e&&(this.initialEntry==this.entry?this.stopEditingEntry():(this.failureAlertTitle="Fehler",this.failureAlertInfo="Beim Aktualisieren des Eintrags ist ein Fehler aufgetreten. Versuche es später erneut.",this.successAlertTitle="",""==this.initialEntry.name?this.store.dispatch("addEntry",this.entry):this.store.dispatch("updateEntry",this.entry)))}}}};const $s=(0,I.Z)(Js,[["render",Ws],["__scopeId","data-v-8cd172da"]]);var ea=$s;const ta=e=>((0,a.dD)("data-v-65317515"),e=e(),(0,a.Cn)(),e),ia={key:0,class:"search-comp col-12 col-md-6 col-xl-4"},sa={key:0,class:"alias-wrapper"},aa={class:"alias-suggestions"},ra={class:"btn btn-light alias-link"},oa=ta((()=>(0,a._)("i",{class:"fa-solid fa-arrow-right"},null,-1))),na={class:"settings"},la={key:0,class:"fa-solid fa-arrow-down fa-lg"},ca={key:1,class:"fa-solid fa-arrow-up fa-lg"},da=(0,a.uE)('<option value="" selected data-v-65317515>Typ</option><option value="Einnahmen" data-v-65317515> Alle Einnahmen </option><option value="Ausgaben" data-v-65317515> Alle Ausgaben </option><option value="Verkauf+" data-v-65317515> Verkauf </option><option value="Einkauf-" data-v-65317515>Einkauf</option><option value="Gehalt-" data-v-65317515>Gehalt</option><option value="Miete-" data-v-65317515>Miete</option><option value="Steuern-" data-v-65317515>Steuern</option><option value="Sonstige Einnahme+" data-v-65317515> Sonstige Einnahmen </option><option value="Sonstige Ausgabe-" data-v-65317515>Sonstige Ausgaben</option>',10),ua=[da],ha=(0,a.uE)('<option value="" selected data-v-65317515>Kategorie</option><option value="Essen" data-v-65317515>Essen</option><option value="Trinken" data-v-65317515>Trinken</option><option value="Dienstleistung" data-v-65317515>Dienstleistung</option><option value="Gegenstand" data-v-65317515>Gegenstand</option><option value="Aktivität" data-v-65317515>Aktivität</option><option value="Event" data-v-65317515>Event</option><option value="Sonstiges" data-v-65317515>Sonstiges</option>',8),pa=[ha],ma=(0,a.uE)('<option value="created_at" selected data-v-65317515>Sortieren</option><option value="amount" data-v-65317515>Betrag</option><option value="created_at" data-v-65317515>Datum</option><option value="category" data-v-65317515>Typ</option><option value="name" data-v-65317515>Name</option>',5),va=[ma],ga=(0,a.uE)('<option value="relevance" selected data-v-65317515>Sortieren</option><option value="price" data-v-65317515>Preis</option><option value="review" data-v-65317515>Bewertung</option><option value="category" data-v-65317515>Kategorie</option><option value="name" data-v-65317515>Name</option>',5),ya=[ga],fa={key:0,style:{"margin-bottom":"50px"}},_a={key:0,class:"empty"},wa={key:1,class:"empty"};function ba(e,t,i,r,o,n){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,ee.C_)(["row",{noSearch:i.noSearch,"no-margin":"AccountingEntryTile"==i.element}])},[(0,a._)("div",{class:(0,ee.C_)({"col-md-3 col-xl-4":"ProductTile"==i.element,"col-md-2":"AccountingEntryTile"==i.element})},null,2),i.noSearch?((0,a.wg)(),(0,a.iD)("div",ia)):((0,a.wg)(),(0,a.iD)("div",{key:1,class:(0,ee.C_)({"col-12 col-md-6 col-xl-4":"ProductTile"==i.element,"col-md-8":"AccountingEntryTile"==i.element})},[(0,a.wy)((0,a._)("input",{class:"search form-control form-control-lg me-2",type:"search",placeholder:"Suchen...","aria-label":"Suchen...","on-":"",onFocus:t[0]||(t[0]=e=>o.focus=!0),onFocusout:t[1]||(t[1]=e=>n.removeFocus()),"onUpdate:modelValue":t[2]||(t[2]=e=>o.searchString=e)},null,544),[[s.nr,o.searchString]]),this.directLinks.length>0&&this.focus?((0,a.wg)(),(0,a.iD)("div",sa,[(0,a._)("div",aa,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.directLinks,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,style:{display:"block"}},[(0,a.Wm)(l,{to:e.alias},{default:(0,a.w5)((()=>[(0,a._)("button",ra,[(0,a.Uk)((0,ee.zw)(e.alias)+" ",1),oa])])),_:2},1032,["to"])])))),128))])])):(0,a.kq)("",!0)],2)),(0,a._)("div",{class:(0,ee.C_)({"col-md-3 col-xl-4":"ProductTile"==i.element,"col-md-2":"AccountingEntryTile"==i.element})},null,2),(0,a._)("div",{class:(0,ee.C_)({"col-md-3 col-xl-4":"ProductTile"==i.element,"col-md-2":"AccountingEntryTile"==i.element})},null,2),(0,a._)("div",{class:(0,ee.C_)({"col-12 col-md-6 col-xl-4":"ProductTile"==i.element,"col-md-8":"AccountingEntryTile"==i.element})},[(0,a._)("div",na,[(0,a._)("button",{class:"direction btn btn-outline-secondary",onClick:t[3]||(t[3]=e=>["up"==o.dir?o.dir="down":o.dir="up"])},["up"==o.dir?((0,a.wg)(),(0,a.iD)("i",la)):((0,a.wg)(),(0,a.iD)("i",ca))]),"AccountingEntryTile"==i.element?((0,a.wg)(),(0,a.iD)("select",{key:0,onChange:t[4]||(t[4]=(...e)=>n.entryCategoryChange&&n.entryCategoryChange(...e)),id:"entryCategory",class:"form-select form-select-md mb-3","aria-label":".form-select-lg example"},ua,32)):((0,a.wg)(),(0,a.iD)("select",{key:1,onChange:t[5]||(t[5]=(...e)=>n.productCategoryChange&&n.productCategoryChange(...e)),id:"productCategory",class:"form-select form-select-md mb-3","aria-label":".form-select-lg example"},pa,32)),"AccountingEntryTile"==i.element?((0,a.wg)(),(0,a.iD)("select",{key:2,onChange:t[6]||(t[6]=(...e)=>n.entrySortChange&&n.entrySortChange(...e)),id:"entrySort",class:"form-select form-select-right form-select-md mb-3","aria-label":".form-select-lg example"},va,32)):((0,a.wg)(),(0,a.iD)("select",{key:3,onChange:t[7]||(t[7]=(...e)=>n.productSortChange&&n.productSortChange(...e)),id:"productSort",class:"form-select form-select-right form-select-md mb-3","aria-label":".form-select-lg example"},ya,32))])],2)],2),(0,a._)("div",{class:(0,ee.C_)({"product-list":"ProductTile"==i.element,"entry-list":"AccountingEntryTile"==i.element}),ref:"sortableList"},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.sortedShownItems,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},["ProductTile"==i.element?((0,a.wg)(),(0,a.j4)((0,a.LL)(i.element),{key:0,data:e,onDeleteProduct:t[8]||(t[8]=e=>n.deleteProduct(e))},null,40,["data"])):((0,a.wg)(),(0,a.j4)((0,a.LL)(i.element),{data:e,products:i.products,key:e.id,companyData:i.companyData,onDeleteEntry:t[9]||(t[9]=e=>n.deleteEntry(e)),onStopEditingEntry:t[10]||(t[10]=e=>n.stopEditingEntry(e))},null,40,["data","products","companyData"]))])))),128)),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a._)("div",{key:e,class:"item"}))),64))],2),0!=o.shownItems.length||i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",fa,["AccountingEntryTile"==i.element?((0,a.wg)(),(0,a.iD)("h4",_a," Es wurden keine Einträge gefunden ")):((0,a.wg)(),(0,a.iD)("h4",wa,"Es wurden keine Angebote gefunden"))]))],64)}const ka=e=>((0,a.dD)("data-v-7b5fcadd"),e=e(),(0,a.Cn)(),e),Ea={class:"card"},xa={class:"image"},Ca={key:0,class:"no-image"},Da=ka((()=>(0,a._)("i",{class:"fa-solid fa-image fa-2xl"},null,-1))),Ia=[Da],Sa=["src"],Aa={class:"info"},Ba={class:"row"},La={class:"col col-9"},Pa={class:"name"},qa={class:"category"},Ra={class:"col col-3"},Ta=ka((()=>(0,a._)("i",{class:"fa-solid fa-pen-to-square fa-lg"},null,-1))),za=[Ta],Fa={class:"description"},Ua={class:"price"},Va={class:"settings"},Ma={key:0,class:"fa-solid fa-truck fa-lg"},Oa={key:1,class:"fa-solid fa-lock fa-lg"};function Za(e,t,i,s,r,o){const n=(0,a.up)("EditProductOverlay");return(0,a.wg)(),(0,a.iD)(a.HY,null,[r.edit?((0,a.wg)(),(0,a.j4)(n,{key:0,registration:i.registration,data:s.product,onStopEditingProduct:t[0]||(t[0]=e=>o.stopEditingProduct(e)),onDeleteProduct:t[1]||(t[1]=e=>o.deleteProduct(e))},null,8,["registration","data"])):(0,a.kq)("",!0),(0,a._)("div",Ea,[(0,a._)("div",xa,[null==this.picture?((0,a.wg)(),(0,a.iD)("div",Ca,Ia)):((0,a.wg)(),(0,a.iD)("img",{key:1,src:this.picture,alt:""},null,8,Sa))]),(0,a._)("div",Aa,[(0,a._)("div",Ba,[(0,a._)("div",La,[(0,a._)("p",Pa,(0,ee.zw)(s.product.name),1),(0,a._)("p",qa,(0,ee.zw)(s.product.categories[0]),1)]),(0,a._)("div",Ra,[(0,a._)("button",{onClick:t[2]||(t[2]=e=>r.edit=!0),class:"btn btn-primary"},za)])]),(0,a._)("p",Fa,(0,ee.zw)(s.product.info),1),(0,a._)("p",Ua,(0,ee.zw)(s.product.price)+" $",1),(0,a._)("div",Va,[s.product.delivery?((0,a.wg)(),(0,a.iD)("i",Ma)):(0,a.kq)("",!0),s.product.public?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("i",Oa))])])])],64)}const Na=e=>((0,a.dD)("data-v-0894d9e9"),e=e(),(0,a.Cn)(),e),Ka={class:"overlay"},Qa={class:"card"},Ha={class:"card-header"},Wa=Na((()=>(0,a._)("h4",{class:"card-title"},"Angebot",-1))),Ga={class:"card-body scroll"},Ya={class:"image"},ja={key:0,class:"no-image"},Xa=Na((()=>(0,a._)("i",{class:"fa-solid fa-image fa-2xl"},null,-1))),Ja=[Xa],$a=["src"],er={key:0,style:{"font-weight":"300","font-size":"0.9rem"}},tr={class:"needs-validation",novalidate:""},ir={class:"input-group mb-3"},sr=Na((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-box-open"})],-1))),ar=["value"],rr={class:"input-group mb-3"},or=Na((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-list"})],-1))),nr=["value"],lr=(0,a.uE)('<option value="" selected data-v-0894d9e9>Kategorie</option><option value="Essen" data-v-0894d9e9>Essen</option><option value="Trinken" data-v-0894d9e9>Trinken</option><option value="Dienstleistung" data-v-0894d9e9>Dienstleistung</option><option value="Gegenstand" data-v-0894d9e9>Gegenstand</option><option value="Aktivität" data-v-0894d9e9> Aktivität </option><option value="Event" data-v-0894d9e9> Event </option><option value="Sonstiges" data-v-0894d9e9> Sonstiges </option>',8),cr=[lr],dr={class:"input-group mb-3"},ur=Na((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),hr=["value"],pr={key:0,class:"input-group mb-3"},mr=Na((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-dollar-sign"})],-1))),vr=["value"],gr={class:"variations"},yr={class:"add-variations"},fr=Na((()=>(0,a._)("p",{class:"header"},"Variationen",-1))),_r=Na((()=>(0,a._)("i",{class:"fa-solid fa-plus"},null,-1))),wr=[_r],br=Na((()=>(0,a._)("p",{class:"info"},"Zum Beispiel verschiedene Größen, von denen man eine auswählen kann.",-1))),kr={key:0,class:"variations-list"},Er={class:"input-group mb-1"},xr=["onInput","value"],Cr=Na((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-dollar-sign"})],-1))),Dr=["onInput","value"],Ir=["onClick"],Sr=Na((()=>(0,a._)("i",{class:"fa-solid fa-trash"},null,-1))),Ar=[Sr],Br={class:"extras mt-4"},Lr={class:"add-extras"},Pr=Na((()=>(0,a._)("p",{class:"header"},"Extras",-1))),qr=Na((()=>(0,a._)("i",{class:"fa-solid fa-plus"},null,-1))),Rr=[qr],Tr=Na((()=>(0,a._)("p",{class:"info"},"Zum Beispiel verschiedene Toppings oder Soßen, die man zusätzlich wählen kann. Der Aufpreis kommt bei Wahl zum eigentlichen Preis hinzu.",-1))),zr={key:0,class:"extras-list"},Fr={class:"input-group mb-1"},Ur=["onInput","value"],Vr=Na((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-dollar-sign"})],-1))),Mr=["onInput","value"],Or=["onClick"],Zr=Na((()=>(0,a._)("i",{class:"fa-solid fa-trash"},null,-1))),Nr=[Zr],Kr={class:"switches"},Qr={class:"form-check form-switch"},Hr=["checked"],Wr=Na((()=>(0,a._)("label",{class:"form-check-label",for:"flexSwitchCheckChecked"},"Lieferbar",-1))),Gr={class:"form-check form-switch"},Yr=["checked"],jr=Na((()=>(0,a._)("label",{class:"form-check-label",for:"flexSwitchCheckDefault"},"Privat (nur für Buchhaltung)",-1))),Xr={class:"card-footer"},Jr={key:1,class:"confirm"},$r=Na((()=>(0,a._)("i",{class:"fa-solid fa-check fa-lg"},null,-1))),eo=[$r],to=Na((()=>(0,a._)("i",{class:"fa-solid fa-xmark fa-lg"},null,-1))),io=[to];function so(e,t,i,r,o,n){const l=(0,a.up)("AlertPopup");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(l,{title:this.alertTitle,info:this.alertInfo},null,8,["title","info"]),(0,a._)("div",Ka,[(0,a._)("div",Qa,[(0,a._)("div",Ha,[(0,a._)("div",null,[Wa,(0,a._)("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:t[0]||(t[0]=e=>n.stopEditingProduct())})])]),(0,a._)("div",Ga,[(0,a._)("div",Ya,[null==r.product.image?((0,a.wg)(),(0,a.iD)("div",ja,Ja)):((0,a.wg)(),(0,a.iD)("img",{key:1,src:this.product.image,alt:"Unternehmen Bild",id:"productImage"},null,8,$a))]),(0,a._)("input",{class:"form-control form-control-sm col-7",type:"file",id:"formFile",accept:"image/*",onChange:t[1]||(t[1]=e=>n.imageInput())},null,32),null==r.product.image?((0,a.wg)(),(0,a.iD)("p",er,"Füge ein Bild hinzu, welches dein Angebot repräsentiert. (Optimales Format 1:1)")):(0,a.kq)("",!0),(0,a._)("form",tr,[(0,a._)("div",ir,[sr,(0,a._)("input",{type:"text",id:"product-name",class:"form-control",onInput:t[2]||(t[2]=e=>n.validateProduct(!1)),placeholder:"Name",value:r.product.name,required:""},null,40,ar)]),(0,a._)("div",rr,[or,(0,a._)("select",{class:"form-select",id:"product-category","aria-label":"Default select example",value:r.product.categories[0],onChange:t[3]||(t[3]=e=>n.validateProduct(!1))},cr,40,nr)]),(0,a._)("div",dr,[ur,(0,a._)("textarea",{type:"text",id:"product-info",class:"form-control",onInput:t[4]||(t[4]=e=>n.validateProduct(!1)),placeholder:"Beschreibung",required:"",maxlength:"200",style:{resize:"none"},rows:"5",cols:"50",value:r.product.info},null,40,hr)]),void 0==r.product.variations||0==r.product.variations.length?((0,a.wg)(),(0,a.iD)("div",pr,[mr,(0,a._)("input",{type:"number",id:"product-price",class:"form-control",onInput:t[5]||(t[5]=e=>n.validateProduct(!1)),placeholder:"Preis",value:r.product.price,required:""},null,40,vr)])):(0,a.kq)("",!0),(0,a._)("div",gr,[(0,a._)("div",yr,[fr,(0,a._)("button",{class:"btn btn-primary add-button",onClick:t[6]||(t[6]=(0,s.iM)((e=>n.addVariation()),["prevent"]))},wr),br]),void 0!=r.product.variations&&r.product.variations.length>0?((0,a.wg)(),(0,a.iD)("div",kr,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.product.variations,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("div",Er,[(0,a._)("input",{onInput:t=>n.editVariationName(e.id),type:"text",class:"form-control variation-name",placeholder:"Variation","aria-label":"Variation",value:e.name},null,40,xr),Cr,(0,a._)("input",{onInput:t=>n.editVariationPrice(e.id),type:"number",class:"form-control variation-price",placeholder:"Preis","aria-label":"Preis",value:e.price},null,40,Dr),(0,a._)("button",{class:"form-control trash",onClick:(0,s.iM)((t=>n.removeVariation(e.id)),["prevent"])},Ar,8,Ir)])])))),128))])):(0,a.kq)("",!0)]),(0,a._)("div",Br,[(0,a._)("div",Lr,[Pr,(0,a._)("button",{class:"btn btn-primary add-button",onClick:t[7]||(t[7]=(0,s.iM)((e=>n.addExtra()),["prevent"]))},Rr),Tr]),void 0!=r.product.extras&&r.product.extras.length>0?((0,a.wg)(),(0,a.iD)("div",zr,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.product.extras,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("div",Fr,[(0,a._)("input",{onInput:t=>n.editExtraName(e.id),type:"text",class:"form-control extra-name",placeholder:"Extra","aria-label":"Variation",value:e.name},null,40,Ur),Vr,(0,a._)("input",{onInput:t=>n.editExtraPrice(e.id),type:"number",class:"form-control extra-price",placeholder:"Aufpreis","aria-label":"Aufpreis",value:e.extra_price},null,40,Mr),(0,a._)("button",{class:"form-control trash",onClick:(0,s.iM)((t=>n.removeExtra(e.id)),["prevent"])},Nr,8,Or)])])))),128))])):(0,a.kq)("",!0)]),(0,a._)("div",Kr,[(0,a._)("div",Qr,[(0,a._)("input",{onClick:t[8]||(t[8]=(...e)=>n.switchDelivery&&n.switchDelivery(...e)),checked:r.product.delivery,class:"form-check-input",type:"checkbox",role:"switch",id:"deliverySwitch"},null,8,Hr),Wr]),(0,a._)("div",Gr,[(0,a._)("input",{onClick:t[9]||(t[9]=(...e)=>n.switchPrivate&&n.switchPrivate(...e)),checked:!r.product.public,class:"form-check-input",type:"checkbox",role:"switch",id:"privateSwitch"},null,8,Yr),jr])])])]),(0,a._)("div",Xr,[(0,a._)("button",{class:"btn btn-primary save-button",onClick:t[10]||(t[10]=e=>n.validateProduct(!0))},"Speichern"),this.delete||""==r.initialProduct.name?this.delete&&""!=r.initialProduct.name?((0,a.wg)(),(0,a.iD)("div",Jr,[(0,a._)("button",{class:"btn btn-primary confirm-button",onClick:t[12]||(t[12]=e=>n.deleteProduct())},eo),(0,a._)("button",{class:"btn btn-danger confirm-button",onClick:t[13]||(t[13]=e=>this.delete=!1)},io)])):(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-danger delete-button",onClick:t[11]||(t[11]=e=>this.delete=!0)},"Löschen"))])])])],64)}var ao={name:"EditProductOverlay",props:["data","edit","registration"],components:{AlertPopup:ii},emits:["stopEditingProduct","deleteProduct"],data(){return{continuePressed:!1,alertTitle:"",alertInfo:"",successAlertTitle:"Erfolgreich",successAlertInfo:"Aktion wurde erfolgreich durchgeführt",failureAlertTitle:"Fehler",failureAlertInfo:"Es ist ein Fehler aufgetreten!",delete:!1}},setup(){var e=(0,Kt.qj)({id:null,name:"",info:"",categories:[],price:"",imageBefore:null,image:null,delivery:!0,public:!0,product_picture:"",variations:[],extras:[],has_variations:!1,has_extras:!1}),t=(0,Kt.qj)({id:null,name:"",info:"",categories:[],price:"",imageBefore:null,image:null,delivery:!0,public:!0,product_picture:"",variations:[],extras:[],has_variations:!1,has_extras:!1});const i=(0,H.oR)();return{store:i,product:e,initialProduct:t}},mounted(){null!=this.data?(this.product.id=this.data.id,this.product.name=this.data.name,this.product.categories=this.data.categories,this.product.info=this.data.info,this.product.price=this.data.price,this.product.imageBefore=this.data.image,this.product.image=this.data.image,this.product.delivery=this.data.delivery,this.product.public=this.data.public,this.product.product_picture=this.data.product_picture,this.product.variations=this.data.variations,this.product.extras=this.data.extras,this.product.has_variations=this.data.has_variations,this.product.has_extras=this.data.has_extras,this.initialProduct.id=this.data.id,this.initialProduct.name=this.data.name,this.initialProduct.categories=this.data.categories,this.initialProduct.info=this.data.info,this.initialProduct.price=this.data.price,this.initialProduct.imageBefore=this.data.image,this.initialProduct.image=this.data.image,this.initialProduct.delivery=this.data.delivery,this.initialProduct.public=this.data.public,this.initialProduct.product_picture=this.data.product_picture,this.initialProduct.variations=this.data.variations,this.initialProduct.extras=this.data.extras,this.initialProduct.has_variations=this.data.has_variations,this.initialProduct.has_extras=this.data.has_extras):(this.product.id=(0,Gs.Z)(),this.initialProduct.id=this.product.id)},computed:{...(0,H.Se)(["getState"])},watch:{getState(e){var t=document.getElementsByClassName("spinner"),i=document.getElementsByClassName("loading-button");if("loading"==e)Array.from(t).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),Array.from(i).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"}));else if("success"==e)Array.from(t).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"})),Array.from(i).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),this.alertTitle=this.successAlertTitle,this.alertInfo=this.successAlertInfo,""!=this.alertTitle&&(s=new T.Modal(document.getElementById("alertModal"),{}),s.show()),this.stopEditingProduct();else if(Array.from(t).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"})),Array.from(i).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),this.alertTitle=this.failureAlertTitle,this.alertInfo=this.failureAlertInfo,""!=this.alertTitle){var s=new T.Modal(document.getElementById("alertModal"),{});s.show()}}},methods:{async stopEditingProduct(){if(console.log("test"),!this.registration){const e=this.store.getters.getCurrentProduct;if(this.store.commit("setCurrentProduct",null),null!=e){if(this.product.id=e.id,this.product.name=e.name,this.product.categories=e.categories,this.product.info=e.info,this.product.price=e.price,this.product.delivery=e.delivery,this.product.public=e.public,this.product.product_picture=e.product_picture,this.product.variations=e.variations,this.product.extras=e.extras,this.product.has_variations=e.has_variations,this.product.has_extras=e.has_extras,null!=e.product_picture){const t=await Nt.storage.from("public/products-pictures").download(e.product_picture);null!=t.data&&(this.product.image=await t.data.text(),this.product.initialImage=this.product.image),t.error&&console.warn(t.error)}}else this.product=null}this.$emit("stopEditingProduct",this.product)},switchDelivery(){this.product.delivery=!this.product.delivery,this.product.public=!!this.product.delivery||this.product.public},switchPrivate(){this.product.public=!this.product.public,this.product.delivery=!!this.product.public&&this.product.delivery},deleteProduct(){this.$emit("deleteProduct",this.product)},addVariation(){void 0==this.product.variations&&(this.product.variations=[]),this.product.variations.push({id:this.product.variations.length,name:"",price:null,new:!0})},editVariationName(e){var t=this.product.variations.findIndex((t=>t.id==e)),i=document.getElementsByClassName("variation-name");this.product.variations[t].name=i[t].value,this.continuePressed&&(this.product.variations[t].name.length<1||this.product.variations[t].name.length>30?(i[t].classList.remove("is-valid"),i[t].classList.add("is-invalid")):(i[t].classList.add("is-valid"),i[t].classList.remove("is-invalid")))},editVariationPrice(e){var t=this.product.variations.findIndex((t=>t.id==e)),i=document.getElementsByClassName("variation-price");this.product.variations[t].price=i[t].value,this.continuePressed&&(null==this.product.variations[t].price||this.product.variations[t].price<0||this.product.variations[t].price>9999?(i[t].classList.remove("is-valid"),i[t].classList.add("is-invalid")):(i[t].classList.add("is-valid"),i[t].classList.remove("is-invalid")))},removeVariation(e){this.product.variations=this.product.variations.filter((t=>t.id!=e))},addExtra(){void 0==this.product.extras&&(this.product.extras=[]),this.product.extras.push({id:this.product.extras.length,name:"",extra_price:null,new:!0})},editExtraName(e){var t=this.product.extras.findIndex((t=>t.id==e)),i=document.getElementsByClassName("extra-name");this.product.extras[t].name=i[t].value,this.continuePressed&&(this.product.extras[t].name.length<1||this.product.extras[t].name.length>30?(i[t].classList.remove("is-valid"),i[t].classList.add("is-invalid")):(i[t].classList.add("is-valid"),i[t].classList.remove("is-invalid")))},editExtraPrice(e){var t=this.product.extras.findIndex((t=>t.id==e)),i=document.getElementsByClassName("extra-price");this.product.extras[t].extra_price=i[t].value,this.continuePressed&&(null==this.product.extras[t].extra_price||this.product.extras[t].extra_price<0||this.product.extras[t].extra_price>9999?(i[t].classList.remove("is-valid"),i[t].classList.add("is-invalid")):(i[t].classList.add("is-valid"),i[t].classList.remove("is-invalid")))},removeExtra(e){this.product.extras=this.product.extras.filter((t=>t.id!=e))},imageInput(){var e=document.getElementById("formFile");if(e.files&&e.files[0]){var t=new FileReader;t.onload=e=>{this.product.image=e.target.result},t.readAsDataURL(e.files[0])}},async validateProduct(e){var t=document.getElementById("product-name"),i=document.getElementById("product-price"),s=document.getElementById("product-category"),a=document.getElementById("product-info");if(this.product.name=t.value,null!=i&&(this.product.price=i.value),this.product.info=a.value,this.product.categories=[s.value],e||this.continuePressed){var r=document.getElementsByClassName("variation-name"),o=document.getElementsByClassName("variation-price"),n=document.getElementsByClassName("extra-name"),l=document.getElementsByClassName("extra-price"),c=!0;if(e){t.value=t.value.trim(),a.value=a.value.trim(),r.length>0?(this.product.has_variations=!0,this.product.price=1e5):this.product.has_variations=!1;for(var d=0;d<r.length;d++)this.product.variations[d].name=r[d].value.trim(),this.product.variations[d].name.length<1||this.product.variations[d].name.length>30?(r[d].classList.remove("is-valid"),r[d].classList.add("is-invalid"),c=!1):(r[d].classList.add("is-valid"),r[d].classList.remove("is-invalid")),null==this.product.variations[d].price||this.product.variations[d].price<0||this.product.variations[d].price>9999?(o[d].classList.remove("is-valid"),o[d].classList.add("is-invalid"),c=!1):(o[d].classList.add("is-valid"),o[d].classList.remove("is-invalid")),this.product.variations[d].price<this.product.price&&(this.product.price=this.product.variations[d].price);for(n.length>0?this.product.has_extras=!0:this.product.has_extras=!1,d=0;d<n.length;d++)this.product.extras[d].name=n[d].value.trim(),this.product.extras[d].name.length<1||this.product.extras[d].name.length>30?(n[d].classList.remove("is-valid"),n[d].classList.add("is-invalid"),c=!1):(n[d].classList.add("is-valid"),n[d].classList.remove("is-invalid")),null==this.product.extras[d].extra_price||this.product.extras[d].extra_price<0||this.product.extras[d].extra_price>1e3?(l[d].classList.remove("is-valid"),l[d].classList.add("is-invalid"),c=!1):(l[d].classList.add("is-valid"),l[d].classList.remove("is-invalid"))}t.value.trim().length<3?(t.classList.remove("is-valid"),t.classList.add("is-invalid"),c=!1):(t.classList.remove("is-invalid"),t.classList.add("is-valid")),null!=i&&(i.value<0||i.value>9999?(i.classList.remove("is-valid"),i.classList.add("is-invalid"),c=!1):(i.classList.remove("is-invalid"),i.classList.add("is-valid"))),"Kategorie"==s.value?(s.classList.remove("is-valid"),s.classList.add("is-invalid"),c=!1):(s.classList.remove("is-invalid"),s.classList.add("is-valid")),a.value.trim().length<5?(a.classList.remove("is-valid"),a.classList.add("is-invalid"),c=!1):(a.classList.remove("is-invalid"),a.classList.add("is-valid")),this.continuePressed=!0,c&&e&&(this.initialProduct==this.product?this.stopEditingProduct():(this.failureAlertTitle="Fehler",this.failureAlertInfo="Beim Aktualisieren des Angebots ist ein Fehler aufgetreten. Versuche es später erneut.",this.successAlertTitle="",this.registration?this.stopEditingProduct():""==this.initialProduct.name?this.store.dispatch("addProduct",this.product):this.store.dispatch("updateProduct",this.product)))}}}};const ro=(0,I.Z)(ao,[["render",so],["__scopeId","data-v-0894d9e9"]]);var oo=ro,no={name:"ProductTile",props:["data","registration"],components:{EditProductOverlay:oo},emits:["deleteProduct","editProduct"],data(){return{edit:!1,picture:null}},setup(){var e=(0,Kt.qj)({id:null,name:"",info:"",categories:[],price:"",imageBefore:null,image:null,delivery:!0,public:!0,product_picture:"",variations:[],extras:[],has_variations:!1,has_extras:!1});return{product:e}},async mounted(){if(null!=this.data)if(this.product.id=this.data.id,this.product.name=this.data.name,this.product.categories=this.data.categories,this.product.info=this.data.info,this.product.price=this.data.price,this.product.delivery=this.data.delivery,this.product.public=this.data.public,this.product.product_picture=this.data.product_picture,this.product.has_variations=this.data.has_variations,this.product.has_extras=this.data.has_extras,void 0!=this.data.variations&&this.data.variations.forEach((e=>{this.product.variations.push(e)})),void 0!=this.data.extras&&this.data.extras.forEach((e=>{this.product.extras.push(e)})),this.registration)this.product.image=this.data.image,this.product.imageBefore=this.data.image,this.picture=this.data.image;else if(null!=this.data.product_picture){const e=await Nt.storage.from("public/products-pictures").download(this.data.product_picture);null!=e.data&&(this.product.image=await e.data.text(),this.product.imageBefore=this.product.image,this.picture=this.product.image),e.error&&console.warn(e.error)}else null!=this.data.image&&(this.product.image=this.data.image,this.product.imageBefore=this.data.image,this.picture=this.data.image)},methods:{stopEditingProduct(e){this.edit=!1,null!=e&&(this.product=e,this.picture=e.image,this.registration&&this.$emit("editProduct",e))},deleteProduct(e){this.edit=!1,this.$emit("deleteProduct",e)}}};const lo=(0,I.Z)(no,[["render",Za],["__scopeId","data-v-7b5fcadd"]]);var co=lo;const uo={class:"type"},ho={class:"input-group-text"},po={key:0,class:"fa-solid fa-cart-shopping fa-lg"},mo={key:1,class:"fa-solid fa-house fa-lg"},vo={key:2,class:"fa-solid fa-user fa-lg"},go={key:3,class:"fa-solid fa-gavel fa-lg"},yo={key:4,class:"fa-solid fa-box-open fa-lg"},fo={key:5,class:"fa-solid fa-dollar-sign fa-lg"},_o={key:6,class:"fa-solid fa-file"},wo={class:"name"};function bo(e,t,i,s,r,o){const n=(0,a.up)("EditAccountingEntryOverlay");return(0,a.wg)(),(0,a.iD)(a.HY,null,[r.edit?((0,a.wg)(),(0,a.j4)(n,{key:0,data:s.entry,products:i.products,onStopEditingEntry:t[0]||(t[0]=e=>o.stopEditingEntry(e)),onDeleteEntry:t[1]||(t[1]=e=>o.deleteEntry(e))},null,8,["data","products"])):(0,a.kq)("",!0),(0,a._)("div",{class:"card",onClick:t[2]||(t[2]=e=>r.edit=!0)},[(0,a._)("div",uo,[(0,a._)("span",ho,["Einkauf-"==s.entry.type?((0,a.wg)(),(0,a.iD)("i",po)):"Miete-"==s.entry.type?((0,a.wg)(),(0,a.iD)("i",mo)):"Gehalt-"==s.entry.type?((0,a.wg)(),(0,a.iD)("i",vo)):"Steuern-"==s.entry.type?((0,a.wg)(),(0,a.iD)("i",go)):"Verkauf+"==s.entry.type?((0,a.wg)(),(0,a.iD)("i",yo)):((0,a.wg)(),(0,a.iD)("i",fo)),null!=s.entry.bill_picture?((0,a.wg)(),(0,a.iD)("i",_o)):(0,a.kq)("",!0)])]),(0,a._)("p",wo,(0,ee.zw)(s.entry.name),1),(0,a._)("p",{class:(0,ee.C_)(["price",{income:s.entry.amount>0,expense:s.entry.amount<0}])},(0,ee.zw)(s.entry.amount>0?"+":"")+(0,ee.zw)(s.entry.amount)+" "+(0,ee.zw)(s.entry.currencyIsEuro?"€":"$"),3)])],64)}var ko={name:"AccountingEntryTile",props:["data","products"],components:{EditAccountingEntryOverlay:ea},emits:["deleteEntry","stopEditingEntry"],data(){return{edit:!1,picture:null}},setup(){var e=(0,Kt.qj)({id:null,name:"",type:"",info:"",amount:"",product:null,created_at:"",imageBefore:null,image:null,bill_picture:"",currencyIsEuro:!1,extras:[],variation:""});const t=(0,H.oR)(),i=(0,a.Fl)((()=>t.state.userCompany));return{entry:e,store:t,companyData:i}},async mounted(){if(null!=this.data)if(this.entry.id=this.data.id,this.entry.name=this.data.name,this.entry.type=this.data.type,this.entry.info=this.data.info,this.entry.amount=this.data.amount,this.entry.bill_picture=this.data.bill_picture,this.entry.currencyIsEuro=this.data.currencyIsEuro,this.entry.variation=this.data.variation,this.entry.extras=this.data.extras,this.entry.product=this.data.product,void 0!=this.data.users?this.entry.userName=this.data.users.name:this.entry.userName=this.data.userName,this.entry.created_at=this.data.created_at,null!=this.data.bill_picture){const e=await Nt.storage.from("bill-pictures/"+this.store.getters.getUserCompany.id).download(this.data.bill_picture);null!=e.data&&(this.entry.image=await e.data.text(),this.entry.imageBefore=this.entry.image,this.picture=this.entry.image),e.error&&console.warn(e.error)}else null!=this.data.image&&(this.entry.image=this.data.image,this.entry.imageBefore=this.entry.image,this.picture=this.data.image)},methods:{stopEditingEntry(e){this.edit=!1,null!=e&&(this.entry=e,this.picture=e.image,this.$emit("stopEditingEntry",e))},deleteEntry(e){this.edit=!1,this.$emit("deleteEntry",e)}}};const Eo=(0,I.Z)(ko,[["render",bo],["__scopeId","data-v-2f35a668"]]);var xo=Eo,Co={name:"SortableList",emits:["deleteProduct","deleteEntry","stopEditingEntry"],data(){return{categories:[],chosenCategories:[],searchString:"",shownItems:[],sortedShownItems:[],sortBy:"AccountingEntryTile"==this.element?"created_at":"",dir:"up",directLinks:[],focus:!1}},props:["items","element","loading","noSearch","sortByCategories","showCategory","products","companyData"],methods:{sort:function(){if(this.sortedShownItems=this.shownItems,""!=this.sortBy){if("category"==this.sortBy){var e=[];if("ProductTile"==this.element){e=["Essen","Trinken","Gegenstand","Dienstleistung","Aktivität","Event","Sonstiges"];for(var t=0;t<this.sortedShownItems.length;t++)this.sortedShownItems[t].category=e.indexOf(this.sortedShownItems[t].categories[0])}else{e=["Verkauf+","Einkauf-","Gehalt-","Miete-","Steuern-","Sonstige Einnahmen+","Sonstige Ausgaben-"];for(var i=0;i<this.sortedShownItems.length;i++)this.sortedShownItems[i].category=e.indexOf(this.sortedShownItems[i].type)}}else if("amount"==this.sortBy)return this.sortedShownItems.sort(((e,t)=>"string"==typeof e[this.sortBy]&&"string"==typeof t[this.sortBy]?e[this.sortBy].localeCompare(t[this.sortBy]):Math.abs(e[this.sortBy])>Math.abs(t[this.sortBy])?1:Math.abs(e[this.sortBy])<Math.abs(t[this.sortBy])?-1:0)),void("down"==this.dir&&this.sortedShownItems.reverse());this.sortedShownItems.sort(((e,t)=>"string"==typeof e[this.sortBy]&&"string"==typeof t[this.sortBy]?e[this.sortBy].localeCompare(t[this.sortBy]):e[this.sortBy]>t[this.sortBy]?1:e[this.sortBy]<t[this.sortBy]?-1:0)),("up"==this.dir&&"created_at"==this.sortBy||"down"==this.dir&&"created_at"!=this.sortBy)&&this.sortedShownItems.reverse()}else this.shuffleArray(this.sortedShownItems)},searchForString:function(e,t){if(e.startsWith("/")&&(e=e.substring(1)),null==t)return 0;let i=0;if("object"==typeof t){if(!(t instanceof Array)){let e=[],i=[];i="AccountingEntryTile"==this.element?["name","type","info"]:["name","company_name","info"],i.forEach((i=>e.push(t[i]))),t=e}for(let s=0;s<t.length;s++)i+=this.searchForString(e,t[s]);return i}if("string"!=typeof t)return 0;let s=t.match(new RegExp(e,"gi"));return null==s?0:s.length},generateShownItems:function(){let e=[];for(let t=0;t<this.items.length;t++){let i=this.items[t],s=!0;if(0==this.searchForString(this.searchString,i))s=!1;else if("AccountingEntryTile"==this.element)s=!!this.chosenCategories.includes(i.type)||(!(!this.chosenCategories.includes("Einnahmen")||!i.type.includes("+"))||(!(!this.chosenCategories.includes("Ausgaben")||!i.type.includes("-"))||0==this.chosenCategories.length));else if(null==i.categories&&0!=this.chosenCategories.length)s=!1;else for(let e=0;e<this.chosenCategories.length;e++)i.categories.includes(this.chosenCategories[e])||(s=!1),"Gastronomie & Dienstleistung"!=i.categories[0]||"Gastronomie"!=this.chosenCategories[e]&&"Dienstleistung"!=this.chosenCategories[e]||(s=!0);s&&e.push(i)}e!=this.shownItems&&(this.shownItems=e,this.sort())},generateCategories:function(){for(let e=0;e<this.items.length;e++){let t=this.items[e];if(null!=t.categories)for(let e=0;e<t.categories.length;e++){let i=t.categories[e];this.categories.includes(i)||this.categories.push(i)}}},entryCategoryChange(){const e=document.getElementById("entryCategory"),t=e.value;this.chosenCategories=""==t?[]:[t]},productCategoryChange(){const e=document.getElementById("productCategory"),t=e.value;this.chosenCategories=""==t?[]:[t]},entrySortChange(){const e=document.getElementById("entrySort"),t=e.value;this.sortBy=t,console.log(t)},productSortChange(){const e=document.getElementById("productSort"),t=e.value;this.sortBy=t},aliasRoute(e){xv.addRoute({path:"/"+e}),xv.forward(),console.log("/"+e)},removeFocus(){setTimeout(function(){this.focus=!1}.bind(this),200)},shuffleArray(e){for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}},deleteProduct(e){this.$emit("deleteProduct",e)},deleteEntry(e){this.$emit("deleteEntry",e)},stopEditingEntry(e){this.$emit("stopEditingEntry",e)}},mounted(){this.sortByCategories&&(this.sortBy="category"),this.generateCategories(),this.generateShownItems()},watch:{items:function(){this.generateCategories(),this.generateShownItems()},element:function(){this.generateShownItems()},searchString:function(){if(this.generateShownItems(),this.directLinks=[],"CompanyTile"==this.element&&this.searchString.startsWith("/"))for(let e=0;e<this.items.length;e++)void 0!==this.items[e].alias&&this.items[e].alias.startsWith(this.searchString.substring(1))&&this.directLinks.push(this.items[e])},dir:function(){this.generateShownItems()},sortBy:function(){this.generateShownItems()},chosenCategories:function(){this.generateShownItems()}},components:{ProductTile:co,AccountingEntryTile:xo}};const Do=(0,I.Z)(Co,[["render",ba],["__scopeId","data-v-65317515"]]);var Io=Do,So=i(1809),Ao={name:"AccountingView",components:{TitleDiv:Yi,EditAccountingEntryOverlay:ea,SortableList:Io},setup(){const e=(0,H.oR)(),t=(0,a.Fl)((()=>e.state.userCompany));return{store:e,companyData:t}},mounted(){window.jQuery=window.$=i(7526),window.Popper=i(4599),i(1016),window.$("body").tooltip({selector:'[data-bs-toggle="tooltip"]'})},data(){return{entries:[],products:[],euroExpenses:0,schilliExpenses:0,expenses:0,euroRevenue:0,schilliRevenue:0,revenue:0,profit:0,euroProfit:0,newEntry:!1,listKey:0,key:0,totalChart:null,typeChart:null,loading:!0}},async created(){{const{data:t,error:i}=await Nt.from("products").select().eq("company_id",this.companyData.id);if(i)throw i;this.products=t.sort(((e,t)=>e.name.localeCompare(t.name)));for(var e=0;e<this.products.length;e++){if(this.products[e].has_variations){const{data:t,error:i}=await Nt.from("product_variations").select().eq("product",this.products[e].id).order("price");if(i)throw i;this.products[e].variations=t}if(this.products[e].has_extras){const{data:t,error:i}=await Nt.from("product_extras").select().eq("product",this.products[e].id).order("extra_price");if(i)throw i;this.products[e].extras=t}}}const{data:t,error:i}=await Nt.from("accounting").select("*, users(name)").eq("company_id",this.companyData.id);if(i)throw i;this.entries=t,this.loading=!1,this.calculateProfit(),this.updateGraphs()},methods:{downloadCSV(){let e="Titel;Art;Währung;Betrag;Datum;Uhrzeit;Ersteller;Beschreibung";const t=this.entries.sort(((e,t)=>e.created_at.localeCompare(t.created_at)));for(let s=0;s<t.length;s++){const i=t[s];e+=`\n${i.name};${i.type.replace("+","").replace("-","")};${i.currencyIsEuro?"Euro":"Schilli"};${i.amount};${Ys(i.created_at.split("T")[0])};${js(i.created_at.split("T")[1])};${i.users.name};${i.info}`}let i=document.createElement("a");i.textContent="download",i.download="buchhaltung.csv",i.href="data:text/csv;charset=utf-8,"+encodeURIComponent(e),document.body.appendChild(i),i.style.display="none",i.click(),document.body.removeChild(i)},deleteEntry(e){this.newEntry=!1;var t=this.entries.findIndex((t=>t.id==e.id));this.entries.splice(t,1),this.store.dispatch("deleteEntry",e),this.calculateProfit(),this.updateGraphs(),this.key++},stopEditingEntry(e){if(this.newEntry=!1,null!=e){const t=this.entries.findIndex((t=>t.id==e.id));console.log(this.entries),console.log(t),-1==t?this.entries.push(e):(this.entries[t].type=e.type,this.entries[t].product=e.product,this.entries[t].name=e.name,this.entries[t].amount=e.amount,this.entries[t].info=e.info,this.entries[t].bill_picture=e.bill_picture,this.entries[t].currencyIsEuro=e.currencyIsEuro)}this.calculateProfit(),this.updateGraphs(),this.key++},addEntry(){this.newEntry=!0},calculateProfit(){this.euroRevenue=0,this.schilliRevenue=0,this.revenue=0,this.euroExpenses=0,this.schilliExpenses=0,this.expenses=0,this.entries.forEach((e=>{e.amount>0?e.currencyIsEuro?this.euroRevenue+=e.amount:this.schilliRevenue+=e.amount:e.currencyIsEuro?this.euroExpenses+=Math.abs(e.amount):this.schilliExpenses+=Math.abs(e.amount)})),this.revenue=this.schilliRevenue+12.5*this.euroRevenue,this.expenses=this.schilliExpenses+12.5*this.euroExpenses,this.profit=this.schilliRevenue-this.schilliExpenses+12.5*(this.euroRevenue-this.euroExpenses),this.schilliResult=this.schilliRevenue-this.schilliExpenses,this.euroResult=this.euroRevenue-this.euroExpenses,this.schilliResult>=0?this.euroProfit=this.euroResult+.08*this.schilliResult:this.euroProfit=this.euroResult+.1*this.schilliResult,this.euroRevenue=this.euroRevenue.toFixed(2),this.schilliRevenue=this.schilliRevenue.toFixed(0),this.euroExpenses=this.euroExpenses.toFixed(2),this.schilliExpenses=this.schilliExpenses.toFixed(0),this.revenue=this.revenue.toFixed(0),this.expenses=this.expenses.toFixed(0),this.profit=this.profit.toFixed(0),this.euroProfit=this.euroProfit.toFixed(2)},updateGraphs(){this.updateTotalGraph(),this.updateTypeGraph()},updateTotalGraph(){const e={type:"bar",label:"Einnahmen",data:[],backgroundColor:"rgba(0, 128, 0, 0.2)",borderColor:"rgba(0, 128, 0, 1)",order:2,borderSkipped:!1,borderWidth:1},t={type:"bar",label:"Ausgaben",data:[],backgroundColor:"rgba(255, 0, 0, 0.2)",borderColor:"rgba(255, 0, 0, 1)",order:3,borderSkipped:!1,borderWidth:1},i={type:"line",label:"Gewinn / Verlust",data:[],backgroundColor:"rgba(13, 110, 253, 1)",borderColor:"rgba(13, 110, 253, 1)",order:1};var s=[];this.entries.forEach((e=>{s.push(e)})),s.sort(((e,t)=>e.created_at.localeCompare(t.created_at)));const a=[];if(s.forEach((s=>{var r;a.includes(s.created_at.split("T")[0])?r=a.indexOf(s.created_at.split("T")[0]):(a.push(s.created_at.split("T")[0]),r=a.length-1,e.data.push(0),t.data.push(0),0==r?i.data.push(0):i.data[r]=i.data[r-1]);var o=s.currencyIsEuro?parseInt((12.5*s.amount).toFixed(0)):s.amount;o>0?e.data[r]+=o:t.data[r]+=o,i.data[r]+=o})),null!=this.totalChart){this.totalChart.destroy();const e=document.getElementsByClassName("total-chart");for(var r=0;r<e.length;r++)e[r].remove();const t=document.getElementById("total-charts"),i=document.createElement("canvas");i.classList.add("total-chart"),t.appendChild(i),i.style.marginBottom="50px"}this.totalChart=null;const o=document.getElementsByClassName("total-chart"),n=o[o.length-1];this.totalChart=new So.kL(n,{data:{labels:a,datasets:[e,t,i]},options:{scales:{x:{stacked:!0},y:{beginAtZero:!0}},responsive:!0}})},updateTypeGraph(){var e=[];this.entries.forEach((t=>{e.push(t)})),e.sort(((e,t)=>e.type[e.type.length-1].localeCompare(t.type[t.type.length-1])));const t={type:"bar",data:[],backgroundColor:[],borderColor:[],order:1,borderSkipped:!0,borderWidth:1},i=[];e.forEach((e=>{var s;i.includes(e.type.replace("+","").replace("-",""))?s=i.indexOf(e.type.replace("+","").replace("-","")):(i.push(e.type.replace("+","").replace("-","")),s=i.length-1,t.data.push(0),e.amount>0?(t.backgroundColor.push("rgba(0, 128, 0, 0.2)"),t.borderColor.push("rgba(0, 128, 0, 1)")):(t.backgroundColor.push("rgba(255, 0, 0, 0.2)"),t.borderColor.push("rgba(255, 0, 0, 1)")));var a=e.currencyIsEuro?parseInt((12.5*e.amount).toFixed(0)):e.amount;t.data[s]+=a}));var s=i.indexOf("Sonstige Einnahme");if(-1!=s&&(i[s]="Sonst. Einn."),s=i.indexOf("Sonstige Ausgabe"),-1!=s&&(i[s]="Sonst. Ausg."),null!=this.typeChart){this.typeChart.destroy();const e=document.getElementsByClassName("type-chart");for(var a=0;a<e.length;a++)e[a].remove();const t=document.getElementById("type-charts"),i=document.createElement("canvas");i.classList.add("type-chart"),t.appendChild(i),i.style.marginBottom="50px"}this.typeChart=null;const r=document.getElementsByClassName("type-chart"),o=r[r.length-1];this.typeChart=new So.kL(o,{data:{labels:i,datasets:[t]},options:{scales:{y:{beginAtZero:!0}},responsive:!0,plugins:{legend:{display:!1}}}})}}};const Bo=(0,I.Z)(Ao,[["render",Zi],["__scopeId","data-v-213490b2"]]);var Lo=Bo;function Po(e,t,i,s,r,o){const n=(0,a.up)("EditProductOverlay"),l=(0,a.up)("TitleDiv"),c=(0,a.up)("SortableList");return(0,a.wg)(),(0,a.iD)(a.HY,null,[r.newProduct?((0,a.wg)(),(0,a.j4)(n,{key:0,registration:!1,onStopEditingProduct:t[0]||(t[0]=e=>o.stopEditingProduct(e)),onDeleteProduct:t[1]||(t[1]=e=>o.deleteProduct())})):(0,a.kq)("",!0),(0,a.Wm)(l,{title:"Angebote"}),(0,a._)("button",{class:"btn btn-primary mb-4 add-product",onClick:t[2]||(t[2]=e=>o.addProduct())}," Angebot hinzufügen "),!r.loading&&r.products.length>0?((0,a.wg)(),(0,a.j4)(c,{items:r.products,key:r.key,"sort-by-categories":"true",element:"ProductTile",onDeleteProduct:t[3]||(t[3]=e=>o.deleteProduct(e))},null,8,["items"])):(0,a.kq)("",!0)],64)}var qo={name:"ProductView",components:{TitleDiv:Yi,EditProductOverlay:oo,SortableList:Io},setup(){const e=(0,H.oR)(),t=(0,a.Fl)((()=>e.state.userCompany));return{store:e,companyData:t}},data(){return{products:[],newProduct:!1,key:0,loading:!0}},async created(){try{const{data:t,error:i}=await Nt.from("products").select().eq("company_id",this.companyData.id);if(i)throw i;this.products=t.sort(((e,t)=>e.name.localeCompare(t.name)));for(var e=0;e<this.products.length;e++){if(this.products[e].has_variations){const{data:t,error:i}=await Nt.from("product_variations").select().eq("product",this.products[e].id).order("price");if(i)throw i;t.length>0&&(this.products[e].variations=t)}if(this.products[e].has_extras){const{data:t,error:i}=await Nt.from("product_extras").select().eq("product",this.products[e].id).order("extra_price");if(i)throw i;t.length>0&&(this.products[e].extras=t)}}this.loading=!1,console.log(this.products)}catch(t){console.log(t)}},methods:{deleteProduct(e){this.newProduct=!1,console.log("test");var t=this.products.findIndex((t=>t.id==e.id));this.products.splice(t,1),this.key++,this.store.dispatch("deleteProduct",e)},stopEditingProduct(e){this.newProduct=!1,console.log("test"),null!=e&&(this.products.push(e),this.key++)},addProduct(){this.newProduct=!0}}};const Ro=(0,I.Z)(qo,[["render",Po],["__scopeId","data-v-2ae5b3c1"]]);var To=Ro;const zo=e=>((0,a.dD)("data-v-0a60786c"),e=e(),(0,a.Cn)(),e),Fo=zo((()=>(0,a._)("div",{id:"mapContainer"},null,-1))),Uo=[Fo];function Vo(e,t,i,s,r,o){return(0,a.wg)(),(0,a.iD)("div",null,Uo)}var Mo=i(5243),Oo=i.n(Mo),Zo={name:"MapPicker",props:["data","isExtrasEditing"],emits:["pickCoordinates"],setup(){var e=new Image;return e.src=i(4380),{pin:e}},async mounted(){var e=16,t=[48.93452321902908,9.263819092113069],i=Oo().map("mapContainer").setView(t,e);if(i.setZoom(16),Oo().tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,minZoom:16,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(i),"geolocation"in navigator){var s=Oo().circleMarker([0,0]).addTo(i);navigator.geolocation.watchPosition((e=>{s.setLatLng([e.coords.latitude,e.coords.longitude])}))}else console.log(!1);let a=Oo().icon({iconUrl:this.pin.src,iconSize:[29,45],iconAnchor:[14.5,45]});var r=Oo().marker([0,0],{icon:a}).addTo(i);i.on("click",(e=>{this.isExtrasEditing&&(r.setLatLng(e.latlng),this.$emit("pickCoordinates",e.latlng))})),console.log(this.data),null!=this.data&&2==this.data.length&&r.setLatLng([this.data[0],this.data[1]])}};const No=(0,I.Z)(Zo,[["render",Vo],["__scopeId","data-v-0a60786c"]]);var Ko=No,Qo={name:"CompanyDetailView",props:["companyuuid"],components:{AlertPopup:ii,AccountingView:Lo,ProductView:To,CompanyBadge:ui,MapPicker:Ko},data(){return{company:void 0,page:0,isCompanyEditing:!1,isEmployeesEditing:!1,isExtrasEditing:!1,saveCompanyPressed:!1,saveEmployeesPressed:!1,saveExtrasPressed:!1,employees:[],alertTitle:"",alertInfo:"",successAlertTitle:"",successAlertInfo:"",failureAlertTitle:"Fehler",failureAlertInfo:"Es ist ein Fehler aufgetreten!",key:0,toPay:0}},computed:{...(0,H.Se)(["getState"])},setup(){const e=(0,H.oR)(),t=(0,a.Fl)((()=>e.state.user)),i=(0,Kt.qj)({name:"",location:"",category:"Kategorie",info:"",employees:[""],image:null,unchangedImage:null,verified:null,payed:null,coordinates:[]});return{store:e,userData:t,form:i}},watch:{getState(e){var t=document.getElementsByClassName("spinner"),i=document.getElementsByClassName("loading-button");if("loading"==e)Array.from(t).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),Array.from(i).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"}));else if("success"==e){if(Array.from(t).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"})),Array.from(i).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),this.alertTitle=this.successAlertTitle,this.alertInfo=this.successAlertInfo,""==this.alertTitle)return;s=new T.Modal(document.getElementById("alertModal"),{}),s.show()}else{if(Array.from(t).forEach((e=>{e.style.visibility="hidden",e.style.position="absolute"})),Array.from(i).forEach((e=>{e.style.visibility="visible",e.style.position="relative"})),this.alertTitle=this.failureAlertTitle,this.alertInfo=this.failureAlertInfo,""==this.alertTitle)return;var s=new T.Modal(document.getElementById("alertModal"),{});s.show()}}},async mounted(){if(this.$route.params.companyalias){const{data:e,error:t}=await Nt.from("companies").select("*, users(*)").eq("alias",this.$route.params.companyalias);if(null!=t&&console.log(t),null===e||0===e.length)return void(this.company=null);if(this.company=e[0],this.store.commit("setUserCompany",this.company),this.employees=this.company.employees,null!=this.company.abo&&""!=this.company.abo)switch(this.company.abo){case"Standard":this.toPay=50;break;case"Delivery":this.toPay=100;break;case"Business":this.toPay=160;break}if(null!=this.company.header_picture){const e=await Nt.storage.from("public/sellers-headings").download(this.company.header_picture);null!=e.data&&(this.form.image=await e.data.text(),this.form.unchangedImage=await e.data.text()),e.error&&console.warn(e.error)}}},methods:{pickCoordinates(e){null!=e&&null!=e.lat&&null!=e.lng&&(this.form.coordinates=[e.lat,e.lng])},imageInput(){var e=document.getElementById("formFile");if(e.files&&e.files[0]){var t=new FileReader;t.onload=e=>{this.form.image=e.target.result},t.readAsDataURL(e.files[0])}},addEmployee(){var e=document.getElementsByClassName("employees-mail"),t=0;Array.from(e).forEach((e=>{this.employees[t]=e.value,e.classList.remove("is-valid"),e.classList.remove("is-invalid"),t++})),this.employees.push("")},cancelChanges(){this.cancelCompanyChange()},editCompany(){this.isCompanyEditing=!0;var e=document.getElementById("company-name"),t=document.getElementById("company-location"),i=document.getElementById("company-category"),s=document.getElementById("company-info"),a=document.getElementById("company-verified");e.disabled=!1,t.disabled=!1,i.disabled=!1,s.disabled=!1,a.disabled=!1},editExtras(){this.isExtrasEditing=!0;var e=document.getElementById("company-instagram");e.disabled=!1},editEmployees(){this.isEmployeesEditing=!0;var e=document.getElementsByClassName("employees-mail");Array.from(e).forEach((e=>{e.disabled=!1}))},async validateCompanyChange(e){if(e||this.saveCompanyPressed){var t=document.getElementById("company-name"),i=document.getElementById("company-location"),s=document.getElementById("company-category"),a=document.getElementById("company-info"),r=document.getElementById("company-verified"),o=document.getElementById("company-payed");e&&(t.value=t.value.trim()),e&&(i.value=i.value.trim()),e&&(a.value=a.value.trim());var n=!0;if(t.value.trim().length<3?(t.classList.remove("is-valid"),t.classList.add("is-invalid"),n=!1):(t.classList.remove("is-invalid"),t.classList.add("is-valid")),i.value.trim().length<3||i.value.trim().length>40?(i.classList.remove("is-valid"),i.classList.add("is-invalid"),n=!1):(i.classList.remove("is-invalid"),i.classList.add("is-valid")),"Kategorie"==s.value?(s.classList.remove("is-valid"),s.classList.add("is-invalid"),n=!1):(s.classList.remove("is-invalid"),s.classList.add("is-valid")),a.value.trim().length<10?(a.classList.remove("is-valid"),a.classList.add("is-invalid"),n=!1):(a.classList.remove("is-invalid"),a.classList.add("is-valid")),this.saveCompanyPressed=!0,n&&e){if(this.store.commit("setState","loading"),t.value.replace(/\s/g,"").toLowerCase()!=this.company.alias){const{data:e,error:n}=await Nt.from("companies").select().eq("alias",t.value.replace(/\s/g,"").toLowerCase());if(n||null!=e[0])return t.classList.remove("is-valid"),t.classList.add("is-invalid"),this.form.name=t.value,this.form.location=i.value,this.form.category=s.value,this.form.info=a.value,this.form.verified=r.checked,this.form.payed=o.checked,this.failureAlertTitle="Name schon vergeben",this.failureAlertInfo="Es gibt bereits ein Unternehmen mit diesem Namen. Bitte wähle einen anderen!",void this.store.commit("setState","failure")}this.form.name=t.value,this.form.location=i.value,this.form.info=a.value,this.form.category=s.value,this.form.verified=r.checked,this.form.payed=o.checked,this.saveCompany()}}},async validateExtrasChange(e){if(e||this.saveExtrasPressed){var t=document.getElementById("company-instagram");e&&(t.value=t.value.trim());var i=!0;if(this.saveExtrasPressed=!0,i&&e){if(this.store.commit("setState","loading"),t.value.replace(/\s/g,"").toLowerCase()!=this.company.socials["instagram"])try{const{error:e}=await Nt.from("companies").update({socials:{instagram:t.value.replace(/\s/g,"").toLowerCase()}}).eq("id",this.company.id);if(e)throw e}catch(s){console.log(s),t.classList.remove("is-valid"),t.classList.add("is-invalid"),this.store.commit("setState","failure")}if(this.form.coordinates!=this.company.coordinates&&this.form.coordinates!=[])try{const{error:e}=await Nt.from("companies").update({coordinates:this.form.coordinates}).eq("id",this.company.id);if(e)throw e;this.company.coordinates=this.form.coordinates}catch(s){console.log(s),this.store.commit("setState","failure")}t.classList.remove("is-valid"),t.classList.remove("is-invalid"),this.store.commit("setState","success"),this.isExtrasEditing=!1,this.key++}}},validateEmployeesChange(e,t){if(e||this.saveEmployeesPressed){var i=document.getElementsByClassName("employees-mail"),s=i[t].getAttribute("data-regex"),a=!0;e?Array.from(i).forEach((e=>{e.value.match(s)?(e.classList.remove("is-invalid"),e.classList.add("is-valid")):(e.classList.remove("is-valid"),e.classList.add("is-invalid"),a=!1)})):i[t].value.match(s)?(i[t].classList.remove("is-invalid"),i[t].classList.add("is-valid")):(i[t].classList.remove("is-valid"),i[t].classList.add("is-invalid"),a=!1),this.saveEmployeesPressed=!0,a&&e&&this.saveEmployees()}},async saveCompany(){try{this.isCompanyEditing=!1,this.saveCompanyPressed=!1;var e=document.getElementById("company-name"),t=document.getElementById("company-location"),i=document.getElementById("company-category"),s=document.getElementById("company-info");const{data:o,error:n}=await Nt.from("companies").update({alias:this.form.name.replace(/\s/g,"").toLowerCase(),name:this.form.name,categories:[this.form.category],location:this.form.location,info:this.form.info,verified:this.form.verified,payed:this.form.payed}).eq("id",this.company.id).select();if(console.log(o),console.log(n),n)throw n;if(null!=this.form.image&&this.form.image!=this.form.unchangedImage){{const{error:e}=await Nt.storage.from("sellers-headings").remove([o[0].header_picture]);if(e)throw e}var a=this.form.image.substring(this.form.image.indexOf(":"),this.form.image.indexOf(";")).replace(":",""),r=o[0].id+"."+a.split("/")[1];{const{error:e}=await Nt.storage.from("sellers-headings").upload(r,this.form.image,{cacheControl:"3600",upsert:!0,contentType:a});if(e)throw e}{const{error:e}=await Nt.from("companies").update({header_picture:r}).eq("id",o[0].id);if(e)throw e}}this.successAlertTitle="",this.store.commit("setState","success"),e.classList.remove("is-valid"),e.classList.remove("is-invalid"),t.classList.remove("is-valid"),t.classList.remove("is-invalid"),i.classList.remove("is-valid"),i.classList.remove("is-invalid"),s.classList.remove("is-valid"),s.classList.remove("is-invalid")}catch(o){this.failureAlertTitle="Fehler",this.failureAlertInfo="Beim Ändern der Unternehmens-Daten ist ein Fehler aufgetreten!",this.store.commit("setState","failure"),this.cancelCompanyChange(),console.log(o.error_description||o.message)}},async saveEmployees(){try{const t=[];var e=document.getElementsByClassName("employees-mail");if(Array.from(e).forEach((e=>{""!=e.value&&t.push(e.value),e.classList.remove("is-valid"),e.classList.remove("is-invalid")})),JSON.stringify(t)!=JSON.stringify(this.company.employees)){const{error:e}=await Nt.from("companies").update({employees:t}).eq("user_uid",this.userData.id);if(e)throw e}this.isEmployeesEditing=!1,this.saveEmployeesPressed=!1,Array.from(e).forEach((e=>{e.classList.remove("is-valid"),e.classList.remove("is-invalid")}))}catch(t){this.failureAlertTitle="Fehler",this.failureAlertInfo="Beim Ändern der Mitarbeiter ist ein Fehler aufgetreten!",this.store.commit("setState","failure"),this.cancelEmployeesChange(),console.log(t.error_description||t.message)}},cancelCompanyChange(){this.isCompanyEditing=!1,this.saveCompanyPressed=!1;var e=document.getElementById("company-name"),t=document.getElementById("company-location"),i=document.getElementById("company-category"),s=document.getElementById("company-info"),a=document.getElementById("company-verified"),r=document.getElementById("company-payed");e.value=this.company.name,t.value=this.company.location,i.value=this.company.categories[0],s.value=this.company.info,a.checked=this.company.verified,r.checked=this.company.payed,e.classList.remove("is-valid"),e.classList.remove("is-invalid"),t.classList.remove("is-valid"),t.classList.remove("is-invalid"),i.classList.remove("is-valid"),i.classList.remove("is-invalid"),s.classList.remove("is-valid"),s.classList.remove("is-invalid")},cancelExtrasChange(){this.isExtrasEditing=!1,this.saveExtrasPressed=!1;var e=document.getElementById("company-instagram");e.value=this.companyData.socials["instagram"],this.form.coordinates=[],this.key++,e.classList.remove("is-valid"),e.classList.remove("is-invalid")},cancelEmployeesChange(){this.isEmployeesEditing=!1,this.saveEmployeesPressed=!1,this.employees=this.company.employees.filter((e=>""!=e)),console.log(this.employees);var e=document.getElementsByClassName("employees-mail"),t=0;Array.from(e).forEach((e=>{e.value=this.employees[t],e.classList.remove("is-valid"),e.classList.remove("is-invalid"),t++}))}}};const Ho=(0,I.Z)(Qo,[["render",Vt],["__scopeId","data-v-3e256851"]]);var Wo=Ho;const Go=e=>((0,a.dD)("data-v-8a62037a"),e=e(),(0,a.Cn)(),e),Yo={class:"row"},jo={class:"col-lg-6 col-xl-4"},Xo={class:"overview"},Jo={class:"col-lg-6 col-xl-4"},$o={class:"details"},en={class:"input-group mb-1"},tn=Go((()=>(0,a._)("span",{span:"",class:"input-group-text"},[(0,a._)("i",{class:"fa fa-user"})],-1))),sn=["value"],an={class:"input-group mb-3"},rn=Go((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa fa-envelope"})],-1))),on=["value"],nn={class:"input-group mb-3"},ln=Go((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-location-dot"})],-1))),cn=["value"],dn={key:0,class:"input-group mb-4"},un=Go((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),hn=["value"],pn={class:"col-lg-6 col-xl-4"},mn={key:0,class:"companies"},vn={class:"accordion",id:"companyAccordion"},gn={class:"accordion-header"},yn=["data-bs-target","aria-controls"],fn=["id"],_n={class:"accordion-body"},wn={class:"company-amount"},bn={key:0,style:{color:"red"}},kn={key:1},En={key:2,style:{color:"green"}},xn={key:1,class:"finished"},Cn=Go((()=>(0,a._)("h5",null,"Lieferung Abgeschlossen",-1))),Dn={class:"input-group mb-4"},In=Go((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),Sn=["value"],An={class:"col-lg-6 col-xl-4"},Bn={key:0,class:"mapWrapper"};function Ln(e,t,i,s,r,o){const n=(0,a.up)("OrderTile"),l=(0,a.up)("CompanyTile"),c=(0,a.up)("ShoppingCartTile"),d=(0,a.up)("MapProvider");return(0,a.wg)(),(0,a.iD)("div",Yo,[(0,a._)("div",jo,[(0,a._)("div",Xo,[(0,a.Wm)(n,{drivers:r.drivers,"complete-data":s.order},null,8,["drivers","complete-data"])])]),(0,a._)("div",Jo,[(0,a._)("div",$o,[(0,a._)("h5",null,"Zu zahlen: "+(0,ee.zw)(this.order.order_price)+" $",1),(0,a._)("div",en,[tn,(0,a._)("input",{type:"text",id:"user-name",class:"form-control",placeholder:"Name",value:this.order.buyer_name,disabled:""},null,8,sn)]),(0,a._)("div",an,[rn,(0,a._)("input",{type:"email",id:"account-mail",class:"form-control","data-regex":"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",placeholder:"Email",value:this.order.buyer_email,disabled:""},null,8,on)]),(0,a._)("div",nn,[ln,(0,a._)("textarea",{type:"text",id:"order-location",class:"form-control",placeholder:"Genaue Beschreibung des Lieferortes",maxlength:"200",style:{resize:"none"},rows:"3",cols:"50",value:this.order.deliver_to,disabled:""},null,8,cn)]),""!=this.order.note?((0,a.wg)(),(0,a.iD)("div",dn,[un,(0,a._)("textarea",{type:"text",id:"order-note",class:"form-control",placeholder:"Anmerkungen zur Lieferung (Sonderwünsche etc.)",required:"",maxlength:"300",style:{resize:"none"},rows:"6",cols:"50",value:this.order.note,disabled:""},null,8,hn)])):(0,a.kq)("",!0)])]),(0,a._)("div",pn,[0==this.loading?((0,a.wg)(),(0,a.iD)("div",mn,[(0,a._)("h5",null,"Kosten: "+(0,ee.zw)(this.order.to_pay)+" $",1),(0,a._)("div",vn,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.order.stacked_company_products,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.company.id,class:"accordion-item"},[(0,a._)("h2",gn,[(0,a._)("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#t"+e.company.id,"aria-expanded":"true","aria-controls":e.company.alias},(0,ee.zw)(e.company.name),9,yn)]),(0,a._)("div",{id:"t"+e.company.id,class:"accordion-collapse collapse","data-bs-parent":"#companyAccordion"},[(0,a._)("div",_n,[(0,a.Wm)(l,{data:e.company,noLink:!1},null,8,["data"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.products,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(c,{data:e},null,8,["data"])])))),128)),(0,a._)("div",wn,[(0,a._)("span",{class:(0,ee.C_)({green:0==e.fee})},(0,ee.zw)(e.amount+" $"),3),e.fee>0?((0,a.wg)(),(0,a.iD)("span",bn,(0,ee.zw)(" - "+e.fee+" $"),1)):(0,a.kq)("",!0),e.fee>0?((0,a.wg)(),(0,a.iD)("span",kn," = ")):(0,a.kq)("",!0),e.fee>0?((0,a.wg)(),(0,a.iD)("span",En,(0,ee.zw)(e.amount-e.fee+" $"),1)):(0,a.kq)("",!0)])])],8,fn)])))),128))])])):(0,a.kq)("",!0),this.order.delivered?((0,a.wg)(),(0,a.iD)("div",xn,[Cn,(0,a._)("div",Dn,[In,(0,a._)("textarea",{type:"text",id:"order-review",class:"form-control",placeholder:"Anmerkungen? Probleme? Feedback?",required:"",maxlength:"300",style:{resize:"none"},rows:"6",cols:"50",disabled:"",value:this.order.review},null,8,Sn)])])):(0,a.kq)("",!0)]),(0,a._)("div",An,[0==this.loading?((0,a.wg)(),(0,a.iD)("div",Bn,[(0,a.Wm)(d,{companies:s.order.companies,class:"map"},null,8,["companies"])])):(0,a.kq)("",!0)])])}const Pn=e=>((0,a.dD)("data-v-d2bbdd2e"),e=e(),(0,a.Cn)(),e),qn={key:0},Rn={class:"date"},Tn=Pn((()=>(0,a._)("i",{class:"fa-solid fa-calendar"},null,-1))),zn={class:"order_info"},Fn={class:"order_time"},Un=Pn((()=>(0,a._)("i",{class:"fa-solid fa-clock"},null,-1))),Vn={class:"buyer_name"},Mn=Pn((()=>(0,a._)("i",{class:"fa-solid fa-user"},null,-1))),On={class:"delivery_info"},Zn=Pn((()=>(0,a._)("i",{class:"fa-solid fa-truck"},null,-1))),Nn={key:0},Kn={key:1,class:"badge text-bg-warning"},Qn={key:2,class:"badge text-bg-danger"},Hn={class:"driver_name"},Wn=Pn((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-regular fa-id-card"})],-1))),Gn=["value"],Yn=Pn((()=>(0,a._)("option",{value:null,selected:""},"Lieferbote",-1))),jn=["value"],Xn={key:1},Jn=Pn((()=>(0,a._)("i",{class:"fa-regular fa-id-card id_card"},null,-1))),$n={class:"deliver_to"},el=Pn((()=>(0,a._)("i",{class:"fa-solid fa-location-dot"},null,-1))),tl={class:"order_details"},il={class:"company_count"},sl=Pn((()=>(0,a._)("i",{class:"fa-solid fa-building"},null,-1))),al={class:"product_count"},rl=Pn((()=>(0,a._)("i",{class:"fa-solid fa-box-open"},null,-1))),ol={class:"order_price"},nl=["disabled"],ll={class:"finished"},cl={key:0,class:"fa-solid fa-truck fa-xl green"},dl={key:1,class:"fa-solid fa-credit-card fa-xl green"};function ul(e,t,i,r,o,n){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.j4)(l,{is:void 0==i.completeData?"router-link":"div",to:n.link},{default:(0,a.w5)((()=>[o.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,ee.C_)(["card",{no_hover:void 0!=i.completeData}])},[void 0!=i.completeData?((0,a.wg)(),(0,a.iD)("h3",qn,"Bestellübersicht")):(0,a.kq)("",!0),(0,a._)("div",null,[(0,a._)("div",Rn,[Tn,(0,a._)("span",null,(0,ee.zw)(this.order.day),1)]),(0,a._)("div",zn,[(0,a._)("div",Fn,[Un,(0,a._)("span",null,(0,ee.zw)(this.order.order_time),1)]),(0,a._)("div",Vn,[Mn,(0,a._)("span",null,(0,ee.zw)(this.order.buyer_name),1)])]),(0,a._)("div",On,[(0,a._)("div",{class:(0,ee.C_)([{green:this.order.duration<=15,red:this.order.duration>15},"delivery_time"])},[Zn,null!=this.order.delivery_time&&""!=this.order.delivery_time?((0,a.wg)(),(0,a.iD)("span",Nn,(0,ee.zw)(this.order.delivery_time),1)):null!=this.order.driver&&null==o.selectedDriver?((0,a.wg)(),(0,a.iD)("span",Kn,"In Bearbeitung")):((0,a.wg)(),(0,a.iD)("span",Qn,"Bote zuweisen"))],2),(0,a._)("div",Hn,[null==this.order.driver||null!=this.order.driver&&null!=this.selectedDriver?((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),class:"input-group input-group-sm"},[Wn,(0,a._)("select",{class:"form-select",id:"order-driver","aria-label":"Default select example",value:r.order.driver,onChange:t[0]||(t[0]=(...e)=>n.selectDriver&&n.selectDriver(...e))},[Yn,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.drivers,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,ee.zw)(e.name),9,jn)))),128))],40,Gn)])):((0,a.wg)(),(0,a.iD)("div",Xn,[Jn,(0,a._)("span",null,(0,ee.zw)(this.order.driver_name),1)]))])])]),(0,a._)("div",$n,[el,(0,a._)("span",null,(0,ee.zw)(this.order.deliver_to),1)]),(0,a._)("div",tl,[(0,a._)("div",il,[sl,(0,a._)("span",null,(0,ee.zw)(this.order.company_count),1)]),(0,a._)("div",al,[rl,(0,a._)("span",null,(0,ee.zw)(this.order.product_count),1)]),(0,a._)("span",ol,(0,ee.zw)(this.order.order_price)+" $",1),null==this.order.driver||null!=this.order.driver&&null!=this.selectedDriver?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[2]||(t[2]=(0,s.iM)(((...e)=>n.confirmOrder&&n.confirmOrder(...e)),["prevent"])),disabled:null==o.selectedDriver,class:"btn btn-primary btn-sm"}," Bestätigen ",8,nl)):(0,a.kq)("",!0),(0,a._)("div",ll,[this.order.delivered?((0,a.wg)(),(0,a.iD)("i",cl)):(0,a.kq)("",!0),this.order.payed?((0,a.wg)(),(0,a.iD)("i",dl)):(0,a.kq)("",!0)])])],2))])),_:1},8,["is","to"])}var hl={name:"OrderTile",props:["data","drivers","completeData"],emits:["stopEditingOrder"],data(){return{loading:!0,selectedDriver:null}},setup(){const e=(0,H.oR)(),t=(0,Kt.qj)({id:null,buyer:null,buyer_name:"",deliver_to:"",products:[],product_count:0,company_count:0,order_price:0,duration:0,note:"",payed:!1,driver:null,driver_name:"",delivered:!1,day:"",order_time:"",delivery_time:""});return{store:e,order:t}},async mounted(){if(null!=this.completeData&&void 0!=this.completeData){this.order=this.completeData;var e=new Date;if(null!=this.order.delivery_time&&""!=this.order.delivery_time)this.order.duration=Xs(this.order.order_time,this.order.delivery_time);else if(e.getDate()!=this.order.day.split(".")[0])this.order.duration=1e4;else{var t=`${e.getHours()}:${e.getMinutes()}`;this.order.duration=Xs(this.order.order_time,t),this.timer=setInterval((()=>{this.order.duration++}),6e4)}return void(this.loading=!1)}if(this.order.id=this.data.id,this.order.buyer=this.data.buyer,this.order.buyer_name=this.data.buyer_name,this.order.deliver_to=this.data.deliver_to,this.order.order_price=this.data.order_price,this.order.note=this.data.note,this.order.payed=this.data.payed,this.order.driver=this.data.driver,this.order.delivered=this.data.delivered,this.order.day=Ys(this.data.day),this.order.order_time=js(this.data.order_time),this.order.delivery_time=js(this.data.delivery_time),this.order.order_products=this.data.order_products,this.order.product_count=0,this.data.order_products.forEach((e=>{this.order.product_count+=e.count})),e=new Date,null!=this.order.delivery_time&&""!=this.order.delivery_time?this.order.duration=Xs(this.order.order_time,this.order.delivery_time):e.getDate()!=this.order.day.split(".")[0]?this.order.duration=1e4:(t=`${e.getHours()}:${e.getMinutes()}`,this.order.duration=Xs(this.order.order_time,t),this.timer=setInterval((()=>{this.order.duration++}),6e4)),null!=this.order.driver){var i=this.drivers.findIndex((e=>e.id==this.order.driver));this.order.driver_name=this.drivers[i].name}const s=[];this.order.order_products.forEach((e=>{s.includes(e.product)||s.push(e.product)}));try{const e=[];{const{data:t,error:i}=await Nt.from("products").select("company_id").in("id",s);if(null!=i)throw i;t.forEach((t=>{e.includes(t.company_id)||e.push(t.company_id)}))}this.order.company_count=e.length}catch(a){console.log(a)}this.loading=!1},computed:{link(){return void 0==this.data?"":`/orders/${this.data.id}`}},methods:{selectDriver(){var e=document.getElementById("order-driver");this.selectedDriver=e.value,this.order.driver=this.selectedDriver},async confirmOrder(){if(null!=this.selectedDriver)try{console.log(this.drivers),this.order.driver_name=this.drivers[this.drivers.findIndex((e=>e.id==this.selectedDriver))].name;const{error:e}=await Nt.from("orders").update({driver:this.selectedDriver}).eq("id",this.order.id);if(null!=e)throw e;this.orde,this.selectedDriver=null}catch(e){console.log(e)}}}};const pl=(0,I.Z)(hl,[["render",ul],["__scopeId","data-v-d2bbdd2e"]]);var ml=pl;const vl=e=>((0,a.dD)("data-v-5e59af7c"),e=e(),(0,a.Cn)(),e),gl={class:"card"},yl={class:"image"},fl={key:0,class:"no-image"},_l=vl((()=>(0,a._)("i",{class:"fa-solid fa-image fa-2xl"},null,-1))),wl=[_l],bl=["src"],kl=["src"],El={class:"row"},xl={class:"col-9 name highlight"},Cl={class:"col-3"},Dl={class:"category highlight"},Il={class:"row"},Sl={class:"col-9 location"},Al=vl((()=>(0,a._)("i",{class:"fa-solid fa-location-dot"},null,-1))),Bl={class:"location-text"};function Ll(e,t,i,s,r,o){const n=(0,a.up)("CompanyBadge"),l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.j4)(l,{to:o.link,is:i.noLink?"span":"router-link",class:"hover"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,ee.C_)(["sizing",{"no-margin":i.noMargin}])},[(0,a._)("div",gl,[(0,a._)("div",yl,[null==this.picture&&void 0==i.data.image?((0,a.wg)(),(0,a.iD)("div",fl,wl)):void 0!=i.data.image?((0,a.wg)(),(0,a.iD)("img",{key:1,src:i.data.image,alt:""},null,8,bl)):((0,a.wg)(),(0,a.iD)("img",{key:2,src:r.picture,alt:""},null,8,kl))]),(0,a._)("div",El,[(0,a._)("h2",xl,(0,ee.zw)(i.data.name),1),(0,a._)("div",Cl,[(0,a.Wm)(n,{verified:i.data.verified,premium:"Business"==i.data.abo,self:"schillerando"==i.data.alias,class:"company-badge"},null,8,["verified","premium","self"])])]),(0,a._)("div",Dl,(0,ee.zw)(i.data.categories[0]),1),(0,a._)("div",Il,[(0,a._)("div",Sl,[Al,(0,a._)("div",Bl,(0,ee.zw)(i.data.location),1)])])])],2)])),_:1},8,["to","is"])}var Pl={name:"CompanyTile",props:["data","noMargin","noLink"],data(){return{picture:null}},setup(){const e=(0,H.oR)();return{store:e}},components:{CompanyBadge:ui},async mounted(){if(void 0==this.data.image&&null!=this.data.header_picture){const e=await Nt.storage.from("public/sellers-headings").download(this.data.header_picture);null!=e.data&&(this.picture=await e.data.text()),e.error&&console.warn(e.error)}},computed:{link(){return"admin"==this.store.getters.getUser.role?`/${this.data.alias}`:`https://schillerando.de/${this.data.alias}`}}};const ql=(0,I.Z)(Pl,[["render",Ll],["__scopeId","data-v-5e59af7c"]]);var Rl=ql;const Tl=e=>((0,a.dD)("data-v-53977fc6"),e=e(),(0,a.Cn)(),e),zl={key:0,class:"card"},Fl={class:"main"},Ul={class:"image"},Vl={key:0,class:"no-image"},Ml=Tl((()=>(0,a._)("i",{class:"fa-solid fa-image fa-2xl"},null,-1))),Ol=[Ml],Zl=["src"],Nl={class:"info"},Kl={class:"name"},Ql={key:0,class:"company_name"},Hl={class:"price"},Wl={key:0,class:"input-group input-group-sm count"},Gl=Tl((()=>(0,a._)("i",{color:"red",class:"fa-solid fa-trash-can"},null,-1))),Yl=[Gl],jl=["value"],Xl={key:2,class:"input-group-text"},Jl=["disabled"],$l={key:1},ec={class:"checkout-count"},tc={key:0,class:"main row"},ic=Tl((()=>(0,a._)("div",{class:"left col col-4"},[(0,a._)("p",{class:"title"},"Variation")],-1))),sc={class:"right col"},ac={class:"variation"},rc={key:1,class:"main row"},oc=Tl((()=>(0,a._)("div",{class:"left col col-4"},[(0,a._)("p",{class:"title"},"Extras")],-1))),nc={class:"right col col-8"},lc={class:"variation"},cc={key:0};function dc(e,t,i,s,r,o){return null!=this.data&&void 0!=this.data?((0,a.wg)(),(0,a.iD)("div",zl,[(0,a._)("div",Fl,[(0,a._)("div",Ul,[null==this.image?((0,a.wg)(),(0,a.iD)("div",Vl,Ol)):((0,a.wg)(),(0,a.iD)("img",{key:1,src:this.image,alt:"Produkt Bild"},null,8,Zl))]),(0,a._)("div",Nl,[(0,a._)("div",null,[(0,a._)("p",Kl,(0,ee.zw)(i.data.name),1)]),(0,a._)("div",null,[void 0!=i.data.company?((0,a.wg)(),(0,a.iD)("p",Ql,(0,ee.zw)(i.data.company.name),1)):(0,a.kq)("",!0)]),(0,a._)("p",Hl,(0,ee.zw)(i.data.price)+" $",1),1==i.editable?((0,a.wg)(),(0,a.iD)("div",Wl,[1==r.count?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[0]||(t[0]=t=>e.countDown(!0)),class:"input-group-text"},Yl)):((0,a.wg)(),(0,a.iD)("button",{key:1,onClick:t[1]||(t[1]=(...t)=>e.countDown&&e.countDown(...t)),class:"input-group-text"},"-")),(0,a._)("input",{disabled:"",id:"countInput",style:{"background-color":"white"},value:r.count,type:"number",class:"form-control","aria-label":"Anzahl an Produkten",min:"1",max:"9"},null,8,jl),9==r.count?((0,a.wg)(),(0,a.iD)("button",Xl,"     ")):((0,a.wg)(),(0,a.iD)("button",{key:3,disabled:r.count>=9,onClick:t[2]||(t[2]=(...t)=>e.countUp&&e.countUp(...t)),class:"input-group-text"}," + ",8,Jl))])):((0,a.wg)(),(0,a.iD)("div",$l,[(0,a._)("p",ec,(0,ee.zw)(r.count)+"x",1)]))])]),i.data.has_variations?((0,a.wg)(),(0,a.iD)("div",tc,[ic,(0,a._)("div",sc,[(0,a._)("p",ac,(0,ee.zw)(this.data.variations.find((e=>e.id==i.data.variation)).name),1)])])):(0,a.kq)("",!0),void 0!=i.data.picked_extras&&i.data.picked_extras.length>0?((0,a.wg)(),(0,a.iD)("div",rc,[oc,(0,a._)("div",nc,[(0,a._)("p",lc,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.extras,(e=>((0,a.wg)(),(0,a.iD)("span",{key:e.id},[(0,a.Uk)((0,ee.zw)(e.name),1),r.extras.indexOf(e)!=r.extras.length-1?((0,a.wg)(),(0,a.iD)("span",cc,", ")):(0,a.kq)("",!0)])))),128))])])])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)}var uc={name:"ShoppingCartTile",props:["data","editable"],setup(){const e=(0,H.oR)();return{store:e}},data(){return{image:null,count:null,extras:[]}},async mounted(){if(this.count=this.data.count,console.log(this.data),void 0!=this.data.picked_extras&&null!=this.data.picked_extras&&(this.data.picked_extras.forEach((e=>{this.extras.push(this.data.extras.find((t=>t.id==e)))})),this.extras.sort(((e,t)=>e.name.localeCompare(t.name)))),null!=this.data.product_picture){const e=await Nt.storage.from("public/products-pictures").download(this.data.product_picture);null!=e.data&&(this.image=await e.data.text()),e.error&&console.warn(e.error)}}};const hc=(0,I.Z)(uc,[["render",dc],["__scopeId","data-v-53977fc6"]]);var pc=hc;const mc=e=>((0,a.dD)("data-v-182f5f64"),e=e(),(0,a.Cn)(),e),vc=mc((()=>(0,a._)("canvas",{id:"test",width:"145",height:"225"},null,-1))),gc=mc((()=>(0,a._)("div",{id:"mapContainer"},null,-1))),yc=mc((()=>(0,a._)("div",{id:"error",style:{display:"none"}},"Karte nicht verfügbar",-1))),fc=[vc,gc,yc];function _c(e,t,i,s,r,o){return(0,a.wg)(),(0,a.iD)("div",null,fc)}var wc={name:"MapProvider",props:["data","companies"],emits:["pickCompany"],setup(){var e=new Image;return e.src=i(4380),{pin:e}},computed:{standardizedPositions(){return null===this.$props.data?[{position:[0,0]}]:this.$props.data},center(){return 1===this.standardizedPositions.length?this.standardizedPositions[0]:{position:[48.935283,9.2627305]}}},async mounted(){if(null!=this.data||null!=this.companies){var e=document.getElementById("mapContainer");if(console.log(e.clientWidth),e.clientWidth<450)var t=17;else t=18;var i=[48.93510181358248,9.262896180152895],s=Oo().map("mapContainer").setView(i,t);if(s.setZoom(t),Oo().tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:22,minZoom:16,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(s),window.addEventListener("resize",(function(){var e=document.getElementById("mapContainer").clientWidth;e<450?s.setZoom(17):s.setZoom(18)})),"geolocation"in navigator){var a=Oo().circleMarker([0,0]).addTo(s);navigator.geolocation.watchPosition((e=>{a.setLatLng([e.coords.latitude,e.coords.longitude])}))}else console.log(!1);s.on("click",(e=>{console.log(e.latlng)}))}else document.getElementById("mapContainer").style.display="none",document.getElementById("error").style.display="block",console.log("Illegal positions-data");null!=this.data&&this.data.forEach((async e=>{console.log(e);var t=await this.buildIcon(e.image);Oo().marker([e.position[0],e.position[1]],{icon:t}).addTo(s)})),console.log(this.companies),null!=this.companies&&this.companies.forEach((async e=>{if(void 0!=e.coordinates&&null!=e.coordinates&&2==e.coordinates.length){var t=null;if(void 0!=e.header_picture&&null!=e.header_picture){const i=await Nt.storage.from("public/sellers-headings").download(e.header_picture);null!=i.data&&(t=await i.data.text()),i.error&&console.warn(i.error)}var i=await this.buildIcon(t);Oo().marker([e.coordinates[0],e.coordinates[1]],{icon:i}).addTo(s).on("click",(()=>{var i=e;i.image=t,this.$emit("pickCompany",i)}))}}))},methods:{onMapClick(e){console.log(e)},async buildIcon(e){var t=document.getElementById("test"),i=t.getContext("2d");if(null==e){let e=Oo().icon({iconUrl:this.pin.src,iconSize:[29,45],iconAnchor:[14.5,45]});return e}await new Promise((e=>setTimeout(e,50)));var s=new Image;s.src=e,i.drawImage(this.pin,0,0,145,225);var a=135,r=135,o=(145-a)/2,n=(145-a)/2;if(i.beginPath(),i.arc(o+a/2,n+r/2,a/2,0,10),i.clip(),s.width>s.height)var l=s.height/a,c=s.width/l,d=r,u=(a-c)/2,h=n;else l=s.width/a,d=s.height/l,c=a,u=o,h=(r-d)/2;i.drawImage(s,u,h,c,d);var p=t.toDataURL("image/png");i.clearRect(0,0,t.width,t.height);let m=Oo().icon({iconUrl:p,iconSize:[29,45],iconAnchor:[14.5,45]});return m}}};const bc=(0,I.Z)(wc,[["render",_c],["__scopeId","data-v-182f5f64"]]);var kc=bc,Ec={name:"OrderDetailView",components:{OrderTile:ml,CompanyTile:Rl,ShoppingCartTile:pc,MapProvider:kc},data(){return{drivers:[],loading:!0,alertTitle:"",alertInfo:"",successAlertTitle:"Erfolgreich",successAlertInfo:"Aktion wurde erfolgreich durchgeführt",failureAlertTitle:"Fehler",failureAlertInfo:"Es ist ein Fehler aufgetreten!"}},setup(){const e=(0,H.oR)(),t=(0,Kt.qj)({id:null,buyer:null,buyer_name:"",buyer_email:"",deliver_to:"",products:[],stacked_company_products:[],product_count:0,company_count:0,companies:[],order_price:0,to_pay:0,duration:0,note:"",payed:!1,driver:null,driver_name:"",delivered:!1,day:"",order_time:"",delivery_time:""});return{store:e,order:t}},computed:{orderData(){var e=this.store.state.orders,t=e.findIndex((e=>e.id==this.$route.params.orderid)),i=e[t];return i}},async mounted(){this.order.id=this.orderData.id,this.order.buyer=this.orderData.buyer,this.order.buyer_name=this.orderData.buyer_name,this.order.deliver_to=this.orderData.deliver_to,this.order.order_price=this.orderData.order_price,this.order.note=this.orderData.note,this.order.review=this.orderData.review,this.order.payed=this.orderData.payed,this.order.driver=this.orderData.driver,this.order.delivered=this.orderData.delivered,this.order.day=Ys(this.orderData.day),this.order.order_time=js(this.orderData.order_time),this.order.delivery_time=js(this.orderData.delivery_time),this.order.order_products=this.orderData.order_products,this.order.product_count=0,this.orderData.order_products.forEach((e=>{this.order.product_count+=e.count}));try{const{data:e,error:t}=await Nt.from("users").select("email").eq("id",this.orderData.buyer);if(t)throw t;this.order.buyer_email=e[0].email}catch(u){return void console.log(u)}if(null!=this.order.delivery_time&&""!=this.order.delivery_time)this.order.duration=Xs(this.order.order_time,this.order.delivery_time);else{var e=new Date,t=`${e.getHours()}:${e.getMinutes()}`;this.order.duration=Xs(this.order.order_time,t),this.timer=setInterval((()=>{this.order.duration++}),6e4)}{const{data:e,error:t}=await Nt.from("user_roles").select();if(t)throw t;this.drivers=e}if(null!=this.order.driver){var i=this.drivers.findIndex((e=>e.id==this.order.driver));this.order.driver_name=this.drivers[i].name}console.log(this.order);var s=0,a=[],r=[],o=[];try{this.order.order_products.forEach((async e=>{a.includes(e.product)||a.push(e.product),null==e.variation||r.includes(e.variation)||r.push(e.variation),null!=e.extras&&e.extras.forEach((e=>{o.includes(e)||o.push(e)}))}));var n=[],l=[],c=[];const{data:e,error:t}=await Nt.from("products").select("*, companies(*)").filter("id","in","("+a+")");if(t)throw t;n=e;{const{data:e,error:t}=await Nt.from("product_variations").select().filter("id","in","("+r+")");if(t)throw t;l=e}{const{data:e,error:t}=await Nt.from("product_extras").select().filter("id","in","("+o+")");if(t)throw t;c=e}for(var d=0;d<n.length;d++)n[d].variations=l,n[d].extras=c;this.order.order_products.forEach((e=>{var t=n.find((t=>t.id==e.product));t.count=e.count,t.variation=e.variation,t.picked_extras=e.extras,t.price=e.price;var i=this.order.stacked_company_products.findIndex((e=>e.company.id==t.company_id));if(-1==i){this.order.company_count++;var a=t.companies;this.order.stacked_company_products.push({company:a,products:[t],amount:t.price*t.count,fee:0});var r=this.order.stacked_company_products.findIndex((e=>e.company.id==t.company_id));this.order.companies.push(a),"Standard"==a.abo?(this.order.stacked_company_products[r].fee=Math.round(t.price*t.count*.05),this.order.to_pay+=t.price*t.count-this.order.stacked_company_products[r].fee):this.order.to_pay+=t.price*t.count,s+=t.count}else this.order.stacked_company_products[i].products.push(t),this.order.stacked_company_products[i].amount+=t.price*t.count,"Standard"==this.order.stacked_company_products[i].company.abo?(this.order.stacked_company_products[r].fee+=Math.round(t.price*t.count*.05),this.order.to_pay+=t.price*t.count*.95-this.order.stacked_company_products[r].fee):this.order.to_pay+=t.price*t.count,s+=t.count})),this.loading=!1,console.log(s),console.log(this.order.stacked_company_products)}catch(u){console.log(u)}},watch:{orderData(){this.updateOrder()}},methods:{updateOrder(){if(void 0!=this.orderData&&(this.order.payed=this.orderData.payed,this.order.delivered=this.orderData.delivered,this.order.driver=this.orderData.driver,this.drivers.length>0&&null!=this.order.driver)){var e=this.drivers.findIndex((e=>e.id==this.order.driver));this.order.driver_name=this.drivers[e].name}}}};const xc=(0,I.Z)(Ec,[["render",Ln],["__scopeId","data-v-8a62037a"]]);var Cc=xc;const Dc=e=>((0,a.dD)("data-v-1894a926"),e=e(),(0,a.Cn)(),e),Ic={key:0,class:"row"},Sc={class:"col-lg-6 col-xl-4"},Ac={class:"overview"},Bc={class:"company_tile"},Lc={class:"col-lg-6 col-xl-4"},Pc={class:"details"},qc={class:"input-group mb-1"},Rc=Dc((()=>(0,a._)("span",{span:"",class:"input-group-text"},[(0,a._)("i",{class:"fa fa-user"})],-1))),Tc=["value"],zc={class:"input-group mb-3"},Fc=Dc((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa fa-envelope"})],-1))),Uc=["value"],Vc={class:"input-group mb-3"},Mc=Dc((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-location-dot"})],-1))),Oc=["value"],Zc={key:0,class:"input-group mb-4"},Nc=Dc((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),Kc=["value"],Qc={class:"col-lg-6 col-xl-4"},Hc={key:0,class:"finished"},Wc=Dc((()=>(0,a._)("h5",null,"Service Abgeschlossen",-1))),Gc={class:"input-group mb-4"},Yc=Dc((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),jc=["value"];function Xc(e,t,i,s,r,o){const n=(0,a.up)("ServiceTile"),l=(0,a.up)("CompanyTile");return null!=this.service?((0,a.wg)(),(0,a.iD)("div",Ic,[(0,a._)("div",Sc,[(0,a._)("div",Ac,[(0,a.Wm)(n,{drivers:r.drivers,"complete-data":r.service},null,8,["drivers","complete-data"]),(0,a._)("div",Bc,[(0,a.Wm)(l,{data:r.service.companies},null,8,["data"])])])]),(0,a._)("div",Lc,[(0,a._)("div",Pc,[(0,a._)("h5",null,"Zu zahlen: "+(0,ee.zw)(this.service.price)+" $",1),(0,a._)("div",qc,[Rc,(0,a._)("input",{type:"text",id:"user-name",class:"form-control",placeholder:"Name",value:this.service.buyer_name,disabled:""},null,8,Tc)]),(0,a._)("div",zc,[Fc,(0,a._)("input",{type:"email",id:"account-mail",class:"form-control","data-regex":"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",placeholder:"Email",value:this.service.buyer_email,disabled:""},null,8,Uc)]),(0,a._)("div",Vc,[Mc,(0,a._)("textarea",{type:"text",id:"service-location",class:"form-control",placeholder:"Genaue Beschreibung des Lieferortes",maxlength:"200",style:{resize:"none"},rows:"3",cols:"50",value:this.service.companies.location,disabled:""},null,8,Oc)]),""!=this.service.note?((0,a.wg)(),(0,a.iD)("div",Zc,[Nc,(0,a._)("textarea",{type:"text",id:"service-note",class:"form-control",placeholder:"Anmerkungen zum Service",required:"",maxlength:"300",style:{resize:"none"},rows:"6",cols:"50",value:this.service.note,disabled:""},null,8,Kc)])):(0,a.kq)("",!0)])]),(0,a._)("div",Qc,[this.service.finished?((0,a.wg)(),(0,a.iD)("div",Hc,[Wc,(0,a._)("div",Gc,[Yc,(0,a._)("textarea",{type:"text",id:"service-review",class:"form-control",placeholder:"Anmerkungen? Probleme? Feedback?",required:"",maxlength:"300",style:{resize:"none"},rows:"6",cols:"50",disabled:"",value:this.service.review},null,8,jc)])])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0)}const Jc=e=>((0,a.dD)("data-v-4f1a5a90"),e=e(),(0,a.Cn)(),e),$c={key:0},ed={class:"order_info"},td={class:"date"},id=Jc((()=>(0,a._)("i",{class:"fa-solid fa-calendar"},null,-1))),sd={class:"order_time"},ad=Jc((()=>(0,a._)("i",{class:"fa-solid fa-clock"},null,-1))),rd={class:"buyer_name"},od={class:"company_name"},nd={class:"delivery_info"},ld=Jc((()=>(0,a._)("i",{class:"fa-solid fa-people-arrows"},null,-1))),cd={key:0},dd={key:1,class:"badge text-bg-warning"},ud={key:2,class:"badge text-bg-danger"},hd={key:0,class:"delivery_time"},pd=Jc((()=>(0,a._)("i",{class:"fa-solid fa-truck"},null,-1))),md={key:0},vd={key:1,class:"badge text-bg-warning"},gd={class:"driver_name"},yd=Jc((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-regular fa-id-card"})],-1))),fd=["value"],_d=Jc((()=>(0,a._)("option",{value:null,selected:""},"Lieferbote",-1))),wd=["value"],bd={key:1},kd=Jc((()=>(0,a._)("i",{class:"fa-regular fa-id-card id_card"},null,-1))),Ed={class:"deliver_to"},xd=Jc((()=>(0,a._)("i",{class:"fa-solid fa-location-dot"},null,-1))),Cd={class:"order_details"},Dd={class:"order_price"},Id=["disabled"],Sd={class:"finished"},Ad={key:0,class:"fa-solid fa-truck fa-xl green"},Bd={key:1,class:"fa-solid fa-credit-card fa-xl green"};function Ld(e,t,i,r,o,n){const l=(0,a.up)("CompanyBadge"),c=(0,a.up)("router-link");return(0,a.wg)(),(0,a.j4)(c,{is:void 0==i.completeData?"router-link":"div",to:n.link},{default:(0,a.w5)((()=>[o.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,ee.C_)(["card",{no_hover:void 0!=i.completeData}])},[void 0!=i.completeData?((0,a.wg)(),(0,a.iD)("h3",$c,(0,ee.zw)(o.service.type),1)):(0,a.kq)("",!0),(0,a._)("div",null,[(0,a._)("div",ed,[(0,a._)("div",td,[id,(0,a._)("span",null,(0,ee.zw)(this.service.date),1)]),(0,a._)("div",sd,[ad,(0,a._)("span",null,(0,ee.zw)(this.service.booked_time),1)]),(0,a._)("div",rd,[(0,a.Wm)(l,{class:"company_badge",premium:"Business"==this.service.companies.abo,verified:!0},null,8,["premium"]),(0,a._)("span",od,(0,ee.zw)(this.service.companies.name),1)])]),(0,a._)("div",nd,[(0,a._)("div",{class:(0,ee.C_)([{green:this.service.duration<=15,red:this.service.duration>15},"delivery_time"])},[ld,null!=this.service.contact_time&&""!=this.service.contact_time?((0,a.wg)(),(0,a.iD)("span",cd,(0,ee.zw)(this.service.contact_time),1)):null!=this.service.driver&&null==o.selectedDriver&&null==this.service.contact_time?((0,a.wg)(),(0,a.iD)("span",dd,"In Bearbeitung")):null==this.service.driver?((0,a.wg)(),(0,a.iD)("span",ud,"Bote zuweisen")):(0,a.kq)("",!0)],2),null!=this.service.contact_time&&""!=this.service.contact_time?((0,a.wg)(),(0,a.iD)("div",hd,[pd,null!=this.service.finished_time&&""!=this.service.finished_time?((0,a.wg)(),(0,a.iD)("span",md,(0,ee.zw)(this.service.finished_time),1)):null!=this.service.driver&&null==o.selectedDriver?((0,a.wg)(),(0,a.iD)("span",vd,"Wird ausgeführt")):(0,a.kq)("",!0)])):(0,a.kq)("",!0),(0,a._)("div",gd,[null==this.service.driver||null!=this.service.driver&&null!=this.selectedDriver?((0,a.wg)(),(0,a.iD)("div",{key:0,onClick:t[1]||(t[1]=(0,s.iM)((()=>{}),["prevent"])),class:"input-group input-group-sm"},[yd,(0,a._)("select",{class:"form-select",id:"service-driver","aria-label":"Default select example",value:o.service.driver,onChange:t[0]||(t[0]=(...e)=>n.selectDriver&&n.selectDriver(...e))},[_d,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.drivers,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,ee.zw)(e.name),9,wd)))),128))],40,fd)])):((0,a.wg)(),(0,a.iD)("div",bd,[kd,(0,a._)("span",null,(0,ee.zw)(this.service.driver_name),1)]))])])]),(0,a._)("div",Ed,[xd,(0,a._)("span",null,(0,ee.zw)(this.service.companies.location),1)]),(0,a._)("div",Cd,[(0,a._)("span",Dd,(0,ee.zw)(this.service.price)+" $",1),null==this.service.driver||null!=this.service.driver&&null!=this.selectedDriver?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:t[2]||(t[2]=(0,s.iM)(((...e)=>n.confirmService&&n.confirmService(...e)),["prevent"])),disabled:null==o.selectedDriver,class:"btn btn-primary btn-sm"}," Bestätigen ",8,Id)):(0,a.kq)("",!0),(0,a._)("div",Sd,[this.service.finished?((0,a.wg)(),(0,a.iD)("i",Ad)):(0,a.kq)("",!0),this.service.payed?((0,a.wg)(),(0,a.iD)("i",Bd)):(0,a.kq)("",!0)])])],2))])),_:1},8,["is","to"])}var Pd={name:"ServiceTile",props:["data","drivers","completeData"],emits:["stopEditingService"],components:{CompanyBadge:ui},data(){return{loading:!0,selectedDriver:null,service:null}},setup(){const e=(0,H.oR)();return{store:e}},async mounted(){if(null==this.completeData||void 0==this.completeData){if(this.service=this.data,this.service.date=Ys(this.data.date),this.service.booked_time=js(this.data.booked_time),this.service.contact_time=js(this.data.contact_time),this.service.finished_time=js(this.data.finished_time),t=new Date,null!=this.service.contact_time&&""!=this.service.contact_time?this.service.duration=Xs(this.service.booked_time,this.service.contact_time):t.getDate()!=this.service.date.split(".")[0]?this.service.duration=1e4:(i=`${t.getHours()}:${t.getMinutes()}`,this.service.duration=Xs(this.service.booked_time,i),this.timer=setInterval((()=>{this.service.duration++}),6e4)),null!=this.service.driver){var e=this.drivers.findIndex((e=>e.id==this.service.driver));this.service.driver_name=this.drivers[e].name}this.loading=!1}else{this.service=this.completeData;var t=new Date;if(null!=this.service.contact_time&&""!=this.service.contact_time)this.service.duration=Xs(this.service.booked_time,this.service.contact_time);else if(t.getDate()!=this.service.date.split(".")[0])this.service.duration=1e4;else{var i=`${t.getHours()}:${t.getMinutes()}`;this.service.duration=Xs(this.service.booked_time,i),this.timer=setInterval((()=>{this.service.duration++}),6e4)}this.loading=!1}},computed:{link(){return void 0==this.data?"":`/services/${this.data.id}`}},methods:{selectDriver(){var e=document.getElementById("service-driver");this.selectedDriver=e.value,this.service.driver=this.selectedDriver},async confirmService(){if(null!=this.selectedDriver)try{this.service.driver_name=this.drivers[this.drivers.findIndex((e=>e.id==this.selectedDriver))].name;const{error:e}=await Nt.from("booked_services").update({driver:this.selectedDriver}).eq("id",this.service.id);if(null!=e)throw e;this.selectedDriver=null}catch(e){console.log(e)}}}};const qd=(0,I.Z)(Pd,[["render",Ld],["__scopeId","data-v-4f1a5a90"]]);var Rd=qd;const Td=e=>((0,a.dD)("data-v-6da78646"),e=e(),(0,a.Cn)(),e),zd={class:"card"},Fd={class:"image"},Ud={key:0,class:"no-image"},Vd=Td((()=>(0,a._)("i",{class:"fa-solid fa-image fa-2xl"},null,-1))),Md=[Vd],Od=["src"],Zd=["src"],Nd={class:"row"},Kd={class:"col-9 name highlight"},Qd={class:"col-3"},Hd={class:"category highlight"},Wd={class:"row"},Gd={class:"col-9 location"},Yd=Td((()=>(0,a._)("i",{class:"fa-solid fa-location-dot"},null,-1))),jd={class:"location-text"};function Xd(e,t,i,s,r,o){const n=(0,a.up)("CompanyBadge"),l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.j4)(l,{to:o.link,is:i.noLink?"span":"router-link",class:"hover"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,ee.C_)(["sizing",{"no-margin":i.noMargin}])},[(0,a._)("div",zd,[(0,a._)("div",Fd,[null==this.picture&&void 0==i.data.image?((0,a.wg)(),(0,a.iD)("div",Ud,Md)):void 0!=i.data.image?((0,a.wg)(),(0,a.iD)("img",{key:1,src:i.data.image,alt:""},null,8,Od)):((0,a.wg)(),(0,a.iD)("img",{key:2,src:r.picture,alt:""},null,8,Zd))]),(0,a._)("div",Nd,[(0,a._)("h2",Kd,(0,ee.zw)(i.data.name),1),(0,a._)("div",Qd,[(0,a.Wm)(n,{verified:i.data.verified,premium:"Business"==i.data.abo,self:"schillerando"==i.data.alias,class:"company-badge"},null,8,["verified","premium","self"])])]),(0,a._)("div",Hd,(0,ee.zw)(i.data.categories[0]),1),(0,a._)("div",Wd,[(0,a._)("div",Gd,[Yd,(0,a._)("div",jd,(0,ee.zw)(i.data.location),1)])])])],2)])),_:1},8,["to","is"])}var Jd={name:"CompanyTile",props:["data","noMargin","noLink"],data(){return{picture:null}},components:{CompanyBadge:ui},async mounted(){if(void 0==this.data.image&&null!=this.data.header_picture){const e=await Nt.storage.from("public/sellers-headings").download(this.data.header_picture);null!=e.data&&(this.picture=await e.data.text()),e.error&&console.warn(e.error)}},computed:{link(){return`/${this.data.alias}`}}};const $d=(0,I.Z)(Jd,[["render",Xd],["__scopeId","data-v-6da78646"]]);var eu=$d,tu={name:"ServiceDetailView",components:{ServiceTile:Rd,CompanyTile:eu},data(){return{drivers:[],service:null,loading:!0,alertTitle:"",alertInfo:"",successAlertTitle:"Erfolgreich",successAlertInfo:"Aktion wurde erfolgreich durchgeführt",failureAlertTitle:"Fehler",failureAlertInfo:"Es ist ein Fehler aufgetreten!"}},setup(){const e=(0,H.oR)();return{store:e}},computed:{serviceData(){var e=this.store.state.services,t=e.findIndex((e=>e.id==this.$route.params.serviceid));console.log(this.$route.params.serviceid);var i=e[t];return i}},async mounted(){this.service=this.serviceData,this.service.date=Ys(this.serviceData.date),this.service.booked_time=js(this.serviceData.booked_time),this.service.contact_time=js(this.serviceData.contact_time),this.service.finished_time=js(this.serviceData.finished_time);try{const{data:e,error:t}=await Nt.from("users").select("email").eq("id",this.serviceData.buyer);if(t)throw t;this.service.buyer_email=e[0].email}catch(s){return void console.log(s)}if(null!=this.service.contact_time&&""!=this.service.contact_time)this.service.duration=Xs(this.service.booked_time,this.service.contact_time);else{var e=new Date,t=`${e.getHours()}:${e.getMinutes()}`;this.service.duration=Xs(this.service.booked_time,t),this.timer=setInterval((()=>{this.service.duration++}),6e4)}{const{data:e,error:t}=await Nt.from("user_roles").select();if(t)throw t;this.drivers=e}if(null!=this.service.driver){var i=this.drivers.findIndex((e=>e.id==this.service.driver));this.service.driver_name=this.drivers[i].name}},watch:{serviceData(){this.updateService()}},methods:{updateService(){if(void 0!=this.serviceData&&(this.service.payed=this.serviceData.payed,this.service.finished=this.serviceData.delivered,this.service.driver=this.serviceData.driver,this.drivers.length>0&&null!=this.service.driver)){var e=this.drivers.findIndex((e=>e.id==this.service.driver));this.service.driver_name=this.drivers[e].name}}}};const iu=(0,I.Z)(tu,[["render",Xc],["__scopeId","data-v-1894a926"]]);var su=iu;const au=e=>((0,a.dD)("data-v-366d86d0"),e=e(),(0,a.Cn)(),e),ru={key:0},ou={class:"row"},nu={class:"col-lg-6"},lu={class:"overview"},cu={class:"col-lg-6"},du={class:"mx-3"},uu={class:"form-check mt-4"},hu=au((()=>(0,a._)("label",{class:"form-check-label",for:"acceptCheck"}," Kunde hat die Lieferung entgegen genommen ",-1))),pu={class:"form-check mt-2 mb-4"},mu=au((()=>(0,a._)("label",{class:"form-check-label",for:"acceptCheck"}," Kunde hat den vollen Preis der Lieferung bezahlt ",-1))),vu={class:"input-group mb-4"},gu=au((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),yu=["value"],fu=au((()=>(0,a._)("div",{class:"loading-button"},"Bestätigen",-1))),_u=au((()=>(0,a._)("div",{class:"spinner"},[(0,a._)("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),(0,a._)("span",{class:"sr-only"},"Loading...")],-1))),wu=[fu,_u],bu={key:1,class:"m-4"};function ku(e,t,i,s,r,o){const n=(0,a.up)("OrderTile");return null==r.order||r.loading?r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("h4",bu,(0,ee.zw)(r.error),1)):((0,a.wg)(),(0,a.iD)("div",ru,[(0,a._)("div",ou,[(0,a._)("div",nu,[(0,a._)("div",lu,[(0,a.Wm)(n,{data:this.order,drivers:this.drivers},null,8,["data","drivers"])])]),(0,a._)("div",cu,[(0,a._)("form",du,[(0,a._)("div",uu,[(0,a._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"order-check1",onChange:t[0]||(t[0]=e=>o.validateOrder(!1))},null,32),hu]),(0,a._)("div",pu,[(0,a._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"order-check2",onChange:t[1]||(t[1]=e=>o.validateOrder(!1))},null,32),mu]),(0,a._)("div",vu,[gu,(0,a._)("textarea",{type:"text",id:"order-review",class:"form-control",placeholder:"Anmerkungen? Probleme? Feedback?",required:"",maxlength:"300",style:{resize:"none"},rows:"6",cols:"50",value:this.order.review},null,8,yu)])]),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=e=>o.validateOrder(!0)),class:"btn btn-primary order-button mx-3"},wu)])])]))}var Eu={name:"OrderConfirmView",components:{OrderTile:ml},data(){return{order:null,drivers:null,loading:!0,error:"Fehler",confirmPressed:!1}},setup(){const e=(0,H.oR)();return{store:e}},async mounted(){try{const{data:e,error:t}=await Nt.from("orders").select().eq("id",this.$route.params.orderid);if(t)throw t;0==e.length&&(this.error="Lieferung nicht gefunden"),this.order=e[0],this.$route.query.user_id!=this.order.buyer?(this.error="Nutzerdaten falsch",this.order=null):null==this.order.driver?(this.error="Lieferung wird noch zugewiesen",this.order=null):1==this.order.payed&&1==this.order.delivered&&(this.error="Lieferung wurde schon bestätigt",this.order=null);{const{data:e,error:t}=await Nt.from("user_roles").select();if(t)throw t;this.drivers=e}}catch(e){console.log(e)}this.loading=!1},methods:{validateOrder(e){if(e||this.confirmPressed){var t=!0,i=document.getElementById("order-check1"),s=document.getElementById("order-check2");i.checked?(i.classList.remove("is-invalid"),i.classList.add("is-valid")):(i.classList.add("is-invalid"),i.classList.remove("is-valid"),t=!1),s.checked?(s.classList.remove("is-invalid"),s.classList.add("is-valid")):(s.classList.add("is-invalid"),s.classList.remove("is-valid"),t=!1),this.confirmPressed=!0,t&&e&&(this.confirmPressed=!1,this.confirmOrder())}},async confirmOrder(){var e=document.getElementById("order-review");try{var t=new Date,i=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();const{error:s}=await Nt.from("orders").update({delivered:!0,payed:!0,review:e.value,delivery_time:i}).eq("id",this.order.id);if(s)throw s;if(this.order.order_price!=this.order.to_pay){const{error:e}=await Nt.from("accounting").insert({company_id:"9d1f8296-4360-4ca8-b19e-9b0823708ec7",user_id:this.store.getters.getUser.id,name:"Lieferung",type:"Verkauf+",info:this.order.id,amount:this.order.order_price-this.order.to_pay}).eq("id",this.order.id);if(e)throw e}}catch(s){console.log(s)}this.$router.push({path:"/orders"})}}};const xu=(0,I.Z)(Eu,[["render",ku],["__scopeId","data-v-366d86d0"]]);var Cu=xu;const Du=e=>((0,a.dD)("data-v-0f24dc39"),e=e(),(0,a.Cn)(),e),Iu={key:0},Su={class:"row"},Au={class:"col-lg-6"},Bu={class:"overview"},Lu={class:"company_tile"},Pu={class:"col-lg-6"},qu={class:"mx-3"},Ru={class:"form-check mt-4"},Tu=Du((()=>(0,a._)("label",{class:"form-check-label",for:"acceptCheck"}," Service wurde entgegen genommen ",-1))),zu={class:"form-check mt-2 mb-4"},Fu=Du((()=>(0,a._)("label",{class:"form-check-label",for:"acceptCheck"}," Kunde hat den vollen Preis des Services bezahlt ",-1))),Uu={class:"input-group mb-4"},Vu=Du((()=>(0,a._)("span",{class:"input-group-text"},[(0,a._)("i",{class:"fa-solid fa-circle-info"})],-1))),Mu=["value"],Ou=Du((()=>(0,a._)("div",{class:"loading-button"},"Bestätigen",-1))),Zu=Du((()=>(0,a._)("div",{class:"spinner"},[(0,a._)("span",{class:"spinner-bservice spinner-bservice-sm",role:"status","aria-hidden":"true"}),(0,a._)("span",{class:"sr-only"},"Loading...")],-1))),Nu=[Ou,Zu],Ku={key:1,class:"m-4"};function Qu(e,t,i,s,r,o){const n=(0,a.up)("ServiceTile"),l=(0,a.up)("CompanyTile");return null==r.service||r.loading?r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("h4",Ku,(0,ee.zw)(r.error),1)):((0,a.wg)(),(0,a.iD)("div",Iu,[(0,a._)("div",Su,[(0,a._)("div",Au,[(0,a._)("div",Bu,[(0,a.Wm)(n,{data:this.service,drivers:this.drivers},null,8,["data","drivers"]),(0,a._)("div",Lu,[(0,a.Wm)(l,{data:r.service.companies},null,8,["data"])])])]),(0,a._)("div",Pu,[(0,a._)("form",qu,[(0,a._)("div",Ru,[(0,a._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"service-check1",onChange:t[0]||(t[0]=e=>o.validateService(!1))},null,32),Tu]),(0,a._)("div",zu,[(0,a._)("input",{class:"form-check-input",type:"checkbox",value:"",id:"service-check2",onChange:t[1]||(t[1]=e=>o.validateService(!1))},null,32),Fu]),(0,a._)("div",Uu,[Vu,(0,a._)("textarea",{type:"text",id:"service-review",class:"form-control",placeholder:"Anmerkungen? Probleme? Feedback?",required:"",maxlength:"300",style:{resize:"none"},rows:"6",cols:"50",value:this.service.review},null,8,Mu)])]),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=e=>o.validateService(!0)),class:"btn btn-primary service-button mx-3"},Nu)])])]))}var Hu={name:"serviceConfirmView",components:{ServiceTile:Rd,CompanyTile:eu},data(){return{service:null,drivers:null,loading:!0,error:"Fehler",confirmPressed:!1}},setup(){const e=(0,H.oR)();return{store:e}},async mounted(){try{const{data:e,error:t}=await Nt.from("booked_services").select("*, companies(*)").eq("id",this.$route.params.serviceid);if(t)throw t;0==e.length&&(this.error="Service nicht gefunden"),this.service=e[0],this.$route.query.user_id!=this.service.buyer?(this.error="Nutzerdaten falsch",this.service=null):null==this.service.driver?(this.error="Service wird noch zugewiesen",this.service=null):1==this.service.payed&&1==this.service.finished&&(this.error="Service wurde schon bestätigt",this.service=null);{const{data:e,error:t}=await Nt.from("user_roles").select();if(t)throw t;this.drivers=e}}catch(e){console.log(e)}this.loading=!1},methods:{validateService(e){if(e||this.confirmPressed){var t=!0,i=document.getElementById("service-check1"),s=document.getElementById("service-check2");i.checked?(i.classList.remove("is-invalid"),i.classList.add("is-valid")):(i.classList.add("is-invalid"),i.classList.remove("is-valid"),t=!1),s.checked?(s.classList.remove("is-invalid"),s.classList.add("is-valid")):(s.classList.add("is-invalid"),s.classList.remove("is-valid"),t=!1),this.confirmPressed=!0,t&&e&&(this.confirmPressed=!1,this.confirmService())}},async confirmService(){var e=document.getElementById("service-review");try{var t=new Date,i=t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();const{error:s}=await Nt.from("booked_services").update({payed:!0,review:e.value,contact_time:i}).eq("id",this.service.id);if(s)throw s;if(0!=this.service.price){const{error:e}=await Nt.from("accounting").insert({company_id:"9d1f8296-4360-4ca8-b19e-9b0823708ec7",user_id:this.store.getters.getUser.id,name:"Service",type:"Verkauf+",info:this.service.id,amount:this.service.price}).eq("id",this.service.id);if(e)throw e}}catch(s){console.log(s)}this.$router.push({path:"/services"})}}};const Wu=(0,I.Z)(Hu,[["render",Qu],["__scopeId","data-v-0f24dc39"]]);var Gu=Wu;const Yu=e=>((0,a.dD)("data-v-e3a00842"),e=e(),(0,a.Cn)(),e),ju={key:0,class:"row"},Xu={class:"col-lg-6 col-xl-4"},Ju={class:"overview"},$u=Yu((()=>(0,a._)("i",{class:"fa-solid fa-envelope fa-lg"},null,-1))),eh={key:0,class:"col-lg-6 col-xl-4"},th={key:1,class:"col-lg-6 col-xl-4"};function ih(e,t,i,s,r,o){const n=(0,a.up)("UserTile"),l=(0,a.up)("CompanyTile"),c=(0,a.up)("OrderTile");return r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",ju,[(0,a._)("div",Xu,[(0,a._)("div",Ju,[(0,a.Wm)(n,{data:r.user,noHover:!0},null,8,["data"]),(0,a._)("button",{class:"btn btn-primary mail",onClick:t[0]||(t[0]=(...e)=>o.mailSelected&&o.mailSelected(...e))},[$u,(0,a.Uk)(" Mail ")])])]),void 0!=r.user.company?((0,a.wg)(),(0,a.iD)("div",eh,[(0,a.Wm)(l,{data:r.user.company},null,8,["data"])])):(0,a.kq)("",!0),void 0!=r.user.orders?((0,a.wg)(),(0,a.iD)("div",th,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.user.orders,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"orders"},[(0,a.Wm)(c,{data:e,drivers:r.drivers},null,8,["data","drivers"])])))),128))])):(0,a.kq)("",!0)]))}const sh=e=>((0,a.dD)("data-v-769ef278"),e=e(),(0,a.Cn)(),e),ah={class:"card"},rh={class:"name"},oh={key:0,class:"fa-solid fa-user-tie fa-md"},nh={class:""},lh={class:"company"},ch={key:0,class:"company"},dh={class:"company-name"},uh={key:1,style:{height:"35px"}},hh={class:"activity"},ph={key:0},mh={key:1},vh=sh((()=>(0,a._)("i",{class:"fa-solid fa-truck"},null,-1)));function gh(e,t,i,s,r,o){const n=(0,a.up)("CompanyBadge"),l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.j4)(l,{to:o.link},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,ee.C_)(["sizing",{"no-hover":i.noHover}])},[(0,a._)("div",ah,[(0,a._)("div",rh,[(0,a.Uk)((0,ee.zw)(i.data.name)+" ",1),i.data.isCompanyLeader?((0,a.wg)(),(0,a.iD)("i",oh)):(0,a.kq)("",!0)]),(0,a._)("div",nh,(0,ee.zw)(i.data.email),1),(0,a._)("div",lh,[void 0!=i.data.company?((0,a.wg)(),(0,a.iD)("div",ch,[(0,a.Wm)(n,{verified:null!=i.data.company.abo&&""!=i.data.company.abo,premium:"Business"==i.data.company.abo,self:"schillerando"==i.data.company.alias,class:"company-badge"},null,8,["verified","premium","self"]),(0,a._)("span",dh,(0,ee.zw)(i.data.company.name),1)])):((0,a.wg)(),(0,a.iD)("div",uh))]),(0,a._)("div",hh,[(0,a._)("div",null,[void 0!=i.data.orders?((0,a.wg)(),(0,a.iD)("span",ph,(0,ee.zw)(i.data.orders.length),1)):((0,a.wg)(),(0,a.iD)("span",mh,"0")),vh])])])],2)])),_:1},8,["to"])}var yh={name:"UserTile",components:{CompanyBadge:ui},props:["data","noHover"],computed:{link(){return`/users/${this.data.id}`}}};const fh=(0,I.Z)(yh,[["render",gh],["__scopeId","data-v-769ef278"]]);var _h=fh,wh={name:"UserDetailView",components:{OrderTile:ml,UserTile:_h,CompanyTile:eu},data(){return{drivers:[],user:[],loading:!0,alertTitle:"",alertInfo:"",successAlertTitle:"Erfolgreich",successAlertInfo:"Aktion wurde erfolgreich durchgeführt",failureAlertTitle:"Fehler",failureAlertInfo:"Es ist ein Fehler aufgetreten!"}},async mounted(){const e=this.$route.params.userid;try{const{data:t,error:i}=await Nt.from("users").select().eq("id",e);if(i)throw i;this.user=t[0];{const{data:t,error:i}=await Nt.from("orders").select().eq("buyer",e);if(i)throw i;t.length>0&&(this.user.orders=t)}{const{data:t,error:i}=await Nt.from("companies").select().or("user_uid.eq."+e+',employees.cs.{"'+this.user.email+'"}');if(i)throw i;t.length>0&&(this.user.company=t[0],t[0].user_uid==this.user.id&&(this.user.isCompanyLeader=!0))}{const{data:e,error:t}=await Nt.from("user_roles").select();if(t)throw t;this.drivers=e}console.log(this.user),this.loading=!1}catch(t){console.log(t)}},methods:{mailSelected(){location.href="mailto:"+this.user.email}}};const bh=(0,I.Z)(wh,[["render",ih],["__scopeId","data-v-e3a00842"]]);var kh=bh;const Eh={key:0,class:"mb-4"},xh=(0,a._)("h3",{class:"mb-2"}," Nicht verifiziert ",-1),Ch={class:"list"},Dh={key:1,class:"mb-4 mt-4"},Ih=(0,a._)("h3",{class:"mb-2"}," Kein Abo ausgewählt ",-1),Sh={class:"list"},Ah={class:"mt-4"},Bh={key:2,class:"spinner-border",style:{width:"4rem",height:"4rem","border-width":"7px"},role:"status"},Lh=(0,a._)("span",{class:"visually-hidden"},"Loading...",-1),Ph=[Lh];function qh(e,t,i,s,r,o){const n=(0,a.up)("TitleDiv"),l=(0,a.up)("CompanyTile"),c=(0,a.up)("CompanySortableList");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n,{title:"Unternehmen"}),r.notVerfiedCompanies.length>0?((0,a.wg)(),(0,a.iD)("div",Eh,[xh,(0,a._)("div",Ch,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.notVerfiedCompanies,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(l,{data:e,class:"item"},null,8,["data"])])))),128)),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a._)("div",{key:e,class:"item"}))),64))])])):(0,a.kq)("",!0),r.noAboCompanies.length>0?((0,a.wg)(),(0,a.iD)("div",Dh,[Ih,(0,a._)("div",Sh,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.noAboCompanies,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(l,{data:e,class:"item"},null,8,["data"])])))),128)),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a._)("div",{key:e,class:"item"}))),64))])])):(0,a.kq)("",!0),(0,a._)("div",Ah,[r.companies.length>0?((0,a.wg)(),(0,a.j4)(c,{key:0,items:r.companies,loading:r.loading,element:"CompanyTile"},null,8,["items","loading"])):(0,a.kq)("",!0)]),r.loading?((0,a.wg)(),(0,a.iD)("div",Bh,Ph)):(0,a.kq)("",!0)],64)}const Rh=e=>((0,a.dD)("data-v-53cf1e61"),e=e(),(0,a.Cn)(),e),Th=Rh((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),zh={key:0,class:"search-comp col-12 col-md-6 col-xl-4"},Fh={key:1,class:"search-comp col-12 col-md-6 col-xl-4"},Uh={key:0,class:"alias-wrapper"},Vh={class:"alias-suggestions"},Mh={class:"btn btn-light alias-link"},Oh=Rh((()=>(0,a._)("i",{class:"fa-solid fa-arrow-right"},null,-1))),Zh=Rh((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),Nh=Rh((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),Kh={class:"col-12 col-md-6 col-xl-4"},Qh={class:"settings"},Hh={key:0,class:"fa-solid fa-arrow-down fa-lg"},Wh={key:1,class:"fa-solid fa-arrow-up fa-lg"},Gh=(0,a.uE)('<option value="" selected data-v-53cf1e61>Kategorie</option><option value="Gastronomie" data-v-53cf1e61>Gastronomie</option><option value="Kultur" data-v-53cf1e61>Kultur</option><option value="Dienstleistung" data-v-53cf1e61>Dienstleistung</option><option value="Gastronomie &amp; Dienstleistung" data-v-53cf1e61> Gastronomie &amp; Dienstleistung </option>',5),Yh=[Gh],jh=(0,a.uE)('<option value="" selected data-v-53cf1e61>Kategorie</option><option value="Essen" data-v-53cf1e61>Essen</option><option value="Trinken" data-v-53cf1e61>Trinken</option><option value="Gegenstand" data-v-53cf1e61>Gegenstand</option><option value="Dienstleistung" data-v-53cf1e61>Dienstleistung</option>',5),Xh=[jh],Jh=Rh((()=>(0,a._)("option",{value:"relevance",selected:""},"Sortieren",-1))),$h=Rh((()=>(0,a._)("option",{value:"relevance"},"Relevanz",-1))),ep=Rh((()=>(0,a._)("option",{value:"review"},"Bewertung",-1))),tp=Rh((()=>(0,a._)("option",{value:"name"},"Name",-1))),ip=[Jh,$h,ep,tp],sp=Rh((()=>(0,a._)("option",{value:"relevance",selected:""},"Sortieren",-1))),ap=Rh((()=>(0,a._)("option",{value:"price"},"Preis",-1))),rp=Rh((()=>(0,a._)("option",{value:"review"},"Bewertung",-1))),op=Rh((()=>(0,a._)("option",{value:"name"},"Name",-1))),np=[sp,ap,rp,op],lp={class:"sortable-list",ref:"sortableList"},cp={key:0,style:{"margin-bottom":"50px"}},dp={key:0,class:"empty"},up={key:1,class:"empty"};function hp(e,t,i,r,o,n){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,ee.C_)(["row",{noSearch:i.noSearch}])},[Th,i.noSearch?((0,a.wg)(),(0,a.iD)("div",zh)):((0,a.wg)(),(0,a.iD)("div",Fh,[(0,a.wy)((0,a._)("input",{class:"search form-control form-control-lg me-2",type:"search",placeholder:"Suchen...","aria-label":"Suchen...","on-":"",onFocus:t[0]||(t[0]=e=>o.focus=!0),onFocusout:t[1]||(t[1]=e=>n.removeFocus()),"onUpdate:modelValue":t[2]||(t[2]=e=>o.searchString=e)},null,544),[[s.nr,o.searchString]]),this.directLinks.length>0&&this.focus?((0,a.wg)(),(0,a.iD)("div",Uh,[(0,a._)("div",Vh,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.directLinks,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,style:{display:"block"}},[(0,a.Wm)(l,{to:e.alias},{default:(0,a.w5)((()=>[(0,a._)("button",Mh,[(0,a.Uk)((0,ee.zw)(e.alias)+" ",1),Oh])])),_:2},1032,["to"])])))),128))])])):(0,a.kq)("",!0)])),Zh,Nh,(0,a._)("div",Kh,[(0,a._)("div",Qh,[(0,a._)("button",{class:"direction btn btn-outline-secondary",onClick:t[3]||(t[3]=e=>["up"==o.dir?o.dir="down":o.dir="up"])},["up"==o.dir?((0,a.wg)(),(0,a.iD)("i",Hh)):((0,a.wg)(),(0,a.iD)("i",Wh))]),"CompanyTile"==i.element?((0,a.wg)(),(0,a.iD)("select",{key:0,onChange:t[4]||(t[4]=(...e)=>n.companyCategoryChange&&n.companyCategoryChange(...e)),id:"companyCategory",class:"form-select form-select-md mb-3","aria-label":".form-select-lg example"},Yh,32)):((0,a.wg)(),(0,a.iD)("select",{key:1,onChange:t[5]||(t[5]=(...e)=>n.productCategoryChange&&n.productCategoryChange(...e)),id:"productCategory",class:"form-select form-select-md mb-3","aria-label":".form-select-lg example"},Xh,32)),"CompanyTile"==i.element?((0,a.wg)(),(0,a.iD)("select",{key:2,onChange:t[6]||(t[6]=(...e)=>n.companySortChange&&n.companySortChange(...e)),id:"companySort",class:"form-select form-select-right form-select-md mb-3","aria-label":".form-select-lg example"},ip,32)):((0,a.wg)(),(0,a.iD)("select",{key:3,onChange:t[7]||(t[7]=(...e)=>n.productSortChange&&n.productSortChange(...e)),id:"productSort",class:"form-select form-select-right form-select-md mb-3","aria-label":".form-select-lg example"},np,32))])])],2),(0,a._)("div",lp,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.sortedShownItems,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[((0,a.wg)(),(0,a.j4)((0,a.LL)(i.element),{data:e,class:"item"},null,8,["data"]))])))),128)),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a._)("div",{key:e,class:"item"}))),64))],512),0!=o.shownItems.length||i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",cp,["CompanyTile"==i.element?((0,a.wg)(),(0,a.iD)("h4",dp," Es wurden keine Unternehmen gefunden ")):((0,a.wg)(),(0,a.iD)("h4",up,"Es wurden keine Angebote gefunden"))]))],64)}var pp={name:"SortableList",data(){return{categories:[],chosenCategories:[],searchString:"",shownItems:[],sortedShownItems:[],sortBy:"CompanyTile"==this.element?"relevance":"",dir:"up",directLinks:[],focus:!1}},props:["items","element","loading","noSearch"],methods:{sort:function(){this.sortedShownItems=this.shownItems,""!=this.sortBy&&(this.sortedShownItems.sort(((e,t)=>"string"==typeof e[this.sortBy]&&"string"==typeof t[this.sortBy]?e[this.sortBy].localeCompare(t[this.sortBy]):e[this.sortBy]>t[this.sortBy]?1:e[this.sortBy]<t[this.sortBy]?-1:0)),"down"==this.dir&&this.sortedShownItems.reverse())},searchForString:function(e,t){if(e.startsWith("/")&&(e=e.substring(1)),null==t)return 0;let i=0;if("object"==typeof t){if(!(t instanceof Array)){let e=[],i=[];i="CompanyTile"==this.element?["name","location","info"]:["name","company_name","info"],i.forEach((i=>e.push(t[i]))),t=e}for(let s=0;s<t.length;s++)i+=this.searchForString(e,t[s]);return i}if("string"!=typeof t)return 0;let s=t.match(new RegExp(e,"gi"));return null==s?0:s.length},generateShownItems:function(){let e=[];for(let t=0;t<this.items.length;t++){let i=this.items[t],s=!0;if(0==this.searchForString(this.searchString,i)&&(s=!1),null==i.categories&&0!=this.chosenCategories.length)s=!1;else for(let e=0;e<this.chosenCategories.length;e++)i.categories.includes(this.chosenCategories[e])||(s=!1),"Gastronomie & Dienstleistung"!=i.categories[0]||"Gastronomie"!=this.chosenCategories[e]&&"Dienstleistung"!=this.chosenCategories[e]||(s=!0);s&&e.push(i)}e!=this.shownItems&&(this.shownItems=e,this.sort())},generateCategories:function(){for(let e=0;e<this.items.length;e++){let t=this.items[e];if(null!=t.categories)for(let e=0;e<t.categories.length;e++){let i=t.categories[e];this.categories.includes(i)||this.categories.push(i)}}},companyCategoryChange(){const e=document.getElementById("companyCategory"),t=e.value;this.chosenCategories=""==t?[]:[t]},productCategoryChange(){const e=document.getElementById("productCategory"),t=e.value;this.chosenCategories=""==t?[]:[t]},companySortChange(){const e=document.getElementById("companySort"),t=e.value;this.sortBy=t,console.log(t)},productSortChange(){const e=document.getElementById("productSort"),t=e.value;this.sortBy=t},aliasRoute(e){xv.addRoute({path:"/"+e}),xv.forward(),console.log("/"+e)},removeFocus(){setTimeout(function(){this.focus=!1}.bind(this),200)}},mounted(){this.generateCategories(),this.generateShownItems()},watch:{items:function(){this.generateCategories(),this.generateShownItems()},element:function(){this.generateShownItems()},searchString:function(){if(this.generateShownItems(),this.directLinks=[],"CompanyTile"==this.element&&this.searchString.startsWith("/"))for(let e=0;e<this.items.length;e++)void 0!==this.items[e].alias&&this.items[e].alias.startsWith(this.searchString.substring(1))&&this.directLinks.push(this.items[e])},dir:function(){this.generateShownItems()},sortBy:function(){this.generateShownItems()},chosenCategories:function(){this.generateShownItems()}},components:{ProductTile:co,CompanyTile:eu}};const mp=(0,I.Z)(pp,[["render",hp],["__scopeId","data-v-53cf1e61"]]);var vp=mp,gp={name:"CompanyView",components:{TitleDiv:Yi,CompanySortableList:vp,CompanyTile:eu},data(){return{companies:[],notVerfiedCompanies:[],noAboCompanies:[],loading:!0}},async created(){const{data:e,error:t}=await Nt.from("companies").select("*");null!=t&&console.log(t),e.forEach((e=>{null==e.abo?this.noAboCompanies.push(e):1!=e.verified?this.notVerfiedCompanies.push(e):this.companies.push(e)})),this.loading=!1}};const yp=(0,I.Z)(gp,[["render",qh]]);var fp=yp;const _p=e=>((0,a.dD)("data-v-552c58b2"),e=e(),(0,a.Cn)(),e),wp={key:0},bp=_p((()=>(0,a._)("h3",null,"Neue Services",-1))),kp={class:"list"},Ep={key:1},xp=_p((()=>(0,a._)("h3",null,"Alte Services",-1))),Cp={class:"list"};function Dp(e,t,i,s,r,o){const n=(0,a.up)("TitleDiv"),l=(0,a.up)("ServiceTile");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n,{title:"Services"}),r.drivers.length>0&&this.newServices.length>0?((0,a.wg)(),(0,a.iD)("div",wp,[bp,(0,a._)("div",kp,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.newServices,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(l,{data:e,drivers:r.drivers},null,8,["data","drivers"])])))),128))])])):(0,a.kq)("",!0),r.drivers.length>0&&this.oldServices.length>0?((0,a.wg)(),(0,a.iD)("div",Ep,[xp,(0,a._)("div",Cp,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.oldServices,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(l,{data:e,drivers:r.drivers},null,8,["data","drivers"])])))),128))])])):(0,a.kq)("",!0)],64)}var Ip={name:"ServiceView",components:{TitleDiv:Yi,ServiceTile:Rd},setup(){const e=(0,H.oR)(),t=(0,a.Fl)((()=>{var t=e.state.services;return t=t.filter((e=>0==e.finished)),t.sort(((e,t)=>(e.date+e.booked_time).localeCompare(t.date+t.booked_time))),t})),i=(0,a.Fl)((()=>{var t=e.state.services;return t=t.filter((e=>1==e.finished)),t.sort(((e,t)=>(e.date+e.booked_time).localeCompare(t.date+t.booked_time))),t}));return{store:e,newServices:t,oldServices:i}},data(){return{drivers:[]}},async mounted(){try{const{data:e,error:t}=await Nt.from("user_roles").select();if(null!=t)throw t;this.drivers=e}catch(e){console.log(e)}}};const Sp=(0,I.Z)(Ip,[["render",Dp],["__scopeId","data-v-552c58b2"]]);var Ap=Sp;function Bp(e,t,i,s,r,o){const n=(0,a.up)("TitleDiv");return(0,a.wg)(),(0,a.j4)(n,{title:"Einstellungen"})}var Lp={name:"SettingsView",components:{TitleDiv:Yi},data(){return{}}};const Pp=(0,I.Z)(Lp,[["render",Bp]]);var qp=Pp;const Rp=e=>((0,a.dD)("data-v-6e0d5dbb"),e=e(),(0,a.Cn)(),e),Tp={key:0},zp=Rp((()=>(0,a._)("h3",null,"Neue Bestellungen",-1))),Fp={class:"list"},Up={key:1},Vp=Rp((()=>(0,a._)("h3",null,"Alte Bestellungen",-1))),Mp={class:"list"};function Op(e,t,i,s,r,o){const n=(0,a.up)("TitleDiv"),l=(0,a.up)("OrderTile");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n,{title:"Bestellungen"}),r.drivers.length>0&&this.newOrders.length>0?((0,a.wg)(),(0,a.iD)("div",Tp,[zp,(0,a._)("div",Fp,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.newOrders,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(l,{data:e,drivers:r.drivers},null,8,["data","drivers"])])))),128))])])):(0,a.kq)("",!0),r.drivers.length>0&&this.oldOrders.length>0?((0,a.wg)(),(0,a.iD)("div",Up,[Vp,(0,a._)("div",Mp,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.oldOrders,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a.Wm)(l,{data:e,drivers:r.drivers},null,8,["data","drivers"])])))),128))])])):(0,a.kq)("",!0)],64)}var Zp={name:"OrderView",components:{TitleDiv:Yi,OrderTile:ml},setup(){const e=(0,H.oR)(),t=(0,a.Fl)((()=>{var t=e.state.orders;return t=t.filter((e=>0==e.delivered||0==e.payed)),t.sort(((e,t)=>(e.day+e.order_time).localeCompare(t.day+t.order_time))),t})),i=(0,a.Fl)((()=>{var t=e.state.orders;return t=t.filter((e=>1==e.delivered&&1==e.payed)),t.sort(((e,t)=>(e.day+e.order_time).localeCompare(t.day+t.order_time))),t}));return console.log(e.state.orders),{store:e,newOrders:t,oldOrders:i}},data(){return{drivers:[]}},async mounted(){try{const{data:e,error:t}=await Nt.from("user_roles").select();if(null!=t)throw t;this.drivers=e}catch(e){console.log(e)}}};const Np=(0,I.Z)(Zp,[["render",Op],["__scopeId","data-v-6e0d5dbb"]]);var Kp=Np;const Qp={key:0};function Hp(e,t,i,s,r,o){const n=(0,a.up)("TitleDiv"),l=(0,a.up)("UserSortableList");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n,{title:"Nutzer"}),void 0!=r.users?((0,a.wg)(),(0,a.iD)("h2",Qp,"Anzahl: "+(0,ee.zw)(r.users.length),1)):(0,a.kq)("",!0),(0,a._)("div",null,[void 0!=r.users?((0,a.wg)(),(0,a.j4)(l,{key:0,items:r.users,element:"UserTile"},null,8,["items"])):(0,a.kq)("",!0)])],64)}const Wp=e=>((0,a.dD)("data-v-43863f59"),e=e(),(0,a.Cn)(),e),Gp=Wp((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),Yp={key:0,class:"search-comp col-12 col-md-6 col-xl-4"},jp={key:1,class:"search-comp col-12 col-md-6 col-xl-4"},Xp=Wp((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),Jp=Wp((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),$p={class:"col-12 col-md-6 col-xl-4"},em={class:"settings"},tm={key:0,class:"fa-solid fa-arrow-down fa-lg"},im={key:1,class:"fa-solid fa-arrow-up fa-lg"},sm=(0,a.uE)('<option value="" selected data-v-43863f59>Alle</option><option value="inCompany" data-v-43863f59>In Unternehmen</option><option value="companyLeader" data-v-43863f59>Geschäftsführer</option><option value="companyEmployee" data-v-43863f59>Angestellte</option><option value="noCompany" data-v-43863f59>Nicht in Unternehmen</option><option value="active" data-v-43863f59>Aktiv</option><option value="passive" data-v-43863f59>Passiv</option>',7),am=[sm],rm=(0,a.uE)('<option value="name" selected data-v-43863f59>Sortieren</option><option value="name" data-v-43863f59>Vorname</option><option value="lastName" data-v-43863f59>Nachname</option><option value="companyName" data-v-43863f59>Unternehmen</option><option value="activity" data-v-43863f59>Aktivität</option>',5),om=[rm],nm=Wp((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),lm=Wp((()=>(0,a._)("div",{class:"col-md-3 col-xl-4"},null,-1))),cm={class:"col-12 col-md-6 col-xl-4"},dm=Wp((()=>(0,a._)("i",{class:"fa-solid fa-envelope fa-lg"},null,-1))),um={class:"count"},hm={class:"sortable-list",ref:"sortableList"},pm={key:0,style:{"margin-bottom":"50px"}},mm=Wp((()=>(0,a._)("h4",{class:"empty"}," Es wurden keine Nutzer gefunden ",-1))),vm=[mm];function gm(e,t,i,r,o,n){return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a._)("div",{class:(0,ee.C_)(["row",{noSearch:i.noSearch}])},[Gp,i.noSearch?((0,a.wg)(),(0,a.iD)("div",Yp)):((0,a.wg)(),(0,a.iD)("div",jp,[(0,a.wy)((0,a._)("input",{class:"search form-control form-control-lg me-2",type:"search",placeholder:"Suchen...","aria-label":"Suchen...","on-":"",onFocus:t[0]||(t[0]=e=>o.focus=!0),onFocusout:t[1]||(t[1]=e=>n.removeFocus()),"onUpdate:modelValue":t[2]||(t[2]=e=>o.searchString=e)},null,544),[[s.nr,o.searchString]])])),Xp,Jp,(0,a._)("div",$p,[(0,a._)("div",em,[(0,a._)("button",{class:"direction btn btn-outline-secondary",onClick:t[3]||(t[3]=e=>["up"==o.dir?o.dir="down":o.dir="up"])},["up"==o.dir?((0,a.wg)(),(0,a.iD)("i",tm)):((0,a.wg)(),(0,a.iD)("i",im))]),(0,a._)("select",{onChange:t[4]||(t[4]=(...e)=>n.userCategoryChange&&n.userCategoryChange(...e)),id:"userCategory",class:"form-select form-select-md mb-3","aria-label":".form-select-lg example"},am,32),(0,a._)("select",{onChange:t[5]||(t[5]=(...e)=>n.userSortChange&&n.userSortChange(...e)),id:"userSort",class:"form-select form-select-right form-select-md mb-3","aria-label":".form-select-lg example"},om,32)])]),nm,lm,(0,a._)("div",cm,[(0,a._)("button",{class:"btn btn-primary mail",onClick:t[6]||(t[6]=(...e)=>n.mailSelected&&n.mailSelected(...e))},[dm,(0,a.Uk)(" Mail an Ausgewählte ")])])],2),(0,a._)("p",um,(0,ee.zw)(o.sortedShownItems.length)+" Treffer",1),(0,a._)("div",hm,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.sortedShownItems,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[((0,a.wg)(),(0,a.j4)((0,a.LL)(i.element),{data:e,class:"item"},null,8,["data"]))])))),128)),((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)(2,(e=>(0,a._)("div",{key:e,class:"item"}))),64))],512),0!=o.shownItems.length||i.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",pm,vm))],64)}var ym={name:"SortableList",data(){return{categories:[],chosenCategories:[],searchString:"",shownItems:[],sortedShownItems:[],sortBy:"name",dir:"up",directLinks:[],focus:!1}},props:["items","element","loading","noSearch"],methods:{mailSelected(){let e=[];this.shownItems.forEach((t=>{e.push(t.email)}));var t="mailto:?bcc=";e.forEach((e=>{t+=e+","})),location.href=t},sort:function(){this.sortedShownItems=this.shownItems,""!=this.sortBy&&("lastName"==this.sortBy?this.sortedShownItems.sort(((e,t)=>e["name"].split(" ")[1].localeCompare(t["name"].split(" ")[1]))):"companyName"==this.sortBy?(this.sortedShownItems.sort(((e,t)=>e["name"].localeCompare(t["name"]))),this.sortedShownItems.sort(((e,t)=>void 0==e["company"]&&void 0==t["company"]?0:void 0==e["company"]?1:void 0==t["company"]?-1:e["company"]["name"].localeCompare(t["company"]["name"])))):"activity"==this.sortBy?(this.sortedShownItems.sort(((e,t)=>e["name"].localeCompare(t["name"]))),this.sortedShownItems.sort(((e,t)=>{var i=void 0==e.orders?0:e.orders.length,s=void 0==t.orders?0:t.orders.length;return i<s?1:i>s?-1:0}))):this.sortedShownItems.sort(((e,t)=>"string"==typeof e[this.sortBy]&&"string"==typeof t[this.sortBy]?e[this.sortBy].localeCompare(t[this.sortBy]):e[this.sortBy]>t[this.sortBy]?1:e[this.sortBy]<t[this.sortBy]?-1:0)),"down"==this.dir&&this.sortedShownItems.reverse())},searchForString:function(e,t){if(e.startsWith("/")&&(e=e.substring(1)),null==t)return 0;let i=0;if("object"==typeof t){if(!(t instanceof Array)){let e=[];e.push(t["name"]),void 0!=t.company&&e.push(t["company"]["name"]),t=e}for(let s=0;s<t.length;s++)i+=this.searchForString(e,t[s]);return i}if("string"!=typeof t)return 0;let s=t.match(new RegExp(e,"gi"));return null==s?0:s.length},generateShownItems:function(){let e=[];for(let i=0;i<this.items.length;i++){let s=this.items[i],a=!0;if(0==this.searchForString(this.searchString,s)&&(a=!1),0!=this.chosenCategories.length)if("inCompany"==this.chosenCategories[0])void 0==s.company&&(a=!1);else if("companyLeader"==this.chosenCategories[0])1!=s.isCompanyLeader&&(a=!1);else if("companyEmployee"==this.chosenCategories[0])(void 0==s.company||s.isCompanyLeader)&&(a=!1);else if("noCompany"==this.chosenCategories[0])void 0!=s.company&&(a=!1);else if("active"==this.chosenCategories[0])if(void 0==s.orders)a=!1;else{var t=s.orders.length;0==t&&(a=!1)}else"passive"==this.chosenCategories[0]&&void 0!=s.orders&&(a=!1);a&&e.push(s)}e!=this.shownItems&&(this.shownItems=e,this.sort())},generateCategories:function(){this.categories=["inCompany","companyLeader","companyEmployee","noCompany","active","passive"]},userCategoryChange(){const e=document.getElementById("userCategory"),t=e.value;this.chosenCategories=""==t?[]:[t]},userSortChange(){const e=document.getElementById("userSort"),t=e.value;this.sortBy=t,console.log(t)},removeFocus(){setTimeout(function(){this.focus=!1}.bind(this),200)}},mounted(){this.generateCategories(),this.generateShownItems()},watch:{items:function(){this.generateCategories(),this.generateShownItems()},element:function(){this.generateShownItems()},searchString:function(){this.generateShownItems()},dir:function(){this.generateShownItems()},sortBy:function(){this.generateShownItems()},chosenCategories:function(){this.generateShownItems()}},components:{UserTile:_h}};const fm=(0,I.Z)(ym,[["render",gm],["__scopeId","data-v-43863f59"]]);var _m=fm,wm={name:"UserView",components:{TitleDiv:Yi,UserSortableList:_m},data(){return{users:void 0}},async mounted(){try{const{data:e,error:t}=await Nt.from("users").select();if(t)throw t;this.users=e;{const{data:e,error:t}=await Nt.from("orders").select();if(t)throw t;e.forEach((e=>{var t=this.users.findIndex((t=>t.id==e.buyer));-1!=t&&(void 0==this.users[t].orders&&(this.users[t].orders=[]),this.users[t].orders.push(e))}))}{const{data:e,error:t}=await Nt.from("companies").select();if(t)throw t;console.log(e),e.forEach((e=>{var t=this.users.findIndex((t=>t.id==e.user_uid));-1!=t&&(this.users[t].company=e,this.users[t].isCompanyLeader=!0),null!=e.employees&&e.employees.forEach((t=>{var i=this.users.findIndex((e=>e.email==t));-1!=i&&(this.users[i].company=e)}))}))}this.users.sort(((e,t)=>e.name.localeCompare(t.name)))}catch(e){console.log(e)}}};const bm=(0,I.Z)(wm,[["render",Hp],["__scopeId","data-v-009d9426"]]);var km=bm;const Em=e=>((0,a.dD)("data-v-880addda"),e=e(),(0,a.Cn)(),e),xm={class:"wrapper"},Cm={key:0,class:"stats"},Dm={class:"list"},Im={class:"card"},Sm=Em((()=>(0,a._)("h3",null,"Nutzer",-1))),Am={class:"count"},Bm={class:"card"},Lm=Em((()=>(0,a._)("h3",null,"Unternehmen",-1))),Pm={class:"count"},qm={class:"card"},Rm=Em((()=>(0,a._)("h3",null,"Angebote",-1))),Tm={class:"count"},zm={class:"card"},Fm=Em((()=>(0,a._)("h3",null,"Bestellungen",-1))),Um={class:"count"},Vm={class:"list"},Mm={class:"card"},Om={class:"name"},Zm={class:"count"};function Nm(e,t,i,s,r,o){const n=(0,a.up)("TitleDiv");return(0,a.wg)(),(0,a.iD)("div",xm,[(0,a.Wm)(n,{title:"Statistiken"}),r.loading?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",Cm,[(0,a._)("div",Dm,[(0,a._)("div",Im,[Sm,(0,a._)("p",Am,(0,ee.zw)(r.userCount),1)]),(0,a._)("div",Bm,[Lm,(0,a._)("p",Pm,(0,ee.zw)(r.companyCount),1)]),(0,a._)("div",qm,[Rm,(0,a._)("p",Tm,(0,ee.zw)(r.productCount),1)]),(0,a._)("div",zm,[Fm,(0,a._)("p",Um,(0,ee.zw)(r.orderCount),1)])]),(0,a.Wm)(n,{title:"Links"}),(0,a._)("div",Vm,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.links,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id},[(0,a._)("div",Mm,[(0,a._)("h4",Om,(0,ee.zw)(e.name),1),(0,a._)("p",Zm,(0,ee.zw)(e.count),1)])])))),128))])]))])}var Km={name:"StatsView",components:{TitleDiv:Yi},data(){return{loading:!0,userCount:0,companyCount:0,productCount:0,orderCount:0,links:[]}},async mounted(){i(5203);try{{const{count:e,error:t}=await Nt.from("users").select("*",{count:"exact",head:!0});if(t)throw t;this.userCount=e}{const{count:e,error:t}=await Nt.from("companies").select("*",{count:"exact",head:!0}).eq("verified",!0);if(t)throw t;this.companyCount=e}{const{count:e,error:t}=await Nt.from("products").select("*",{count:"exact",head:!0}).eq("public",!0);if(t)throw t;this.productCount=e}{const{count:e,error:t}=await Nt.from("orders").select("*",{count:"exact",head:!0});if(t)throw t;this.orderCount=e}{const{data:e,error:t}=await Nt.from("stats").select("*");if(t)throw t;this.links=e,this.links=this.links.filter((e=>0!=e.id)),this.links.sort(((e,t)=>e.id<t.id))}this.loading=!1}catch(e){console.log(e)}}};const Qm=(0,I.Z)(Km,[["render",Nm],["__scopeId","data-v-880addda"]]);var Hm=Qm;const Wm=e=>((0,a.dD)("data-v-5b610984"),e=e(),(0,a.Cn)(),e),Gm={class:"reviews"},Ym=Wm((()=>(0,a._)("h4",{class:"m-4"}," Verifiziert ",-1)));function jm(e,t,i,s,r,o){const n=(0,a.up)("TitleDiv"),l=(0,a.up)("ReviewTile");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(n,{title:"Rezensionen"}),(0,a._)("div",Gm,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.reviews,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"review"},[null==e.verified?((0,a.wg)(),(0,a.j4)(l,{key:0,onVerifyReview:t[0]||(t[0]=e=>o.verifyReview(e)),onDeleteReview:t[1]||(t[1]=e=>o.deleteReview(e)),data:e},null,8,["data"])):(0,a.kq)("",!0)])))),128)),Ym,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.reviews,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e.id,class:"review"},[e.verified?((0,a.wg)(),(0,a.j4)(l,{key:0,onVerifyReview:t[2]||(t[2]=e=>o.verifyReview(e)),onDeleteReview:t[3]||(t[3]=e=>o.deleteReview(e)),data:e},null,8,["data"])):(0,a.kq)("",!0)])))),128))])],64)}const Xm=e=>((0,a.dD)("data-v-cb6f3936"),e=e(),(0,a.Cn)(),e),Jm={class:"card"},$m={key:0},ev={key:1},tv={class:"stars"},iv={key:0,class:"fa-solid fa-star fa-lg solid-star"},sv={key:1,class:"fa-regular fa-star fa-lg"},av={class:"info"},rv={class:"text"},ov={class:"date"},nv={class:"actions"},lv=Xm((()=>(0,a._)("i",{class:"fa-solid fa-check"},null,-1))),cv=[lv],dv=Xm((()=>(0,a._)("i",{class:"fa-solid fa-xmark"},null,-1))),uv=[dv];function hv(e,t,i,s,r,o){return(0,a.wg)(),(0,a.iD)("div",Jm,[(0,a._)("div",{class:"header",onClick:t[0]||(t[0]=e=>o.toProduct())},[(0,a._)("div",null,[i.data.anonym||null==i.data.users?((0,a.wg)(),(0,a.iD)("h6",$m,"Anonym ("+(0,ee.zw)(i.data.users.name)+")",1)):((0,a.wg)(),(0,a.iD)("h6",ev,(0,ee.zw)(i.data.users.name),1))]),(0,a._)("div",tv,[((0,a.wg)(),(0,a.iD)(a.HY,null,(0,a.Ko)([0,1,2,3,4],(e=>(0,a._)("div",{key:e},[e<i.data.stars?((0,a.wg)(),(0,a.iD)("i",iv)):((0,a.wg)(),(0,a.iD)("i",sv))]))),64))])]),(0,a._)("div",av,[(0,a._)("p",rv,(0,ee.zw)(i.data.text),1)]),(0,a._)("div",ov,[(0,a._)("p",null,(0,ee.zw)(r.date)+" • "+(0,ee.zw)(r.time),1)]),(0,a._)("div",nv,[null==this.data.verified?((0,a.wg)(),(0,a.iD)("button",{key:0,class:"btn btn-primary confirm-button",onClick:t[1]||(t[1]=e=>o.verifyReview())},cv)):(0,a.kq)("",!0),(0,a._)("button",{class:"btn btn-danger confirm-button",onClick:t[2]||(t[2]=e=>o.deleteReview())},uv)])])}var pv={name:"ReviewTile",props:["data"],emits:["deleteReview","verifyReview"],setup(){const e=(0,H.oR)();return{store:e}},data(){return{date:"",time:""}},mounted(){this.date=Ys(this.data.created_at.split("T")[0]),this.time=js(this.data.created_at.split("T")[1])},computed:{link(){return"https://schillerando.de/"+this.data.companies.alias+"/"+this.data.product}},methods:{async verifyReview(){try{const{error:e}=await Nt.from("product_reviews").update({verified:!0}).eq("id",this.data.id);if(e)throw e;this.$emit("verifyReview",this.data.id)}catch(e){console.log(e)}},async deleteReview(){try{const{error:e}=await Nt.from("product_reviews").delete().eq("id",this.data.id);if(e)throw e;this.$emit("deleteReview",this.data.id)}catch(e){console.log(e)}},toProduct(){location.href=this.link}}};const mv=(0,I.Z)(pv,[["render",hv],["__scopeId","data-v-cb6f3936"]]);var vv=mv,gv={name:"ReviewView",components:{TitleDiv:Yi,ReviewTile:vv},setup(){const e=(0,H.oR)();return{store:e}},data(){return{reviews:[]}},async mounted(){try{const{data:e,error:t}=await Nt.from("product_reviews").select("*, users(*), companies(alias)");if(null!=t)throw t;this.reviews=e,this.reviews.sort(((e,t)=>t.created_at.localeCompare(e.created_at)))}catch(e){console.log(e)}},methods:{verifyReview(e){this.reviews[this.reviews.findIndex((t=>t.id==e))].verified=!0},deleteReview(e){this.reviews=this.reviews.filter((t=>t.id!=e))}}};const yv=(0,I.Z)(gv,[["render",jm],["__scopeId","data-v-5b610984"]]);var fv=yv,_v=i(4702);const wv=(0,H.MT)({state:{user:null,session:null,state:void 0,userCompany:null,currentProduct:null,currentEntry:null,orders:[],services:[]},mutations:{setUser(e,t){e.user=t},setState(e,t){e.state=t},setUserCompany(e,t){e.userCompany=t},setCurrentProduct(e,t){e.currentProduct=t},setCurrentEntry(e,t){e.currentEntry=t},setOrders(e,t){e.orders=t},setServices(e,t){e.services=t}},getters:{getUser(e){return e.user},getState(e){return e.state},getUserCompany(e){return e.userCompany},getCurrentProduct(e){return e.currentProduct},getCurrentEntry(e){return e.currentEntry},getOrders(e){return e.orders},getServices(e){return e.services}},actions:{async reload({commit:e}){console.log("reload");var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);t=!0;try{const{data:s,error:a}=await Nt.auth.refreshSession();if(a||null==s.session)t?e("setUser",null):this.dispatch("getSharedLogin");else{var i=s.user;null!=this.state.user&&(i.role=this.state.user.role),e("setUser",i),this.dispatch("startServiceSubscription")}}catch(s){e("setUser",null)}if(null!=this.state.user&&"admin"!=this.state.user.role&&"driver"!=this.state.user.role){i=this.getters.getUser;try{const{data:e,error:t}=await Nt.from("user_roles").select().eq("id",i.id);if(t)throw t;null!=e&&(i.role=e[0].role)}catch(s){console.log(s)}e("setUser",i)}null!=this.state.user&&this.dispatch("startOrderSubscription"),t||(this.timer=setInterval((()=>{this.dispatch("getSharedLogin")}),1e3))},async getSharedLogin({commit:e}){const t=document.cookie.split(/\s*;\s*/).map((e=>e.split("="))),i=t.find((e=>"supabase-access-token"==e[0])),s=t.find((e=>"supabase-refresh-token"==e[0]));if(i&&s){if(null!=this.getters.getUser)return;const{data:t,error:a}=await Nt.auth.setSession({access_token:i[1],refresh_token:s[1]});a||null==t.session?(e("setUser",null),document.cookie="supabase-access-token=false;",document.cookie="supabase-refresh-token=false;",xv.go(xv.currentRoute)):null!=this.getters.getUser?e("setUser",t.user):(e("setUser",t.user),xv.go(xv.currentRoute))}else null!=this.getters.getUser?(e("setUser",null),xv.go(xv.currentRoute)):e("setUser",null)},async startOrderSubscription({commit:e}){try{const{data:i,error:s}=await Nt.from("orders").select();if(null!=s)throw s;var t=i;{const{data:e,error:i}=await Nt.from("order_products").select().eq("buyer",this.state.user.id);if(i)throw i;e.forEach((e=>{var i=t.findIndex((t=>t.id==e.order));void 0==t[i].order_products&&(t[i].order_products=[]),t[i].order_products.push(e)}))}e("setOrders",t);const a=Nt.channel("any").on("postgres_changes",{event:"*",schema:"public",table:"orders"},(async t=>{var i=this.state.orders,a=i.findIndex((e=>e.id==t.new.id));if(-1!=a){var r=t.new;r.order_products=i[a].order_products,i[a]=r}else i.push(t.new);if(null!=s)throw s;console.log("Database change received!",t.new),e("setOrders",i)}));a.subscribe()}catch(i){e("setOrders",[]),console.log(i.error_description||i.message)}},async stopOrderSubscription(){try{await Nt.removeAllChannels()}catch(e){console.log(e.error_description||e.message)}},async startServiceSubscription({commit:e}){try{const{data:t,error:i}=await Nt.from("booked_services").select("*, companies(*)");if(null!=i)throw i;e("setServices",t);const s=Nt.channel("any").on("postgres_changes",{event:"*",schema:"public",table:"booked_services"},(async t=>{var i=this.state.services,s=t.new;const{data:a,error:r}=await Nt.from("companies").select().eq("id",s.company);if(null!=r)throw r;s.companies=a[0];var o=i.findIndex((e=>e.id==s.id));if(-1!=o?i[o]=s:i.push(s),null!=r)throw r;console.log("Database change received!",s),e("setOrders",i)}));s.subscribe()}catch(t){e("setServices",[]),console.log(t.error_description||t.message)}},async stopServiceSubscription(){try{await Nt.removeAllChannels()}catch(e){console.log(e.error_description||e.message)}},async createCompany({commit:e},t){try{e("setState","loading");const c=t.name.replace(/\s/g,"").toLowerCase();var i=t.employees.filter((function(e,i){return t.employees.indexOf(e)==i}));const{data:d,error:u}=await Nt.from("companies").insert({alias:c,name:t.name,categories:[t.category],location:t.location,info:t.info,user_uid:this.getters.getUser.id,employees:i,abo:"Later"==t.abo?null:t.abo,relevance:"Business"==t.abo?50:100}).select();var s=d[0].id;if(u)throw u;if(null!=t.image){var a=t.image.substring(t.image.indexOf(":"),t.image.indexOf(";")).replace(":",""),r=d[0].id+"."+a.split("/")[1];{const{error:e}=await Nt.storage.from("sellers-headings").upload(r,t.image,{cacheControl:"3600",upsert:!0,contentType:a});if(e)throw e}{const{error:e}=await Nt.from("companies").update({header_picture:r}).eq("id",this.getters.companyId);if(e)throw e}}if(u)throw u;e("setUser",d.user);for(var o=0;o<t.products.length;o++){const e=t.products[o],{data:i,error:r}=await Nt.from("products").insert({name:e.name,info:e.info,price:e.price,categories:e.categories,company_id:s,auth_uid:this.getters.getUser.id,delivery:e.delivery,public:e.public}).select();if(r)throw r;if(null!=e.image){var n=e.image.substring(e.image.indexOf(":"),e.image.indexOf(";")).replace(":",""),l=i[0].id+"."+a.split("/")[1];{const{error:t}=await Nt.storage.from("products-pictures").upload(l,e.image,{cacheControl:"3600",upsert:!0,contentType:n});if(t)throw t}{const{error:e}=await Nt.from("products").update({product_picture:l}).eq("id",i[0].id);if(e)throw e}}}console.log("Successfully registered"),e("setState","success"),await xv.replace("/einstellungen")}catch(c){e("setState","failure"),console.log(c.error_description||c.message)}},async addProduct({commit:e},t){try{e("setState","loading");const{data:o,error:n}=await Nt.from("products").insert({name:t.name,info:t.info,categories:t.categories,price:t.price,delivery:t.delivery,public:t.public,auth_uid:this.getters.getUser.id,company_id:this.getters.getUserCompany.id,has_variations:t.has_variations,has_extras:t.has_extras}).select();if(n)throw n;if(e("setCurrentProduct",o[0]),null!=t.image){var i=t.image.substring(t.image.indexOf(":"),t.image.indexOf(";")).replace(":",""),s=o[0].id+"."+i.split("/")[1];{const{error:e}=await Nt.storage.from("products-pictures").upload(s,t.image,{cacheControl:"3600",upsert:!0,contentType:i});if(e)throw e}{const{data:t,error:i}=await Nt.from("products").update({product_picture:s}).eq("id",this.getters.getCurrentProduct.id).select();if(i)throw i;e("setCurrentProduct",t[0])}}if(t.has_variations)for(var a=0;a<t.variations.length;a++){const{error:e}=await Nt.from("product_variations").insert({name:t.variations[a].name,price:t.variations[a].price,product:o[0].id});if(e)throw e;t.variations[a].new=!1}if(t.has_extras)for(a=0;a<t.extras.length;a++){const{error:e}=await Nt.from("product_extras").insert({name:t.extras[a].name,extra_price:t.extras[a].extra_price,product:o[0].id});if(e)throw e;t.extras[a].new=!1}var r=o[0];r.variations=t.variations,r.extras=t.extras,e("setCurrentProduct",r),e("setState","success")}catch(o){e("setCurrentProduct",null),e("setState","failure"),console.log(o.error_description||o.message)}},async updateProduct({commit:e},t){try{e("setState","loading");const{data:u,error:h}=await Nt.from("products").update({name:t.name,info:t.info,categories:t.categories,price:t.price,delivery:t.delivery,public:t.public,has_variations:t.has_variations,has_extras:t.has_extras}).eq("id",t.id).select();if(h)throw h;if(e("setCurrentProduct",u[0]),null!=t.image&&t.imageBefore!=t.image){if(null!=t.imageBefore){const{error:e}=await Nt.storage.from("products-pictures").remove(u[0].product_picture);if(e)throw e}var i=t.image.substring(t.image.indexOf(":"),t.image.indexOf(";")).replace(":",""),s=t.id+"."+i.split("/")[1];{const{error:e}=await Nt.storage.from("products-pictures").upload(s,t.image,{cacheControl:"3600",upsert:!0,contentType:i});if(e)throw e}{const{data:i,error:a}=await Nt.from("products").update({product_picture:s}).eq("id",t.id).select();if(a)throw a;e("setCurrentProduct",i[0])}}{const{data:e,error:i}=await Nt.from("product_variations").select().eq("product",t.id);if(i)throw i;var a=e}var r=[];if(t.has_variations)for(var o=0;o<t.variations.length;o++)if(r.push(t.variations[o].id),t.variations[o].new){const{error:e}=await Nt.from("product_variations").insert({name:t.variations[o].name,price:t.variations[o].price,product:this.state.currentProduct.id});if(e)throw e;t.variations[o].new=!1}else{var n=a.findIndex((e=>e.id===t.variations[o].id));if(-1!=n&&(a[n].name!=t.variations[o].name||a[n].price!=t.variations[o].price)){const{error:e}=await Nt.from("product_variations").update({name:t.variations[o].name,price:t.variations[o].price}).eq("id",t.variations[o].id);if(e)throw e}}for(console.log(1),o=0;o<a.length;o++)if(!r.includes(a[o].id)){const{error:e}=await Nt.from("product_variations").delete().eq("id",a[o].id);if(e)throw e}console.log(2);{const{data:e,error:i}=await Nt.from("product_extras").select().eq("product",t.id);if(i)throw i;var l=e}var c=[];if(t.has_extras)for(o=0;o<t.extras.length;o++)if(c.push(t.extras[o].id),t.extras[o].new){const{error:e}=await Nt.from("product_extras").insert({name:t.extras[o].name,extra_price:t.extras[o].extra_price,product:this.state.currentProduct.id});if(e)throw e;t.extras[o].new=!1}else if(n=l.findIndex((e=>e.id===t.extras[o].id)),-1!=n&&(l[n].name!=t.extras[o].name||l[n].extra_price!=t.extras[o].extra_price)){const{error:e}=await Nt.from("product_extras").update({name:t.extras[o].name,extra_price:t.extras[o].extra_price}).eq("id",t.variations[o].id);if(e)throw e}for(o=0;o<l.length;o++)if(!c.includes(l[o].id)){const{error:e}=await Nt.from("product_extras").delete().eq("id",l[o].id);if(e)throw e}var d=this.state.currentProduct;d.variations=t.variations,d.extras=t.extras,e("setCurrentProduct",d),e("setState","success")}catch(u){e("setCurrentProduct",null),e("setState","failure"),console.log(u.error_description||u.message)}},async deleteProduct({commit:e},t){try{if(e("setState","loading"),null!=t.product_picture){const{error:e}=await Nt.storage.from("products-pictures").remove(t.product_picture);if(e)throw e}const{error:i}=await Nt.from("products").delete().eq("id",t.id);if(i)throw i;e("setState","success")}catch(i){e("setState","failure"),console.log(i.error_description||i.message)}},async addEntry({commit:e},t){try{console.log(t),e("setState","loading");const{data:a,error:r}=await Nt.from("accounting").insert({name:t.name,info:t.info,type:t.type,amount:t.type.includes("-")?-Math.abs(t.amount):Math.abs(t.amount),product:t.product.id,user_id:this.getters.getUser.id,company_id:this.getters.getUserCompany.id,currencyIsEuro:t.currencyIsEuro,variation:""!=t.variation?t.variation:null,extras:t.extras.length>0?t.extras:null}).select();if(r)throw r;if(e("setCurrentEntry",a[0]),null!=t.image){var i=t.image.substring(t.image.indexOf(":"),t.image.indexOf(";")).replace(":",""),s=a[0].id+"."+i.split("/")[1];{console.log(t.image);const{error:e}=await Nt.storage.from("bill-pictures/"+this.getters.getUserCompany.id).upload(s,t.image,{cacheControl:"3600",upsert:!0,contentType:i});if(e)throw e}{const{data:t,error:i}=await Nt.from("accounting").update({bill_picture:s}).eq("id",this.getters.getCurrentEntry.id).select();if(i)throw i;e("setCurrentEntry",t[0])}}const o=this.getters.getCurrentEntry;o.userName=this.getters.getUser.user_metadata.name,console.log(o.userName),e("setCurrentEntry",o),e("setState","success")}catch(a){e("setCurrentEntry",null),e("setState","failure"),console.log(a.error_description||a.message)}},async updateEntry({commit:e},t){try{e("setState","loading");const{data:a,error:r}=await Nt.from("accounting").update({name:t.name,info:t.info,type:t.type,amount:t.type.includes("-")?-Math.abs(t.amount):Math.abs(t.amount),product:t.product.id,currencyIsEuro:t.currencyIsEuro,variation:""!=t.variation?t.variation:null,extras:t.extras.length>0?t.extras:null}).eq("id",t.id).select();if(r)throw r;if(e("setCurrentEntry",a[0]),null!=t.image&&t.imageBefore!=t.image){if(null!=t.imageBefore){const{error:e}=await Nt.storage.from("bill-pictures/"+this.getters.getUserCompany.id).remove(a[0].bill_picture);if(e)throw e}var i=t.image.substring(t.image.indexOf(":"),t.image.indexOf(";")).replace(":",""),s=t.id+"."+i.split("/")[1];{const{error:e}=await Nt.storage.from("bill-pictures/"+this.getters.getUserCompany.id).upload(s,t.image,{cacheControl:"3600",upsert:!0,contentType:i});if(e)throw e}{const{data:i,error:a}=await Nt.from("accounting").update({bill_picture:s}).eq("id",t.id).select();if(a)throw a;e("setCurrentEntry",i[0])}}e("setState","success")}catch(a){e("setCurrentEntry",null),e("setState","failure"),console.log(a.error_description||a.message)}},async deleteEntry({commit:e},t){try{if(e("setState","loading"),null!=t.product_picture){const{error:e}=await Nt.storage.from("bill-pictures/"+this.getters.getUserCompany.id).remove(t.bill_picture);if(e)throw e}const{error:i}=await Nt.from("accounting").delete().eq("id",t.id);if(i)throw i;e("setState","success")}catch(i){e("setState","failure"),console.log(i.error_description||i.message)}}},modules:{},plugins:[(0,_v.Z)()]});var bv=wv;const kv=[{path:"/",alias:["/stats"],name:"StatsView",component:Hm},{path:"/orders",name:"OrderView",component:Kp},{path:"/services",name:"ServiceView",component:Ap},{path:"/reviews",name:"ReviewView",component:fv},{path:"/companies",name:"CompanyView",component:fp},{path:"/users",name:"UserView",component:km},{path:"/settings",name:"SettingsView",component:qp,meta:{locked:!0,noAccess:!0}},{path:"/:companyalias",component:Wo,meta:{footer:!1}},{path:"/orders/:orderid",component:Cc,meta:{footer:!1}},{path:"/services/:serviceid",component:su,meta:{footer:!1}},{path:"/orders/:orderid/confirm",component:Cu,meta:{footer:!1}},{path:"/services/:serviceid/confirm",component:Gu,meta:{footer:!1}},{path:"/users/:userid",component:kh,meta:{footer:!1,locked:!0,noAccess:!0}}],Ev=(0,W.p7)({history:(0,W.PO)("/"),routes:kv,scrollBehavior(){document.getElementById("app").scrollIntoView({behavior:"smooth"}),document.getElementById("navbarToggler").classList.remove("show")}});Ev.beforeEach((async(e,t,i)=>{if("true"==e.query.int&&null!=e.query.access_token&&"null"!=e.query.access_token)try{var s=null;{const{data:t}=await Nt.auth.setSession({access_token:e.query.access_token,refresh_token:e.query.refresh_token});s=t.user}{console.log(s);const{data:e,error:t}=await Nt.from("user_roles").select().eq("id",s.id);if(t)throw t;null!=e&&(s.role=e[0].role)}bv.commit("setUser",s),bv.dispatch("startOrderSubscription"),bv.dispatch("startServiceSubscription")}catch(r){bv.commit("setUser",null)}else"true"==e.query.int&&await new Promise((e=>setTimeout(e,500)));var a=bv.getters.getUser;null==a?(window.location.replace("https://schillerando.de/auth?redirect=int_"+e.path),i()):"admin"!=a.role&&"driver"!=a.role?(window.location.replace("https://schillerando.de"),i()):i()}));var xv=Ev;(0,s.ri)($).use(bv).use(xv).mount("#app")},5203:function(e,t,i){var s={"./accounting.png":63,"./boosting.png":6662,"./cola.png":7573,"./combined.png":9083,"./delivery.png":6323,"./hero_image.png":4077,"./location.png":6780,"./lock.png":1029,"./logo.png":6949,"./logo_blue.png":9542,"./logo_reversed.png":4495,"./logo_reversed_background.png":4422,"./logo_transparent.png":5833,"./pin.png":4380,"./prices.png":8915,"./products.png":4939,"./schillerpay_button.png":179,"./schillerpay_einrichten.png":8597,"./schillerpay_logo.png":4868,"./service.png":3382};function a(e){var t=r(e);return i(t)}function r(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=r,e.exports=a,a.id=5203},63:function(e,t,i){"use strict";e.exports=i.p+"img/accounting.0a000003.png"},6662:function(e,t,i){"use strict";e.exports=i.p+"img/boosting.e5b5add5.png"},7573:function(e,t,i){"use strict";e.exports=i.p+"img/cola.64f01ebe.png"},9083:function(e,t,i){"use strict";e.exports=i.p+"img/combined.d1178e41.png"},6323:function(e,t,i){"use strict";e.exports=i.p+"img/delivery.12c34355.png"},4077:function(e,t,i){"use strict";e.exports=i.p+"img/hero_image.9eefec6d.png"},6780:function(e,t,i){"use strict";e.exports=i.p+"img/location.753badd3.png"},1029:function(e,t,i){"use strict";e.exports=i.p+"img/lock.41092fc5.png"},6949:function(e,t,i){"use strict";e.exports=i.p+"img/logo.54c2e11f.png"},9542:function(e,t,i){"use strict";e.exports=i.p+"img/logo_blue.bbabc485.png"},4495:function(e,t,i){"use strict";e.exports=i.p+"img/logo_reversed.07c16239.png"},4422:function(e,t,i){"use strict";e.exports=i.p+"img/logo_reversed_background.ed99d671.png"},5833:function(e,t,i){"use strict";e.exports=i.p+"img/logo_transparent.67ae4d7f.png"},4380:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASIAAAHCCAYAAABL+sQ0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABYqSURBVHgB7d0/dhtXlsfxW6CTiZpeQcMraE3WWUtZZ5ZmojlzZAkrsJ1NZmkFI60AIn0mlrQC0dlkplfQmBU0HU4fodB164EiQKKA+vP+v+/nHP6RRCmwyR/uu+++V5WgbEs5b96fy1fySDbNx43MpZI/tL93+7b58vmt+Yl/9Wb7Js2/tdr5/VX7+xv5vf19fZs1v/5H83Gx/XoUqRLkb9kEhwmaefOrP4oGyab5tTwImJA0iDSc9ON18/Z/zefX8rl5I6SyRxDl5n+agFm3IfOn5u3RTuCk7KYNJRNQv8lZ8/E/28+RCYIoZbqsOpOnoqGzkcdilkyph05/lVyJhlMlv2wrp5UgSQRRSu6C5y87wYM7q204/dJUhVcEUzoIotj93ATORr7dBs8jwRDXbTBV8lGetwGFSBFEsdmvevRjOUstt2621dLHplr6QAM8LgRRDEz4vGw++zaT5nL8TChdEEpxIIhCWX6Z3fmJ8AmsasKoakLpefMRQRBEvt31fF4K4RMb0+w+k7eMB/hFEPmwv/R6LEiBNrrfsnTzgyByyUw0v5BafhCqn1SZKmktrxkHcIcgcsEsv36i+slMJe+2vaQrgVUEkU0EUCm0Snot3zXBBCsIIhsum/6PBhCTzqUhkCwhiKYggGAQSBMRRGP8LE+bBvR/CwGEfQTSSATREPSA0I9e+PYjA5L9EUR9LOWRnDUVEAGEIXSXjW3/XgiiY8wgolZAPwgwFoF0EkHU5UK+b96/EgYRYQf9oyMIovtYhsGtVbPR8YTqaB9BdItlGHyaNdX2Z3nLOTaDIFK6G1Y3UcR2PPzS3bUFR0ZKDyKqIMSgkjfbZnax1VG5QUQVhLho7+hZE0ZF3oM0kxJdNs3oWj4JIYR4zJufxl+bF8ifpEBlVUTL9n/2e+FpGIhbcTtr5VREF/KifcUhhBA/Ux1dtrd6FiH/ioiGNFKmjezv5EfJXN5BxFIMech+qZbv0kx3xViKIQ/6gvqp/Z7OVJ5BpOfEzK4Y58SQi3n7PZ3prlp+S7PL9pwY/SDkK8O+UT5BRD8IZbneDkCuJAN5BNFyu4ZmQBFlyaaJnX6PSK/tIIRQJvMCvEx/FZB2EJkhRUIIJbvdUXsqCUt3aaYhJNx2B3xRNQ3s75pGdoLOJEUX7RZmkv/BAYf+Kv/evH8vv0hi0gsiE0KvBMBDesVxgmGUVhARQsBpCYZROkFECAH9JRZGaQQRIQQMl1AYxR9EhBAwXiJhFHcQEULAdAmEUbxzROZJq2zRA/a8lBfNT1aE4gwinRKt2wOsAGyayTN5Lh8kMvEF0d3ZMe4SAuy72R6UjeqxRXEFEafoAR+iO7UfTxARQoBPGkb/GsvTZeM5fW8uNZsLAB9uX/ijEEcQ6fWu3KwI+PZo+7MXXPg5IjMr9F8CIIQ/y7/J78165H8loLA9In08Sh1PeQgUa9Y0r5/LlQQSLohoTgMxudk2r1cSQLgeESEExOR8u2EURJggMg2yuQCISbDmtf+l2aW8lE2zMAMQK+9n0vwGEX0hIAXe+0V+l2aEEJCCcznzu2rxF0RmXmguAOKndxh57Bf5WZqZJdnfBEBaPM0XuQ+iZbst+KtQDQEp8nI41v3S7IwlGZCw+fZn2Cm3FZG55OxXAZA2x0s0txXRjOtegSzUTVmxdHdrqrsgYpcMyIluOP0gjrhZmrFLBuTJNK6t33ftpiJiSQbk6czNbJH9INKzZNy2COTJDDq+FMvsLs04SwaUQM+ifWNztshuRXTWPp11LgBydm67cW2vIqJBDZTFVEUrscBeReRh+hJARCye0LdTES2bBlZEz0gC4ImliWs7FdGMGxeBIm3srISmB5HZypsLgPLodr4+Fmyi6UG0oTcEFM1CBkwLIqohABaGHKcFEdUQADUxC8YHEdUQgDvzKVXR+CCiGgKw74WMNC6IqIYA3DdhB21sRTQ6+QBkbORKaXgQ6RT1ZvrcAIAMjayKhgfRGdUQgCNGVEXDzppxwh5AH7V8PeS+omEVESfsAfQx8L6iYUFEbwhAP98PefxQ/yBiyx5Af+fNCupl3y8eUhHRpAYwxLd9v7Bfs5omNYAxej4HrV9FRJMawBgzedrvy/qgSQ1gnO/7fNHpIPq5TbS5AMBw530mrU8H0aZ/wwkAHtic3ug63qxetg9S0yZ173kAALjn5JNhj1dEZ+2yjBACMMX5Nks6nVqasSwDYMPR5Vn30swsy/4uADDd0eVZd0X0FVv2AKw5bzLlUdcfdgcRu2UAbDqye3YsiB4LANiy6W5YHw6iZRtCcwEAezqHGw8HUc/zIQAwSD0kiET+IgBgW3U4Wx5u37NtD8ClA/dZP6yI2LYH4NKBKeuHQcS2PQCXNg/niWZ9vggALHpQ7Oz3iOgPAfDhXp9ovyKiPwTAj8e7v9gPopogAuDB7FgQVfInAQDX7mXNfhDRqAbgw72suQuiZfsH3MYIwIfz9nmJW3dB9BWHXAF4dHbXJ7oLIhrVAHzaWZ7dBRGNagA+7WTOXRDRqAbg04OKaNk2qWlUA/DpfJs9XyoiqiEAIcz1HUEEIJwzkz0miGZs3QMIYLMbRJX8UQDAv7m+M0G0oSICEERbBN32iOYCAP7N9V3FZWgAgqrla62I5gIA4ZxrEDHICCCcr2Q+a/bx5wIAoWw0iNgxAxDW+UwAIKS2IqJZDSCkSv4w03cCAKFszPY9u2YAwmkrIgAIaaPNanbNAITFrhmA8AgiAMGxfQ8gtDkVEYDgCCIAwRFEAIIjiAAERxABCI4gAhAcQQQgOA2iGwGAcG4IIgCh3bA0AxAcQQQgtBu9oXElABBKRY8IQAT0YrTfBQDCWVERAQirKYYIIgCh0awGEFilS7OKighAQG0QfaYiAhAWPSIAYX2W66r95KLpWwNACC+kuj3isRIA8O9a35kgqswvAMCr7WaZCSKmqwGEsJHf9IMJopqKCEAA2zlGE0Rf0SMCEEC12yP6TEUEIIDPpkdUffmNC/l78/5cAMCXFyaDdm9oXAkA+FLJ1e2nu0H0mwCALzu79XdBxM4ZAJ86KiKCCIA/O4PUBBGAMD4fCqJFu422EgBw73qbOa37zzXjShAA7t0733o/iH4RAHBtvZ81+0HEKXwAfhypiNbyQQDArZumP3QkiGhYA3DvQQtoduCLPgoAuFI/XHk9DKLZ3bQjADjwoBf9MIg+E0QAnFnd7w+ph0GkfaKKMALgQEe2zA5+8Zp5IgAOrA/3oGcdX34lAGDf1aHfrDq/nBsbAdiky7Lv5MmhP5od+WsXAgC2rLszpTuIaqasAVh11fUHxyoi3WLjND6A6XRZtug+tdEdRGYbn0OwAKZbH2/1HKuIOrfaAGCgq2N/eDyIRN4JAExxYlmmjgcRU9YAplqf3oE/VRExZQ1gqqtTX3A6iFieARiravJjcfqOs9NBpP8IyzMAY/Tc8OpTEbF7BmAMvfKj12B0vyAyyzOGGwEM0fuYWL8gMndZUxUB6K/u31/uWxEN+kcBFK7H7NCu/kG0aBvWLM8AnLYedntH/yBStbwVADhOn1v2bshfGBZEzBQBOKUafoXQsCBipgjAKdXwSxWHVkTMFAE4ZiXPhxcrw4OImSIA3UZdMT08iDiRD6DLyDGfMRWRLs/YPQOwb+Ds0K5xQcRMEYD71uOf/DMuiBQzRQD2jX7yz/ggEh43BGDL3Ds0epU0PogWck3TGkCrmvZA1ikVETNFANSo2aFd04KImSIAFlZG04LIrAknlWQAEreW1zLR1IpId89oWgOlmjA7tGt6EOlMEU1roEyWhpunB5GiaQ2UqPfl+KfYCSKa1kB56um9oVt2goimNVAa/Zm/EktsVUQ0rYGS6C2MFprUt+wFkTkIey0A8re2tyxT9oJI1TStgexZ2rLfZTeIRN4ITWsgbw7uI7MbRNzeCOTO2pb9LtsVEbc3Ajmr7faGbtkPIiatgVytxNE9ZPaDSDFpDeTHNKmd9IDdBBGT1kB+1m6WZcpNEGlqcqc1kJOPtrfsd7mqiBRb+UAuZu3Ps8N/3hWzlqRXBKRv8lWwp7isiEY/9RFARGp3vaFbboOIrXwgdSvx8Ogwt0Gk1u7TFIAjDrfsd7kPInMqfyUA0uOpkHAfRKrm0jQgOebprSvxwE8QsZUPpMfjuVE/QcSAI5AW0xvydtGhr4pIOR2IAmBR5XeTyV8QccE+kArnA4z3+ayIGHAEUlD7H7mpxLdL+SQbeSwAYrSSF/KNeOa3IlIMOALxqsP8fPqviBRVERCjINWQ8l8RqTVNayA6dbjVSpggWnCDIxCZlUi4A+phgkgx4AjEw8FDE4cIF0Qc+wDiEXgTKVwQcewDiIPHw61dQlZEimMfQGgRjNSEDSKOfQBhRVANqdAVkTatXwmAMCIZMA4fRCaNqYoA3wLvlO0KH0SKqgjwr4rnuFUcQURVBPh27fuqj2PiCCJFVQT4E9noTJhDr10u2qMfLwSAS8EOt3aJpyJSVEWAe3V8V/HEVREpqiLApeiqIRVXRaSoigB3IqyGVHwVkaIqAlyIshpS8VVEiqoIsC/SakjFWREpqiLApmirIRVnRaSoigB7Iq6GVLwVkaIqAmyIuhpS8VZEiqoImC7yakjFXREpqiJgiuirIRV3RaSoioDxEqiGVPwVkaIqAsZIohpS8VdEqm6DCMAQiVRDKo2KSPGYamCIZKohlUZFpCK5WxdIQkLVkEqnIlJURUAfSVVDKp2KSFEVAaclVg2ptCoiRVUEHJNcNaTSqogUVRHQLcFqSKVXESmqIuCQJKshlV5FpKiKgIcSrYZUmhWRoioCdiVbDak0KyJFVQTcSbgaUulWRIozaIBKuhpS6VZEypzMvxGgZIlXQyrtIFo0rwSRPToX8KqSq+bn4J0kLu0gMt4IVRFKVeXRK00/iBZNCFEVoURaDT1v3jKQdrN614X8rXk/F6AUM3mSSxDlsDQzavlRgFJUTV8okxBS+QTRQj60pSpQgszm6PIJIsWQI0qg1ZDuGGckryBaNBURVRFyl+ELbl5BpKiKkLMMqyGVXxBRFSFnmb7Q5hdEat3EEZCf1zlWQyrPIDL/sy4EyMcq5+f75RlEikdVIyd6eiDTakjlM1l9CNeEIA/JX/NxSr4VkeKaEOQgg2s+Tsk7iLgmBOlb5XDNxyl5B5HBNSFIVwHVkMo/iLgmBOkqohpSJVREiqoI6ZmVMw9XRhBRFSE1GV161kcpFZGiKkI6CjsdUE4QURUhFZkebD2mpIpIURUhfgXeIFFWEJmqiCtlEa8CqyGV9xGPLly0j1jV8k2JQVTa0syouSYEUcr6YOsxZQYRl6chPnoc6Y0UqswgUlwpi5hkfs3HKWX2iG5dyifZyGMBwsr+mo9Tyq2IFFURYlDIwdZjyq6IFFURwiq+GlJlV0RqzVwRAqrlmYAgahqE18JF+wjBDC9eCwiiFlfKIgR6lF8QRIorZeFboUc5uhBEdzgQC19WVEP7CKJbXBMCfy6ohvaxfb9rKedNNP8qHIiFO2zXH0BFtMtURZTMcIfvr4OoiA5hyBFuUA11oCI6hEYiXCjoqRxDEUSHcE0IbNPt+oKeyjEUQdSFqgg28f10FEHUZdG+enH0A9MxvHgSQXQMRz8wHcOLPRBEx3D0A9MxvNgD2/enmCFHferHuQDDsF3fExXRKQw5Yiy+b3qjIuqLZ6FhGKqhAaiI+uJZaBiC4cVBCKK+GHJEXwwvDkYQDbHmVQ49sF0/GEE0hNnO55sM3RheHIUgGo6bHNHlhmpoHIJoKLbz0a3ox0ZPwfb9WBftTY6PBDDYrp+AimismgczYgdV8iRURFNwkyMMqqGJqIimMNv5NK5Lx/DiZATRFJzOB8OLVhBE07GdXzK2660giKZiO79kr9mut4MgsmHRVEWcQyuNLsvfCawgiGyhRC9LTTVkE9v3Nl3K+2Y7/6kgd2zXW0ZFZNO6HXKkcZ27GcOsthFENrGdnz+zXf9BYBVBZJ9u568EeaIX6ARBZBvb+fniriFnCCIXFs03LNv5ueFBiQ4RRK7wTZsXtuudYvvepYt24O2FIHVs1ztGReRSLT8I2/npo+fnHEHkkmlcs52fMtOgfidwiiByj+38lNHr84Igcs1URVyclSK2670hiHzgKbEpYrveI4LIF54Sm5aaRwP5dCbw42OzRHsmXzef/VkQu5W8lP8QeENF5FMtr4Tt/PixXe8dQeQT59Dip708tuu9I4h841rZuNHLC4IgCoHdmDixXR8MQRSC2c7ncq24sF0fEEEUCtfKxoXT9UERRKFwrWxMVjSowyKIwuIcWgy4DD84gigkzqGFx2X4USCIQuMcWlg0qKNAEMXAzK7QuPaPBnUkCKIY0LgOQf+bvxFEgSCKB41rn8x2PVVoJLg8PyZLedy8NHwSuMZl+JGhIooJjWs/ankiiApBFBsa125xnixKBFFsaFy7xHmySBFEcaJx7QLXv0aLZnWsaFzbRoM6YlREsaJxbVctzwTRIohixm2BdpgG9bUgWgRRzEzjmubqNDSoE0AQxY/G9RRceJYEmtUpWMrT5iXjvWAoGtSJoCJKwUI+0LgegQnqZBBEqaBxPQwT1EkhiFJB43oIGtSJIYjSoo1rzqGdQoM6OTSrU7OUl83Lx1LQhQZ1gqiIUqOPvaFx3Y0GdZIIohStefzNQTSok0UQpcgcV+CqkH00qBNGEKWqlldC4/oODeqk0axOGY3rWzSoE0dFlDIa1wYN6uQRRKmjL8KtixkgiFK3aCuiUhvXPCQxEwRRDkptXNOgzgZBlAN9Ymld2KFYMzP0TpAFgigXpV0VQm8sKwRRTsp5OCNLssycCfLxsQmhb+VfmsroseRLZ4Z4IkdmqIhys2gb1/k+sYLHAmWJIMpRnemhWB4LlC2CKEd5zhZxqDVjBFGucpstYmYoawRRrnKaLarkAzNDeSOIcpbLbBEXwWWPIMpd+rNFLMkKwBxR7tKeLWJmqBBURCVIdbaotPNzBSOISpHabJGZGboSFIEgKkVas0XMDBWGICpJKrNFzAwVhyAqiZktinuJpuMGzAwVhyAqTewX7q9pUJeIICpRvLNFLMkKxRxRieKcLWJmqGBURKUys0UricWMYxwlI4hKFsvAoM4MPZcPgmIRRCWLY7aImSEQRMULPVvEzBCEIIKZLQpVkVwzMwRFEEHD6E2Q2SIuwscWQQTD/yAhSzJ8wRwRDDNbVHmaLWJmCHuoiLDrjfiYLarZJcM+ggh3fFy4b+4ZeifADoII+9zOFjEzhIMIIjxUOzr+wcwQOhBEeMjFEo0lGY4giHCY3SXaDUsyHEMQoZut4x8syXBCJcAxS3navFy9l/F0ZugbAY6gIsJxUx9bXcsTAU4giHDa+KtlWZKhF4544DRz/OP/m8rorwP+Fsc40BsVEfoZekKfJRkGIIjQX/8l2luWZBiCIEJ/Gi6nD6yuttv+QG9s32O4S/kkm47rQnQimwlqDERFhOHWHY/+4RgHRiKIMNxCrg8s0ThZj9EIIoy1f4kaxzgABLFs+kQXTbfosvkMAIJZNjtkS5kLMME/AQfg6nwF0fiwAAAAAElFTkSuQmCC"},8915:function(e,t,i){"use strict";e.exports=i.p+"img/prices.f03e18bc.png"},4939:function(e,t,i){"use strict";e.exports=i.p+"img/products.aee9eb33.png"},179:function(e,t,i){"use strict";e.exports=i.p+"img/schillerpay_button.13d44137.png"},8597:function(e,t,i){"use strict";e.exports=i.p+"img/schillerpay_einrichten.7b1a0f77.png"},4868:function(e,t,i){"use strict";e.exports=i.p+"img/schillerpay_logo.59e49007.png"},3382:function(e,t,i){"use strict";e.exports=i.p+"img/service.643a402c.png"}},t={};function i(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,i),r.exports}i.m=e,function(){var e=[];i.O=function(t,s,a,r){if(!s){var o=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],r=e[d][2];for(var n=!0,l=0;l<s.length;l++)(!1&r||o>=r)&&Object.keys(i.O).every((function(e){return i.O[e](s[l])}))?s.splice(l--,1):(n=!1,r<o&&(o=r));if(n){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,a,r]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};i.t=function(s,a){if(1&a&&(s=this(s)),8&a)return s;if("object"===typeof s&&s){if(4&a&&s.__esModule)return s;if(16&a&&"function"===typeof s.then)return s}var r=Object.create(null);i.r(r);var o={};e=e||[null,t({}),t([]),t(t)];for(var n=2&a&&s;"object"==typeof n&&!~e.indexOf(n);n=t(n))Object.getOwnPropertyNames(n).forEach((function(e){o[e]=function(){return s[e]}}));return o["default"]=function(){return s},i.d(r,o),r}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){i.p="/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,r,o=s[0],n=s[1],l=s[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(l)var d=l(i)}for(t&&t(s);c<o.length;c++)r=o[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(d)},s=self["webpackChunkintern"]=self["webpackChunkintern"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(9755)}));s=i.O(s)})();
//# sourceMappingURL=app.60cb0eb6.js.map